<!DOCTYPE html>
<html lang="zh-cn" dir="ltr" class="client-nojs">
<head>
<title>XEP-0077 - Jabber/XMPP中文翻译计划</title>
<meta charset="UTF-8" />
<meta name="generator" content="MediaWiki 1.18.2" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="Jabber/XMPP中文翻译计划 (zh-cn)" />
<link rel="EditURI" type="application/rsd+xml" href="http://wiki.jabbercn.org/api.php?action=rsd" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" />
<link rel="alternate" type="application/atom+xml" title="Jabber/XMPP中文翻译计划的Atom" href="/index.php?title=%E7%89%B9%E6%AE%8A:%E6%9C%80%E8%BF%91%E6%9B%B4%E6%94%B9&amp;feed=atom" />
<link rel="stylesheet" href="/load.php?debug=false&amp;lang=zh-cn&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cskins.monobook&amp;only=styles&amp;skin=monobook&amp;*" />
<!--[if lt IE 5.5000]><link rel="stylesheet" href="/skins/monobook/IE50Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 5.5000]><link rel="stylesheet" href="/skins/monobook/IE55Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 6]><link rel="stylesheet" href="/skins/monobook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/skins/monobook/IE70Fixes.css?303" media="screen" /><![endif]--><meta name="ResourceLoaderDynamicStyles" content="" />
<style>a:lang(ar),a:lang(ckb),a:lang(fa),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}a.new,#quickbar a.new{color:#ba0000}

/* cache key: mediawiki:resourceloader:filter:minify-css:4:c88e2bcd56513749bec09a7e29cb3ffa */</style>
<script src="/load.php?debug=false&amp;lang=zh-cn&amp;modules=startup&amp;only=scripts&amp;skin=monobook&amp;*"></script>
<script>if(window.mw){
	mw.config.set({"wgCanonicalNamespace": "", "wgCanonicalSpecialPageName": false, "wgNamespaceNumber": 0, "wgPageName": "XEP-0077", "wgTitle": "XEP-0077", "wgCurRevisionId": 2111, "wgArticleId": 11, "wgIsArticle": true, "wgAction": "view", "wgUserName": null, "wgUserGroups": ["*"], "wgCategories": ["XMPP扩展", "已翻译"], "wgBreakFrames": false, "wgRestrictionEdit": [], "wgRestrictionMove": [], "wgSearchNamespaces": [0]});
}
</script><script>if(window.mw){
	mw.loader.load(["mediawiki.page.startup"]);
}
</script>
<style type="text/css">/*<![CDATA[*/
.source-xml {border: 1px dashed #2f6fab; color: black; background-color: #f9f9f9;}
.source-xml li, .source-xml pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for xml
 * CSS class: source-xml, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.source-xml .de1, .source-xml .de2 {font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;}
.source-xml  {font-family: monospace;}
.source-xml .imp {font-weight: bold; color: red;}
.source-xml li, .source-xml li.li1 {font-weight: normal;}
.source-xml li.li2 {font-weight: bold;}
.source-xml .co1 {color: #808080; font-style: italic;}
.source-xml .co2 {color: #404040; font-style: italic;}
.source-xml .co3 {color: #000000;}
.source-xml .co4 {color: #400000; font-weight: bold;}
.source-xml .es0 {color: #000099; font-weight: bold;}
.source-xml .br0 {color: #66cc66;}
.source-xml .sy0 {color: #66cc66;}
.source-xml .st0 {color: #ff0000;}
.source-xml .nu0 {color: #cc66cc;}
.source-xml .re0 {color: #000066;}
.source-xml .re1 {color: #000000; font-weight: bold;}
.source-xml .re2 {color: #000000; font-weight: bold;}
.source-xml .ln-xtra, .source-xml li.ln-xtra, .source-xml div.ln-xtra {background-color: #ffc;}
.source-xml span.xtra { display:block; }

/*]]>*/
</style>
<style type="text/css">/*<![CDATA[*/
@import "/index.php?title=MediaWiki:Geshi.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
/*]]>*/
</style></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-XEP-0077 action-view skin-monobook">
<div id="globalWrapper">
<div id="column-content"><div id="content">
	<a id="top"></a>
	
	<h1 id="firstHeading" class="firstHeading">XEP-0077</h1>
	<div id="bodyContent">
		<div id="siteSub">来自Jabber/XMPP中文翻译计划</div>
		<div id="contentSub"></div>
		<div id="jump-to-nav">跳转到： <a href="#column-one">导航</a>, <a href="#searchInput">搜索</a></div>
		<!-- start content -->
<div lang="zh-cn" dir="ltr" class="mw-content-ltr"><p><br />
<b>本文的英文原文来自<a rel="nofollow" class="external text" href="http://www.xmpp.org/extensions/xep-0077.html">XEP-0077</a></b>
</p><p><b>XEP-0077:带内注册</b>
</p><p>摘要: 本文定义了一个XMPP协议扩展用于基于XMPP的即时消息服务器和其他XMPP网络上的服务(例如群聊房间以及和非XMPP的IM服务之间的网关)的带内注册. 本协议可以通过使用数据表单来扩展, 这可以使得服务在注册过程中能够收集广泛的信息. 本协议也支持带内变更密码和取消现有的注册.
</p><p>作者: Peter Saint-Andre
</p><p>版权: © 1999 - 2010 XMPP标准化基金会(XSF). 参见<a href="/XEP-0077#.E9.99.84.E5.BD.95C:.E6.B3.95.E5.BE.8B.E9.80.9A.E5.91.8A" title="XEP-0077">法律通告</a>.
</p><p>状态: 最终
</p><p>类型: 标准跟踪
</p><p>版本: 2.3
</p><p>最后更新日期: 2009-09-15
</p><p>注意: 这里定义的协议是XMPP标准化基金会的一个<b>最终标准</b>,对于实现和布署来说可以被认为是一个稳定技术.
</p>
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>目录</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#.E7.BB.AA.E8.AE.BA"><span class="tocnumber">1</span> <span class="toctext">绪论</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#.E8.A6.81.E6.B1.82"><span class="tocnumber">2</span> <span class="toctext">要求</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#.E7.94.A8.E4.BE.8B"><span class="tocnumber">3</span> <span class="toctext">用例</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#.E5.AE.9E.E4.BD.93.E6.B3.A8.E5.86.8C.E5.88.B0.E4.B8.80.E4.B8.AA.E4.B8.BB.E6.9C.BA"><span class="tocnumber">3.1</span> <span class="toctext">实体注册到一个主机</span></a>
<ul>
<li class="toclevel-3 tocsection-5"><a href="#.E6.B3.A8.E5.86.8C.E5.88.B0.E4.B8.80.E4.B8.AA.E6.9C.8D.E5.8A.A1.E5.99.A8"><span class="tocnumber">3.1.1</span> <span class="toctext">注册到一个服务器</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-6"><a href="#.E5.AE.9E.E4.BD.93.E5.8F.96.E6.B6.88.E7.8E.B0.E5.AD.98.E6.B3.A8.E5.86.8C"><span class="tocnumber">3.2</span> <span class="toctext">实体取消现存注册</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#.E7.94.A8.E6.88.B7.E5.8F.98.E6.9B.B4.E5.AF.86.E7.A0.81"><span class="tocnumber">3.3</span> <span class="toctext">用户变更密码</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="#.E5.8F.AF.E6.89.A9.E5.B1.95.E6.80.A7"><span class="tocnumber">4</span> <span class="toctext">可扩展性</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#.E9.87.8D.E5.AE.9A.E5.90.91"><span class="tocnumber">5</span> <span class="toctext">重定向</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#.E4.BC.98.E5.85.88.E6.AC.A1.E5.BA.8F"><span class="tocnumber">6</span> <span class="toctext">优先次序</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="#Key.E5.85.83.E7.B4.A0"><span class="tocnumber">7</span> <span class="toctext">Key元素</span></a></li>
<li class="toclevel-1 tocsection-12"><a href="#.E6.B5.81.E7.89.B9.E6.80.A7"><span class="tocnumber">8</span> <span class="toctext">流特性</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="#.E9.94.99.E8.AF.AF.E5.A4.84.E7.90.86"><span class="tocnumber">9</span> <span class="toctext">错误处理</span></a></li>
<li class="toclevel-1 tocsection-14"><a href="#.E5.AE.89.E5.85.A8.E4.BA.8B.E9.A1.B9"><span class="tocnumber">10</span> <span class="toctext">安全事项</span></a></li>
<li class="toclevel-1 tocsection-15"><a href="#IANA.E4.BA.8B.E9.A1.B9"><span class="tocnumber">11</span> <span class="toctext">IANA事项</span></a></li>
<li class="toclevel-1 tocsection-16"><a href="#XMPP.E6.B3.A8.E5.86.8C.E4.BA.8B.E9.A1.B9"><span class="tocnumber">12</span> <span class="toctext">XMPP注册事项</span></a>
<ul>
<li class="toclevel-2 tocsection-17"><a href="#.E5.8D.8F.E8.AE.AE.E5.90.8D.E5.AD.97.E7.A9.BA.E9.97.B4"><span class="tocnumber">12.1</span> <span class="toctext">协议名字空间</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#.E6.B5.81.E7.89.B9.E6.80.A7_2"><span class="tocnumber">12.2</span> <span class="toctext">流特性</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#URI.E6.9F.A5.E8.AF.A2.E7.B1.BB.E5.9E.8B"><span class="tocnumber">12.3</span> <span class="toctext">URI查询类型</span></a>
<ul>
<li class="toclevel-3 tocsection-20"><a href="#register"><span class="tocnumber">12.3.1</span> <span class="toctext">register</span></a></li>
<li class="toclevel-3 tocsection-21"><a href="#unregister"><span class="tocnumber">12.3.2</span> <span class="toctext">unregister</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-22"><a href="#.E5.AD.97.E6.AE.B5.E6.A0.87.E5.87.86.E5.8C.96"><span class="tocnumber">12.4</span> <span class="toctext">字段标准化</span></a>
<ul>
<li class="toclevel-3 tocsection-23"><a href="#.E6.B3.A8.E5.86.8C"><span class="tocnumber">12.4.1</span> <span class="toctext">注册</span></a></li>
<li class="toclevel-3 tocsection-24"><a href="#.E6.B3.A8.E9.94.80"><span class="tocnumber">12.4.2</span> <span class="toctext">注销</span></a></li>
<li class="toclevel-3 tocsection-25"><a href="#.E5.8F.98.E6.9B.B4.E5.AF.86.E7.A0.81"><span class="tocnumber">12.4.3</span> <span class="toctext">变更密码</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-26"><a href="#XML.E6.9E.B6.E6.9E.84"><span class="tocnumber">13</span> <span class="toctext">XML架构</span></a>
<ul>
<li class="toclevel-2 tocsection-27"><a href="#jabber:iq:register"><span class="tocnumber">13.1</span> <span class="toctext">jabber:iq:register</span></a></li>
<li class="toclevel-2 tocsection-28"><a href="#Stream_Feature"><span class="tocnumber">13.2</span> <span class="toctext">Stream Feature</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-29"><a href="#.E9.99.84.E5.BD.95"><span class="tocnumber">14</span> <span class="toctext">附录</span></a>
<ul>
<li class="toclevel-2 tocsection-30"><a href="#.E9.99.84.E5.BD.95A:.E6.96.87.E6.A1.A3.E4.BF.A1.E6.81.AF"><span class="tocnumber">14.1</span> <span class="toctext">附录A:文档信息</span></a></li>
<li class="toclevel-2 tocsection-31"><a href="#.E9.99.84.E5.BD.95B:.E4.BD.9C.E8.80.85.E4.BF.A1.E6.81.AF"><span class="tocnumber">14.2</span> <span class="toctext">附录B:作者信息</span></a></li>
<li class="toclevel-2"><a href="#.E9.99.84.E5.BD.95C:.E6.B3.95.E5.BE.8B.E9.80.9A.E5.91.8A"><span class="tocnumber">14.3</span> <span class="toctext">附录C:法律通告</span></a></li>
<li class="toclevel-2"><a href="#.E9.99.84.E5.BD.95D:.E5.92.8CXMPP.E7.9A.84.E5.85.B3.E7.B3.BB"><span class="tocnumber">14.4</span> <span class="toctext">附录D:和XMPP的关系</span></a></li>
<li class="toclevel-2"><a href="#.E9.99.84.E5.BD.95E:.E8.AE.A8.E8.AE.BA.E5.9C.B0.E7.82.B9"><span class="tocnumber">14.5</span> <span class="toctext">附录E:讨论地点</span></a></li>
<li class="toclevel-2"><a href="#.E9.99.84.E5.BD.95F:.E9.9C.80.E6.B1.82.E4.B8.80.E8.87.B4.E6.80.A7"><span class="tocnumber">14.6</span> <span class="toctext">附录F:需求一致性</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8"><span class="tocnumber">14.7</span> <span class="toctext">附录G:备注</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="#.E9.99.84.E5.BD.95H:.E4.BF.AE.E8.AE.A2.E5.8E.86.E5.8F.B2"><span class="tocnumber">14.8</span> <span class="toctext">附录H:修订历史</span></a></li>
</ul>
</li>
</ul>
</td></tr></table>
<h2> <span class="mw-headline" id=".E7.BB.AA.E8.AE.BA">绪论</span></h2>
<p>Jabber协议很早就包含了一个从即时消息服务器和相关服务进行带内注册的方法. 这个方法使用 'jabber:iq:register' 名字空间并且被广泛记载于Internet-Drafts和其他地方. 因为带内注册不是 <a rel="nofollow" class="external text" href="http://tools.ietf.org/html/rfc2779">RFC 2779</a> <a href="/XEP-0077#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0077">1</a>必需的, 'jabber:iq:register' 名字空间的文档从 <a href="/RFC3921" title="RFC3921">XMPP IM</a> <a href="/XEP-0077#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0077">2</a>移除了. 本协议填补了这部分文件的空白.
</p>
<h2> <span class="mw-headline" id=".E8.A6.81.E6.B1.82">要求</span></h2>
<p>带内注册必须使一个实体能够向一个主机注册, 从一个主机取消现有的注册, 或从一个主机变更密码. 这里"host"的含义如下:
</p>
<ol><li> 一个即时消息服务器, 如 <b>XMPP IM</b> 中所描述并且在 <a href="/XEP-0030" title="XEP-0030">服务发现</a> [[XEP-0077#附录G:备注|3] 中的 category+type 标识为 "server/im" 
</li><li> 一个附加的服务, 例如一个网关(见 <a rel="nofollow" class="external text" href="http://xmpp.org/extensions/xep-0100.html">网关互动</a> <a href="/XEP-0077#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0077">4</a>) 或一个<a href="/XEP-0045" title="XEP-0045">多用户聊天</a> <a href="/XEP-0077#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0077">5</a>服务
</li></ol>
<p>如果必要, 关于信息收集的扩展性应该使用 <a href="/XEP-0004" title="XEP-0004">数据表单</a> <a href="/XEP-0077#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0077">6</a>.
</p>
<h2> <span class="mw-headline" id=".E7.94.A8.E4.BE.8B">用例</span></h2>
<h3> <span class="mw-headline" id=".E5.AE.9E.E4.BD.93.E6.B3.A8.E5.86.8C.E5.88.B0.E4.B8.80.E4.B8.AA.E4.B8.BB.E6.9C.BA">实体注册到一个主机</span></h3>
<p>为了确定向一个主机注册需要哪些字段, 一个实体应该(SHOULD)首先发送一个 IQ get 给主机. 这个实体不应该(SHOULD NOT)通过先发送一个IQ set来尝试猜测需要的字段 , 因为需要的数据的性质是由服务决定的.
</p><p><b>例子 1. 实体向主机请求注册字段</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'get'</span> <span class="re0">id</span>=<span class="st0">'reg1'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'jabber:iq:register'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>如果实体未曾注册并且主机支持带内注册, 主机必须(MUST)通知实体需要的注册字段. 如果主机不支持带内注册, 它必须(MUST)返回一个 &lt;service-unavailable/&gt; 错误. 如果一个主机重定向注册请求到一些其他的媒介(例如web网站), 它只可以(MAY)返回一个 &lt;instructions/&gt; 元素, 详见本文的 <a href="/XEP-0077#.E9.87.8D.E5.AE.9A.E5.90.91" title="XEP-0077">重定向</a> 章节.
</p><p><b>例子 2. 主机返回注册字段给实体</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'result'</span> <span class="re0">id</span>=<span class="st0">'reg1'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'jabber:iq:register'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;instructions<span class="re2">&gt;</span></span><span class="co3">
      Choose a username and password for use with this service.
      Please also provide your email address.
    </span><span class="re1">&lt;/instructions<span class="re2">&gt;</span></span>
    <span class="re1">&lt;username</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;password</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;email</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;/query<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>如果主机确定(基于'from'地址) 该实体已经注册, 它给该IQ get返回的应答IQ result中必须(MUST)包含一个空的&lt;registered/&gt;元素(表示该实体已注册), 应该(SHOULD)包含该实体当前已有的注册信息(尽管&lt;password/&gt;元素可以(MAY)是空的), 并且应该(SHOULD)包含一个&lt;instructions/&gt;元素(其XML字符数据可以(MAY)被修改以反映该实体已被注册的事实).
</p><p>如果该主机是一个即时消息服务器, 在这个阶段它应该(SHOULD)假设请求的实体是未注册的,除非实体已经被验证(详见下文中的 <a href="/XEP-0077#.E6.B3.A8.E5.86.8C.E5.88.B0.E4.B8.80.E4.B8.AA.E6.9C.8D.E5.8A.A1.E5.99.A8" title="XEP-0077">注册到一个服务器</a> 章节).
</p><p><b>例子 3. 主机通知实体当前的注册</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'result'</span> <span class="re0">id</span>=<span class="st0">'reg1'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'jabber:iq:register'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;registered</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;username<span class="re2">&gt;</span></span><span class="co3">juliet</span><span class="re1">&lt;/username<span class="re2">&gt;</span></span>
    <span class="re1">&lt;password<span class="re2">&gt;</span></span><span class="co3">R0m30</span><span class="re1">&lt;/password<span class="re2">&gt;</span></span>
    <span class="re1">&lt;email<span class="re2">&gt;</span></span><span class="co3">juliet@capulet.com</span><span class="re1">&lt;/email<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/query<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>如果实体还未注册, 该实体应该(SHOULD)提供必需的信息.
</p><p><b>例子 4. 实体提供必需信息</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'set'</span> <span class="re0">id</span>=<span class="st0">'reg2'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'jabber:iq:register'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;username<span class="re2">&gt;</span></span><span class="co3">bill</span><span class="re1">&lt;/username<span class="re2">&gt;</span></span>
    <span class="re1">&lt;password<span class="re2">&gt;</span></span><span class="co3">Calliope</span><span class="re1">&lt;/password<span class="re2">&gt;</span></span>
    <span class="re1">&lt;email<span class="re2">&gt;</span></span><span class="co3">bard@shakespeare.lit</span><span class="re1">&lt;/email<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/query<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>注意: 请求的实体必须(MUST)在IQ result中包含提供的所有元素信息(除了&lt;instructions/&gt;元素).
</p><p><b>例子 5. 主机通知实体注册成功</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'result'</span> <span class="re0">id</span>=<span class="st0">'reg2'</span><span class="re2">/&gt;</span></pre></div></div>
<p>反之, 注册可能失败. 可能的失败包括用户名冲突(期待的用户名已经被另一个实体使用)以及请求的实体未能提供完全的必需信息.
</p><p><b>例子 6. 主机通知实体注册失败(用户名冲突)</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'error'</span> <span class="re0">id</span>=<span class="st0">'reg2'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'jabber:iq:register'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;username<span class="re2">&gt;</span></span><span class="co3">bill</span><span class="re1">&lt;/username<span class="re2">&gt;</span></span>
    <span class="re1">&lt;password<span class="re2">&gt;</span></span><span class="co3">m1cro$oft</span><span class="re1">&lt;/password<span class="re2">&gt;</span></span>
    <span class="re1">&lt;email<span class="re2">&gt;</span></span><span class="co3">billg@bigcompany.com</span><span class="re1">&lt;/email<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/query<span class="re2">&gt;</span></span>
  <span class="re1">&lt;error</span> <span class="re0">code</span>=<span class="st0">'409'</span> <span class="re0">type</span>=<span class="st0">'cancel'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;conflict</span> <span class="re0">xmlns</span>=<span class="st0">'urn:ietf:params:xml:ns:xmpp-stanzas'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;/error<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>如果请求的实体在注册时未提供所有的请求信息 <a href="/XEP-0077#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0077">7</a>, 那么服务器或者服务必须(MUST)返回一个&lt;not-acceptable/&gt;错误给请求实体.
</p><p><b>例子 7. 主机通知实体注册失败(一些必需的信息未提供)</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'error'</span> <span class="re0">id</span>=<span class="st0">'reg2'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'jabber:iq:register'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;username<span class="re2">&gt;</span></span><span class="co3">bill</span><span class="re1">&lt;/username<span class="re2">&gt;</span></span>
    <span class="re1">&lt;password<span class="re2">&gt;</span></span><span class="co3">Calliope</span><span class="re1">&lt;/password<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/query<span class="re2">&gt;</span></span>
  <span class="re1">&lt;error</span> <span class="re0">code</span>=<span class="st0">'406'</span> <span class="re0">type</span>=<span class="st0">'modify'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;not-acceptable</span> <span class="re0">xmlns</span>=<span class="st0">'urn:ietf:params:xml:ns:xmpp-stanzas'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;/error<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>如果主机需要超出以上的以及超过schema定义的数据元素的额外信息, 它应该(SHOULD)使用本文的 <a href="/XEP-0077#.E5.8F.AF.E6.89.A9.E5.B1.95.E6.80.A7" title="XEP-0077">可扩展性</a> 章节里描述的数据表单. (下面三个例子展示一个现有的账号注册到一个第三方服务, 而不是一个实体向一个服务器注册账号)
</p><p><br />
<b>例子 8. 实体向主机请求注册字段</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'get'</span>
    <span class="re0">from</span>=<span class="st0">'juliet@capulet.com/balcony'</span>
    <span class="re0">to</span>=<span class="st0">'contests.shakespeare.lit'</span>
    <span class="re0">id</span>=<span class="st0">'reg3'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'jabber:iq:register'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p><b>例子 9. 主机返回注册表单给实体</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'result'</span>
    <span class="re0">from</span>=<span class="st0">'contests.shakespeare.lit'</span>
    <span class="re0">to</span>=<span class="st0">'juliet@capulet.com/balcony'</span>
    <span class="re0">id</span>=<span class="st0">'reg3'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'jabber:iq:register'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;instructions<span class="re2">&gt;</span></span><span class="co3">
      Use the enclosed form to register. If your Jabber client does not
      support Data Forms, visit http://www.shakespeare.lit/contests.php
    </span><span class="re1">&lt;/instructions<span class="re2">&gt;</span></span>
    <span class="re1">&lt;x</span> <span class="re0">xmlns</span>=<span class="st0">'jabber:x:data'</span> <span class="re0">type</span>=<span class="st0">'form'</span><span class="re2">&gt;</span>
      <span class="re1">&lt;title<span class="re2">&gt;</span></span><span class="co3">Contest Registration</span><span class="re1">&lt;/title<span class="re2">&gt;</span></span>
      <span class="re1">&lt;instructions<span class="re2">&gt;</span></span><span class="co3">
        Please provide the following information
        to sign up for our special contests!
      </span><span class="re1">&lt;/instructions<span class="re2">&gt;</span></span>
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'hidden'</span> <span class="re0">var</span>=<span class="st0">'FORM_TYPE'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">jabber:iq:register</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span>
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span>
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'text-single'</span> <span class="re0">label</span>=<span class="st0">'Given Name'</span> <span class="re0">var</span>=<span class="st0">'first'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;required</span><span class="re2">/&gt;</span>
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span>
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'text-single'</span> <span class="re0">label</span>=<span class="st0">'Family Name'</span> <span class="re0">var</span>=<span class="st0">'last'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;required</span><span class="re2">/&gt;</span>
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span>
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'text-single'</span> <span class="re0">label</span>=<span class="st0">'Email Address'</span> <span class="re0">var</span>=<span class="st0">'email'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;required</span><span class="re2">/&gt;</span>
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span>
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'list-single'</span> <span class="re0">label</span>=<span class="st0">'Gender'</span> <span class="re0">var</span>=<span class="st0">'x-gender'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;option</span> <span class="re0">label</span>=<span class="st0">'Male'</span><span class="re2">&gt;</span><span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">M</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span><span class="re1">&lt;/option<span class="re2">&gt;</span></span>
        <span class="re1">&lt;option</span> <span class="re0">label</span>=<span class="st0">'Female'</span><span class="re2">&gt;</span><span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">F</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span><span class="re1">&lt;/option<span class="re2">&gt;</span></span>
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span>
    <span class="re1">&lt;/x<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/query<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>然后用户应该(SHOULD)返回表单:
</p><p><b>例子 10. 用户提交注册表单</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'set'</span>
    <span class="re0">from</span>=<span class="st0">'juliet@capulet.com/balcony'</span>
    <span class="re0">to</span>=<span class="st0">'contests.shakespeare.lit'</span>
    <span class="re0">id</span>=<span class="st0">'reg4'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'jabber:iq:register'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;x</span> <span class="re0">xmlns</span>=<span class="st0">'jabber:x:data'</span> <span class="re0">type</span>=<span class="st0">'submit'</span><span class="re2">&gt;</span>
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'hidden'</span> <span class="re0">var</span>=<span class="st0">'FORM_TYPE'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">jabber:iq:register</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span>
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span>
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'text-single'</span> <span class="re0">label</span>=<span class="st0">'Given Name'</span> <span class="re0">var</span>=<span class="st0">'first'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">Juliet</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span>
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span>
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'text-single'</span> <span class="re0">label</span>=<span class="st0">'Family Name'</span> <span class="re0">var</span>=<span class="st0">'last'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">Capulet</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span>
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span>
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'text-single'</span> <span class="re0">label</span>=<span class="st0">'Email Address'</span> <span class="re0">var</span>=<span class="st0">'email'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">juliet@capulet.com</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span>
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span>
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'list-single'</span> <span class="re0">label</span>=<span class="st0">'Gender'</span> <span class="re0">var</span>=<span class="st0">'x-gender'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">F</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span>
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span>
    <span class="re1">&lt;/x<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/query<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<h4> <span class="mw-headline" id=".E6.B3.A8.E5.86.8C.E5.88.B0.E4.B8.80.E4.B8.AA.E6.9C.8D.E5.8A.A1.E5.99.A8">注册到一个服务器</span></h4>
<p>当一个未注册的实体和一个服务器而不是一个服务交互时必须特别注意. 通常, 一个服务器允许带内注册以使实体能够在Jabber网络里面自举"bootstrap"参与; 这个 bootstrapping 发生了一个未注册以及未验证的实体向一个服务器打开一个TCP连接并立刻完成该服务器的注册用例的时候, 然后使用这个全新注册的标识进行验证. 如上所述, 当一个服务器收到一个 IQ-get 用于注册信息, 它应该(SHOULD)假设请求实体是未注册的除非该实体已经验证.
</p><p>取决于本地服务的供应, 如果一个未注册的实体在验证之前尝试太多次数的注册,或者一个实体成功完成注册用例之后尝试注册第二个身份,那么一个服务器可以(MAY)返回一个&lt;not-acceptable/&gt;节错误; 如果未注册的实体在验证之前等待太久或者在成功完成注册用例之后尝试完成一个动作而这个动作不是在做验证, 一个服务器也可以(MAY)返回一个&lt;not-authorized/&gt;流错误.
</p>
<h3> <span class="mw-headline" id=".E5.AE.9E.E4.BD.93.E5.8F.96.E6.B6.88.E7.8E.B0.E5.AD.98.E6.B3.A8.E5.86.8C">实体取消现存注册</span></h3>
<p>'jabber:iq:register'名字空间允许一个实体也能够从一个主机取消一个注册, 通过发送一个包含&lt;remove/&gt;元素的 IQ set. 该主机必须(MUST)根据 IQ get 的 'from' 地址来确定请求实体的身份.
</p><p><b>例子 11. 实体请求注销现存注册</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'set'</span> <span class="re0">from</span>=<span class="st0">'bill@shakespeare.lit/globe'</span> <span class="re0">id</span>=<span class="st0">'unreg1'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'jabber:iq:register'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;remove</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;/query<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p><b>例子 12. 主机通知实体成功注销</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'result'</span> <span class="re0">to</span>=<span class="st0">'bill@shakespeare.lit/globe'</span> <span class="re0">id</span>=<span class="st0">'unreg1'</span><span class="re2">/&gt;</span></pre></div></div>
<p>有两种情形:
</p>
<ol><li> 如果实体从他的"home"服务器取消注册(也就是说,维护它的XMPP帐号的服务器), 那么该实体不应该(SHOULD NOT)包含一个 'from' 或 'to' 地址在移除请求中, 该服务器应该(SHOULD)返回一个&lt;not-authorized/&gt;流错误并且终止该实体所有激活的会话. 该服务器应该(SHOULD)执行的移除操作以其收到移除请求的当前会话或连接的相关的纯JID (&lt;node@domain.tld&gt;)为准. 如果服务器是一个即时消息和出席信息服务期并遵循 <a href="/RFC3921" title="RFC3921">RFC 3921</a> <a href="/XEP-0077#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0077">8</a>, 该服务器也应该(SHOULD)取消所有和该实体相关的现存的出席信息订阅(储存在实体的花名册中).
</li><li> 如果实体从一个服务而不是它的宿主服务器取消注册, 它的宿主服务器必须(MUST)贴一个'from'地址到移除请求中, 这个遵循 <b>XMPP Core</b> 的地址应为该实体的全 JID (&lt;node@domain.tld/resource&gt;). 该服务必须(MUST)基于'from'地址的纯JID (&lt;node@domain.tld&gt;)部分来执行移除操作.
</li></ol>
<p>如下所述, 各种错误可能发生.
</p><p><b>表 1: 注销出错例子</b>
</p>
<table border="1" cellspacing="0">
<tr>
<th>条件 </th>
<th> 描述
</th></tr>
<tr>
<td>&lt;bad-request/&gt;	</td>
<td> &lt;remove/&gt; 元素不只是&lt;query/&gt; 元素的唯一子元素.
</td></tr>
<tr>
<td>&lt;forbidden/&gt;	</td>
<td> 发送者没有足够的权限取消注册.
</td></tr>
<tr>
<td>&lt;not-allowed/&gt;	</td>
<td> 没有发送者被允许在带内取消注册.
</td></tr>
<tr>
<td>&lt;registration-required/&gt;	</td>
<td> 发送移除请求的实体未曾注册.
</td></tr>
<tr>
<td>&lt;unexpected-request/&gt;	</td>
<td> 主机是一个即时消息服务器而 IQ get 不包含一个 'from' 地址, 因为该实体不是注册到该服务器.
</td></tr></table>
<p><b>例子 13. 主机通知客户端注销失败(错误的请求)</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'error'</span> <span class="re0">from</span>=<span class="st0">'shakespeare.lit'</span> <span class="re0">to</span>=<span class="st0">'bill@shakespeare.lit/globe'</span> <span class="re0">id</span>=<span class="st0">'unreg1'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;error</span> <span class="re0">code</span>=<span class="st0">'400'</span> <span class="re0">type</span>=<span class="st0">'modify'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;bad-request</span> <span class="re0">xmlns</span>=<span class="st0">'urn:ietf:params:xml:ns:xmpp-stanzas'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;/error<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p><b>例子 14. 主机通知客户端注销失败(禁止)</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'error'</span> <span class="re0">from</span>=<span class="st0">'shakespeare.lit'</span> <span class="re0">to</span>=<span class="st0">'bill@shakespeare.lit/globe'</span> <span class="re0">id</span>=<span class="st0">'unreg1'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;error</span> <span class="re0">code</span>=<span class="st0">'401'</span> <span class="re0">type</span>=<span class="st0">'cancel'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;forbidden</span> <span class="re0">xmlns</span>=<span class="st0">'urn:ietf:params:xml:ns:xmpp-stanzas'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;/error<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p><b>例子 15. 主机通知客户端注销失败(不允许)</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'error'</span> <span class="re0">from</span>=<span class="st0">'shakespeare.lit'</span> <span class="re0">to</span>=<span class="st0">'bill@shakespeare.lit/globe'</span> <span class="re0">id</span>=<span class="st0">'unreg1'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;error</span> <span class="re0">code</span>=<span class="st0">'405'</span> <span class="re0">type</span>=<span class="st0">'cancel'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;not-allowed</span> <span class="re0">xmlns</span>=<span class="st0">'urn:ietf:params:xml:ns:xmpp-stanzas'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;/error<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>一个给定的布署可以(MAY)选择在取消注册之前要求额外的信息(例如旧密码或以前收集的个人信息). 为了做到这一点, 服务器或服务应该(SHOULD)在错误节里面返回一个数据表单:
</p><p><b>例子16. 服务器在错误信息中返回注销表单</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'error'</span> <span class="re0">from</span>=<span class="st0">'shakespeare.lit'</span> <span class="re0">to</span>=<span class="st0">'bill@shakespeare.lit/globe'</span> <span class="re0">id</span>=<span class="st0">'unreg1'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'jabber:iq:register'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;x</span> <span class="re0">xmlns</span>=<span class="st0">'jabber:x:data'</span> <span class="re0">type</span>=<span class="st0">'form'</span><span class="re2">&gt;</span>
      <span class="re1">&lt;title<span class="re2">&gt;</span></span><span class="co3">Password Change</span><span class="re1">&lt;/title<span class="re2">&gt;</span></span>
      <span class="re1">&lt;instructions<span class="re2">&gt;</span></span><span class="co3">Use this form to cancel your registration.</span><span class="re1">&lt;/instructions<span class="re2">&gt;</span></span>
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'hidden'</span> <span class="re0">var</span>=<span class="st0">'FORM_TYPE'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">jabber:iq:register:cancel</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span>
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span>
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'text-single'</span> <span class="re0">label</span>=<span class="st0">'Username'</span> <span class="re0">var</span>=<span class="st0">'username'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;required</span><span class="re2">/&gt;</span>
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span>
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'text-private'</span> <span class="re0">label</span>=<span class="st0">'Password'</span> <span class="re0">var</span>=<span class="st0">'password'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;required</span><span class="re2">/&gt;</span>
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span>
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'text-single'</span> <span class="re0">label</span>=<span class="st0">'Mother&amp;apos;s Maiden Name'</span> <span class="re0">var</span>=<span class="st0">'x-mmn'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;required</span><span class="re2">/&gt;</span>
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span>
    <span class="re1">&lt;/x<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/query<span class="re2">&gt;</span></span>
  <span class="re1">&lt;error</span> <span class="re0">code</span>=<span class="st0">'405'</span> <span class="re0">type</span>=<span class="st0">'cancel'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;not-allowed</span> <span class="re0">xmlns</span>=<span class="st0">'urn:ietf:params:xml:ns:xmpp-stanzas'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;/error<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>然后用户应该(SHOULD)返回表单:
</p><p><b>例子 17. 用户返回注销表单</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'set'</span> <span class="re0">from</span>=<span class="st0">'bill@shakespeare.lit/globe'</span> <span class="re0">to</span>=<span class="st0">'shakespeare.lit'</span> <span class="re0">id</span>=<span class="st0">'unreg2'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'jabber:iq:register'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;x</span> <span class="re0">xmlns</span>=<span class="st0">'jabber:x:data'</span> <span class="re0">type</span>=<span class="st0">'submit'</span><span class="re2">&gt;</span>
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'hidden'</span> <span class="re0">var</span>=<span class="st0">'FORM_TYPE'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">jabber:iq:register:cancel</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span>
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span>
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'text-single'</span> <span class="re0">var</span>=<span class="st0">'username'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">bill@shakespeare.lit</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span>
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span>
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'text-private'</span> <span class="re0">var</span>=<span class="st0">'password'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">theglobe</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span>
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span>
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'text-single'</span> <span class="re0">var</span>=<span class="st0">'x-mmn'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">Throckmorton</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span>
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span>
    <span class="re1">&lt;/x<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/query<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<h3> <span class="mw-headline" id=".E7.94.A8.E6.88.B7.E5.8F.98.E6.9B.B4.E5.AF.86.E7.A0.81">用户变更密码</span></h3>
<p>'jabber:iq:register'名字空间允许用户从一个服务器或服务变更其密码. 一旦注册了之后, 该用户可以通过发送一个以下格式的XML节来变更密码:
</p><p><b>例子 18. 密码变更</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'set'</span> <span class="re0">to</span>=<span class="st0">'shakespeare.lit'</span> <span class="re0">id</span>=<span class="st0">'change1'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'jabber:iq:register'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;username<span class="re2">&gt;</span></span><span class="co3">bill</span><span class="re1">&lt;/username<span class="re2">&gt;</span></span>
    <span class="re1">&lt;password<span class="re2">&gt;</span></span><span class="co3">newpass</span><span class="re1">&lt;/password<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/query<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>因为密码变更请求包含了一个纯文本的密码, 一个客户端不应该(SHOULD NOT)发送这样一个请求除非所在的流是加密的(使用 SSL 或 TLS) 并且客户端已经确保该服务器的证书是由一个可信任的机构验证的. 一个给定的布署可以(MAY)选择禁止密码变更, 如果流不是加密的, 禁止带内密码变更或在变更密码之前要求额外的信息(类似旧密码或者以前收集的个人信息).
</p><p>如果用户提供一个空的密码元素或一个不包含XML字符数据的密码元素(也就是说, &lt;password/&gt; 或&lt;password&gt;&lt;/password&gt;), 服务器或服务不能(MUST NOT)变更密码到一个空值, 而必须(MUST)维持现有的密码.
</p><p><b>例子 19. 主机通知客户端成功变更密码</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'result'</span> <span class="re0">id</span>=<span class="st0">'change1'</span><span class="re2">/&gt;</span></pre></div></div>
<p>可能发生的一些错误:
</p><p><b>表 2: 密码变更出错例子</b>
</p>
<table border="1" cellspacing="0">
<tr>
<th>条件	</th>
<th> 描述
</th></tr>
<tr>
<td>&lt;bad-request/&gt;	</td>
<td> 密码变更请求未包含完整的信息(例如, 服务要求包含&lt;username/&gt;元素).
</td></tr>
<tr>
<td>&lt;not-authorized/&gt;	</td>
<td> 服务器或服务不能确定通道对于密码变更足够安全.
</td></tr>
<tr>
<td>&lt;not-allowed/&gt;	</td>
<td> 服务器或服务部允许密码变更.
</td></tr>
<tr>
<td>&lt;unexpected-request/&gt;	</td>
<td> 主机是一个即时消息服务器并且 IQ set 不包含一个'from'地址,因为该实体未曾注册到这台服务器.
</td></tr></table>
<p>服务器或服务在返回的IQ错误节中不应该(SHOULD NOT)包含和密码变更相关的原始的XML.
</p><p><b>例子 20. 主机通知客户端密码变更失败(错误的请求)</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'error'</span> <span class="re0">from</span>=<span class="st0">'shakespeare.lit'</span> <span class="re0">to</span>=<span class="st0">'bill@shakespeare.lit/globe'</span> <span class="re0">id</span>=<span class="st0">'change1'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;error</span> <span class="re0">code</span>=<span class="st0">'400'</span> <span class="re0">type</span>=<span class="st0">'modify'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;bad-request</span> <span class="re0">xmlns</span>=<span class="st0">'urn:ietf:params:xml:ns:xmpp-stanzas'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;/error<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p><b>例子 21. 主机通知客户端密码变更失败(未授权)</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'error'</span> <span class="re0">from</span>=<span class="st0">'shakespeare.lit'</span> <span class="re0">to</span>=<span class="st0">'bill@shakespeare.lit/globe'</span> <span class="re0">id</span>=<span class="st0">'change1'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;error</span> <span class="re0">code</span>=<span class="st0">'401'</span> <span class="re0">type</span>=<span class="st0">'cancel'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;not-authorized</span> <span class="re0">xmlns</span>=<span class="st0">'urn:ietf:params:xml:ns:xmpp-stanzas'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;/error<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p><b>例子 22. 主机通知客户端密码变更失败(不允许)</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'error'</span> <span class="re0">from</span>=<span class="st0">'shakespeare.lit'</span> <span class="re0">to</span>=<span class="st0">'bill@shakespeare.lit/globe'</span> <span class="re0">id</span>=<span class="st0">'change1'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;error</span> <span class="re0">code</span>=<span class="st0">'405'</span> <span class="re0">type</span>=<span class="st0">'cancel'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;not-allowed</span> <span class="re0">xmlns</span>=<span class="st0">'urn:ietf:params:xml:ns:xmpp-stanzas'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;/error<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>为了在变更密码之前要求额外的信息, 服务器或服务应该(SHOULD)在错误节中返回一个数据表单:
</p><p><b>例子 23. 服务器在错误中返回密码变更表单</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'error'</span> <span class="re0">from</span>=<span class="st0">'shakespeare.lit'</span> <span class="re0">to</span>=<span class="st0">'bill@shakespeare.lit/globe'</span> <span class="re0">id</span>=<span class="st0">'change1'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'jabber:iq:register'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;x</span> <span class="re0">xmlns</span>=<span class="st0">'jabber:x:data'</span> <span class="re0">type</span>=<span class="st0">'form'</span><span class="re2">&gt;</span>
      <span class="re1">&lt;title<span class="re2">&gt;</span></span><span class="co3">Password Change</span><span class="re1">&lt;/title<span class="re2">&gt;</span></span>
      <span class="re1">&lt;instructions<span class="re2">&gt;</span></span><span class="co3">Use this form to change your password.</span><span class="re1">&lt;/instructions<span class="re2">&gt;</span></span>
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'hidden'</span> <span class="re0">var</span>=<span class="st0">'FORM_TYPE'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">jabber:iq:register:changepassword</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span>
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span>
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'text-single'</span> <span class="re0">label</span>=<span class="st0">'Username'</span> <span class="re0">var</span>=<span class="st0">'username'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;required</span><span class="re2">/&gt;</span>
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span>
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'text-private'</span> <span class="re0">label</span>=<span class="st0">'Old Password'</span> <span class="re0">var</span>=<span class="st0">'old_password'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;required</span><span class="re2">/&gt;</span>
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span>
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'text-private'</span> <span class="re0">label</span>=<span class="st0">'New Password'</span> <span class="re0">var</span>=<span class="st0">'password'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;required</span><span class="re2">/&gt;</span>
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span>
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'text-single'</span> <span class="re0">label</span>=<span class="st0">'Mother&amp;apos;s Maiden Name'</span> <span class="re0">var</span>=<span class="st0">'x-mmn'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;required</span><span class="re2">/&gt;</span>
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span>
    <span class="re1">&lt;/x<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/query<span class="re2">&gt;</span></span>
  <span class="re1">&lt;error</span> <span class="re0">code</span>=<span class="st0">'405'</span> <span class="re0">type</span>=<span class="st0">'cancel'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;not-allowed</span> <span class="re0">xmlns</span>=<span class="st0">'urn:ietf:params:xml:ns:xmpp-stanzas'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;/error<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>用户应该(SHOULD)返回表单:
</p><p><b>例子 24. 用户返回密码变更表单</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'set'</span> <span class="re0">from</span>=<span class="st0">'bill@shakespeare.lit/globe'</span> <span class="re0">to</span>=<span class="st0">'shakespeare.lit'</span> <span class="re0">id</span>=<span class="st0">'change2'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'jabber:iq:register'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;x</span> <span class="re0">xmlns</span>=<span class="st0">'jabber:x:data'</span> <span class="re0">type</span>=<span class="st0">'submit'</span><span class="re2">&gt;</span>
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'hidden'</span> <span class="re0">var</span>=<span class="st0">'FORM_TYPE'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">jabber:iq:register:changepassword</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span>
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span>
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'text-single'</span> <span class="re0">var</span>=<span class="st0">'username'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">bill@shakespeare.lit</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span>
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span>
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'text-private'</span> <span class="re0">var</span>=<span class="st0">'old_password'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">theglobe</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span>
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span>
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'text-private'</span> <span class="re0">var</span>=<span class="st0">'password'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">groundlings</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span>
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span>
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'text-single'</span> <span class="re0">var</span>=<span class="st0">'x-mmn'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">Throckmorton</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span>
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span>
    <span class="re1">&lt;/x<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/query<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<h2> <span class="mw-headline" id=".E5.8F.AF.E6.89.A9.E5.B1.95.E6.80.A7">可扩展性</span></h2>
<p>为 'jabber:iq:register' 名字空间定义的字段严格受限于那个schema. 如果一个主机需要收集额外的信息, <b>XEP-0004: Data Forms</b> ("x:data") 应该(SHOULD)遵循以下规则:
</p>
<ol><li> 一个主机不能(MUST NOT)增加新的字段给 'jabber:iq:register' 名字空间; 而是, 可扩展性应该(SHOULD)通过这里指定的数据表单协议来达到.
</li><li> x:data 表单将作为一个子元素被包含在 &lt;query xmlns='jabber:iq:register'/&gt; 元素中(它不能是一个 &lt;iq/&gt; 节的子元素 并且遵守 <a href="/RFC3920" title="RFC3920">RFC 3920</a> <a href="/XEP-0077#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0077">9</a> 的 9.2.3 章节).
</li><li> x:data 表单应该(SHOULD)包含 x:data 字段以对应所有 iq:register 字段 (例如, 用户名和密码).
</li><li> x:data 表单应该(SHOULD)使用一个隐含的 FORM_TYPE 字段用于表单的字段标准化, 如 <a rel="nofollow" class="external text" href="http://xmpp.org/extensions/xep-0068.html">数据表单的字段标准化</a> <a href="/XEP-0077#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0077">10</a>章节所定义的那样.
</li><li> x:data 表单将优先处理 iq:register 字段; 如果提交的实体支持 <b>数据表单</b> 协议, 它应该(SHOULD)提交这个数据表单而不是预定义的 'jabber:iq:register' 字段, 并且不能(MUST NOT)同时提交数据表单和预定义字段(见本文的 <a href="/XEP-0077#.E4.BC.98.E5.85.88.E6.AC.A1.E5.BA.8F" title="XEP-0077">优先次序</a> 章节).
</li></ol>
<p>通过 <b>数据表单</b> 对扩展性的支持是推荐的(RECOMMENDED), 但不是兼容本文所必需的.
</p>
<h2> <span class="mw-headline" id=".E9.87.8D.E5.AE.9A.E5.90.91">重定向</span></h2>
<p>一个给定的部署可能(MAY)希望重定向用户到另一个媒介(例如web网站) 去注册, 而不是允许带内注册. 推荐的方法是只包含一个 &lt;instructions/&gt; 元素而不是必需的字段或数据表单到 IQ result, 也就是一个采用 <a rel="nofollow" class="external text" href="http://xmpp.org/extensions/xep-0066.html">带外数据</a> <a href="/XEP-0077#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0077">11</a>编码的URL(详见下文的 <a href="/XEP-0077#.E4.BC.98.E5.85.88.E6.AC.A1.E5.BA.8F" title="XEP-0077">优先次序</a> 章节).
</p><p><b>例子 25. 主机重定向实体到web注册</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'result'</span>
    <span class="re0">from</span>=<span class="st0">'contests.shakespeare.lit'</span>
    <span class="re0">to</span>=<span class="st0">'juliet@capulet.com/balcony'</span>
    <span class="re0">id</span>=<span class="st0">'reg3'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'jabber:iq:register'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;instructions<span class="re2">&gt;</span></span><span class="co3">
      To register, visit http://www.shakespeare.lit/contests.php
    </span><span class="re1">&lt;/instructions<span class="re2">&gt;</span></span>
    <span class="re1">&lt;x</span> <span class="re0">xmlns</span>=<span class="st0">'jabber:x:oob'</span><span class="re2">&gt;</span>
      <span class="re1">&lt;url<span class="re2">&gt;</span></span><span class="co3">http://www.shakespeare.lit/contests.php</span><span class="re1">&lt;/url<span class="re2">&gt;</span></span>
    <span class="re1">&lt;/x<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/query<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<h2> <span class="mw-headline" id=".E4.BC.98.E5.85.88.E6.AC.A1.E5.BA.8F">优先次序</span></h2>
<p>基于前述的讨论, 可见一个实体从一个服务对其请求信息的应答所接收的可以是 iq:register, x:data, 以及 x:oob 名字空间的任意组合. 其优先次序如下:
</p>
<ol><li> x:data
</li><li> iq:register
</li><li> x:oob
</li></ol>
<p>(自然, 如果接收的应用不理解任何前述的名字空间, 它必须(MUST)忽略被这些名字空间所限定的数据.)
</p><p>从而一个主机有可能返回任何以下的组合, 在哪种情况下提交的应用必须(MUST)进行下表定义的操作(假设"iq:register fields" 表示 instructions 加 字段, 而 "iq:register instructions" 只表示 &lt;instructions/&gt; 元素):
</p><p><b>表 3: 推荐的名字空间组合的处理</b>
</p>
<table border="1" cellspacing="0">
<tr>
<th>包含的数据 </th>
<th> 推荐的处理 </th>
<th> 备注
</th></tr>
<tr>
<td>iq:register fields </td>
<td> 提交完整的 iq:register 字段. </td>
<td> 这是通用的处理模式用于"遗留"服务和客户端.
</td></tr>
<tr>
<td>x:data form + iq:register fields </td>
<td> 如果理解, 提交完整的 x:data 表单, 否则提交完整的 iq:register 字段; 无论如何, 一个应用不能(MUST NOT)同时提交两者. </td>
<td>	iq:register 字段将被用于"遗留"客户端; 如果 x:data 表单包含必需的字段(例如, 一个public key)并且这字段不同于已定义的 iq:register 字段, 这个组合不应该被(SHOULD NOT)使用, 而应该(SHOULD)使用下一个组合.
</td></tr>
<tr>
<td>x:data form + iq:register instructions </td>
<td>如果理解, 提交完整的 x:data 表单, 否则展示 iq:register instructions 给用户. </td>
<td>	如果 x:data 表单包含必需的字段(例如 一个 public key)而这字段不同于已定义的 iq:register 字段并且没有替代的URL可用, 这个组合应该(SHOULD)使用.
</td></tr>
<tr>
<td>x:data form + x:oob URL </td>
<td> 如果理解,提交完整的 x:data 表单, 否则提供替代的URL给用户 . </td>
<td> 本组合可以(MAY)由一个主机返回, 但是一个主机应该(SHOULD)返回下一个组合以支持全范围的遗留客户端.
</td></tr>
<tr>
<td>x:data form + iq:register instructions + x:oob URL </td>
<td> 如果理解,提交完整的 x:data 表单, 否则展示 iq:register instructions 并提供替代的URL给用户. </td>
<td> 如果 x:data 表单包含必需的字段(例如, 一个 public key)而这个字段不同于已定义的 iq:register 字段并且没有替代的URL可用, 本组合应该(SHOULD)使用.
</td></tr>
<tr>
<td>iq:register instructions + x:oob URL </td>
<td> 展示 iq:register instructions 和提供的重定向URL. </td>
<td>本组合可以(MAY)由一个希望重定向注册到一个URL的主机返回.
</td></tr>
<tr>
<td>iq:register fields + x:oob URL </td>
<td> 提交完整的 iq:register 字段但是可选的展示替代的URL. </td>
<td> 本组合不推荐(NOT RECOMMENDED).
</td></tr></table>
<h2> <span class="mw-headline" id="Key.E5.85.83.E7.B4.A0">Key元素</span></h2>
<p>这个元素已过时了, 但是纪录下来以保持历史的完整性.
</p><p>&lt;key/&gt;元素是在建立 IQ 交互时用的一个 "transaction key" , 为了验证发送者的身份. 典型的, 它被用于进行带内注册时的服务器 (但通常不是服务), 因为通常一个用户在注册之前还没有一个'from'地址. 流程如下:
</p>
<ol><li> 客户端发送 IQ-get 请求给服务器.
</li><li> 服务器返回必需的元素给客户端, 包含 &lt;key/&gt; 元素,其值为一个随机的字符串 (经常是一个 SHA-1 哈希值).
</li><li> 客户端发送注册信息给服务器, 其中包含 &lt;key/&gt; 元素, 其值和服务器提供的一致.
</li><li> 服务器检查 key 信息并且处理注册请求; 如果没有 key 或 key 值和提供的transaction key值不一致, 服务器返回一个错误.
</li></ol>
<p>&lt;key/&gt;元素也被用于注册取消过程中.
</p>
<h2> <span class="mw-headline" id=".E6.B5.81.E7.89.B9.E6.80.A7">流特性</span></h2>
<p><b><a class="external mw-magiclink-rfc" href="//tools.ietf.org/html/rfc3920">RFC 3920</a></b> 定义了流协商时声明支持的特性的方法. 为了追求效率, 它可能期望一个服务器把支持带内注册作为一个流特性来声明. 用于汇报支持的&lt;stream:features/&gt;名字空间是"<a rel="nofollow" class="external free" href="http://jabber.org/features/iq-register">http://jabber.org/features/iq-register</a>". 在接收一个由'jabber:client'名字空间限定的流头信息之后, 一个服务器返回一个流头信息给该客户端, 并且可以(MAY)声明对带内注册的支持(即包含有关的流特性):
</p><p><b>例子 26. 声明注册为一个流特性</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;?xml</span> <span class="re0">version</span>=<span class="st0">'1.0'</span> <span class="re0">encoding</span>=<span class="st0">'utf-8'</span><span class="re2">?&gt;</span>
<span class="re1">&lt;stream:stream</span> <span class="re0">xmlns:stream</span>=<span class="st0">'http://etherx.jabber.org/streams/'</span>
    <span class="re0">xmlns</span>=<span class="st0">'jabber:client'</span>
    <span class="re0">from</span>=<span class="st0">'somedomain'</span>
    <span class="re0">version</span>=<span class="st0">'1.0'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;stream:features<span class="re2">&gt;</span></span><span class="co3">
    ...
    </span><span class="re1">&lt;register</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/features/iq-register'</span><span class="re2">/&gt;</span><span class="co3">
    ...
  </span><span class="re1">&lt;/stream:features<span class="re2">&gt;</span></span></pre></div></div>
<p>一个服务器不应该(SHOULD NOT)向另一个服务器(也就是说, 如果初始化流头信息是由'jabber:server'名字空间限定的)声明带内注册.
</p>
<h2> <span class="mw-headline" id=".E9.94.99.E8.AF.AF.E5.A4.84.E7.90.86">错误处理</span></h2>
<p>如此处所定义的, 'jabber:iq:register'名字空间同时支持老的 (HTTP-style) 错误码和定义在 XMPP Core 中的可扩展的错误级别及条件. 一个兼容的服务器或服务实现必须(MUST)同时支持老格式和新格式的错误处理. 一个兼容的客户端实现应该(SHOULD)支持两者. 关于 HTTP-style 错误对应XMPP-style 条件的映射表, 参考 <a rel="nofollow" class="external text" href="http://xmpp.org/extensions/xep-0086.html">错误条件映射</a> <a href="/XEP-0077#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0077">12</a>.
</p>
<h2> <span class="mw-headline" id=".E5.AE.89.E5.85.A8.E4.BA.8B.E9.A1.B9">安全事项</span></h2>
<p>带内注册经常不包含在其他消息协议中(例如, SMTP不包含一个方法用于向一个email服务器注册), 经常是因为安全的原因. 这里定义的注册方法据知是不安全的并且不应该(SHOULD NOT)使用, 除非注册方和接受注册的实体之间的通道是安全的. 因为这些原因, 带内注册的布署是一个策略问题并且一个给定的布署可以(MAY)选择禁止带内注册和密码变更. 此外, 一旦一个成功的协议被定义和实现, 本文应该立刻过时.
</p>
<h2> <span class="mw-headline" id="IANA.E4.BA.8B.E9.A1.B9">IANA事项</span></h2>
<p>本文档与<a rel="nofollow" class="external text" href="http://www.iana.org/">互联网编号分配授权机构</a> <a href="/XEP-0077#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0077">13</a>无关。
</p>
<h2> <span class="mw-headline" id="XMPP.E6.B3.A8.E5.86.8C.E4.BA.8B.E9.A1.B9">XMPP注册事项</span></h2>
<h3> <span class="mw-headline" id=".E5.8D.8F.E8.AE.AE.E5.90.8D.E5.AD.97.E7.A9.BA.E9.97.B4">协议名字空间</span></h3>
<p>XMPP注册员<a rel="nofollow" class="external text" href="http://www.xmpp.org/registrar/">XMPP Registrar</a> <a href="/XEP-0077#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0077">14</a>在它的协议名字空间注册项中包含了 'jabber:iq:register' 名字空间.
</p>
<h3> <span class="mw-headline" id=".E6.B5.81.E7.89.B9.E6.80.A7_2">流特性</span></h3>
<p>XMPP注册员 <a rel="nofollow" class="external text" href="http://www.xmpp.org/registrar/">XMPP Registrar</a>在它的流特性名字空间的注册项中包括了'<a rel="nofollow" class="external free" href="http://jabber.org/features/iq-register'">http://jabber.org/features/iq-register'</a> 名字空间.
</p>
<h3> <span class="mw-headline" id="URI.E6.9F.A5.E8.AF.A2.E7.B1.BB.E5.9E.8B">URI查询类型</span></h3>
<p>作为由<a rel="nofollow" class="external text" href="http://www.xmpp.org/extensions/xep-0147.html">XMPP URI Query Components</a> <a href="/XEP-0077#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0077">15</a>授权的机构, XMPP登记处维护着一个用于 XMPP URIs 的查询和键-值对的注册项（见&lt;<a rel="nofollow" class="external free" href="http://www.xmpp.org/registrar/querytypes.html">http://www.xmpp.org/registrar/querytypes.html</a>&gt;）。
</p><p>如下所述, 已注册的用于注册管理的查询类型为 "register" 和 "unregister".
</p>
<h4> <span class="mw-headline" id="register">register</span></h4>
<p>"jabber:iq:register"名字空间包含了一个新建注册的机制. 完成这项工作的已注册的查询类型为"register".
</p><p><b>例子 27. 注册动作: IRI/URI</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="co3">xmpp:marlowe.shakespeare.lit?register</span></pre></div></div>
<p>因为注册是一个两步的过程, 应用程序必须(MUST)接着发送一个 IQ-get 给实体让其接收必需的注册字段:
</p><p><b>例子 28. 接收注册字段</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">to</span>=<span class="st0">'marlowe.shakespeare.lit'</span> <span class="re0">type</span>=<span class="st0">'get'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'jabber:iq:register'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p><b>例子 29. 接收注册字段</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">from</span>=<span class="st0">'marlowe.shakespeare.lit'</span> <span class="re0">type</span>=<span class="st0">'result'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'jabber:iq:register'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;username</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;password</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;/query<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>应用程序必须(MUST)接着展示一个适当的界面使用户能够完成注册表单. 一旦用户提供了信息, 应用程序必须(MUST)发送一个 IQ-set 给实体.
</p><p><b>例子 30. 发送注册信息</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">to</span>=<span class="st0">'marlowe.shakespeare.lit'</span> <span class="re0">type</span>=<span class="st0">'set'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'jabber:iq:register'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;username<span class="re2">&gt;</span></span><span class="co3">juliet</span><span class="re1">&lt;/username<span class="re2">&gt;</span></span>
    <span class="re1">&lt;password<span class="re2">&gt;</span></span><span class="co3">R0m30</span><span class="re1">&lt;/password<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/query<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>以下提交注册了 "register" 查询类型.
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;querytype<span class="re2">&gt;</span></span>
  <span class="re1">&lt;name<span class="re2">&gt;</span></span><span class="co3">register</span><span class="re1">&lt;/name<span class="re2">&gt;</span></span>
  <span class="re1">&lt;proto<span class="re2">&gt;</span></span><span class="co3">jabber:iq:register</span><span class="re1">&lt;/proto<span class="re2">&gt;</span></span>
  <span class="re1">&lt;desc<span class="re2">&gt;</span></span><span class="co3">enables registering with a server or service</span><span class="re1">&lt;/desc<span class="re2">&gt;</span></span>
  <span class="re1">&lt;doc<span class="re2">&gt;</span></span><span class="co3">XEP-0077</span><span class="re1">&lt;/doc<span class="re2">&gt;</span></span>
<span class="re1">&lt;/querytype<span class="re2">&gt;</span></span></pre></div></div>
<h4> <span class="mw-headline" id="unregister">unregister</span></h4>
<p>'jabber:iq:register'名字空间包含了一个取消现有注册的机制. 完成这个工作的已注册的查询类型为"unregister".
</p><p><b>例子 31. 取消注册动作: IRI/URI</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="co3">xmpp:marlowe.shakespeare.lit?unregister</span></pre></div></div>
<p><b>例子 32. 取消注册动作: 结果节</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">to</span>=<span class="st0">'marlowe.shakespeare.lit'</span> <span class="re0">type</span>=<span class="st0">'get'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'jabber:iq:register'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;remove</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;/query<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>以下提交注册了"unregister"查询类型.
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;querytype<span class="re2">&gt;</span></span>
  <span class="re1">&lt;name<span class="re2">&gt;</span></span><span class="co3">unregister</span><span class="re1">&lt;/name<span class="re2">&gt;</span></span>
  <span class="re1">&lt;proto<span class="re2">&gt;</span></span><span class="co3">jabber:iq:register</span><span class="re1">&lt;/proto<span class="re2">&gt;</span></span>
  <span class="re1">&lt;desc<span class="re2">&gt;</span></span><span class="co3">enables cancellation of a registration with a server or service</span><span class="re1">&lt;/desc<span class="re2">&gt;</span></span>
  <span class="re1">&lt;doc<span class="re2">&gt;</span></span><span class="co3">XEP-0077</span><span class="re1">&lt;/doc<span class="re2">&gt;</span></span>
<span class="re1">&lt;/querytype<span class="re2">&gt;</span></span></pre></div></div>
<h3> <span class="mw-headline" id=".E5.AD.97.E6.AE.B5.E6.A0.87.E5.87.86.E5.8C.96">字段标准化</span></h3>
<p>对于每个和 'jabber:iq:register' 名字空间有关的主要用例的字段标准化,有一个 FORM_TYPE 以及相关的字段类型和字段名称: 注册, 取消注册, 变更密码. 这些 FORM_TYPES 的初始提交如下(另外的字段可以由将来的提交提供).
</p>
<h4> <span class="mw-headline" id=".E6.B3.A8.E5.86.8C">注册</span></h4>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;form_type<span class="re2">&gt;</span></span>
  <span class="re1">&lt;name<span class="re2">&gt;</span></span><span class="co3">jabber:iq:register</span><span class="re1">&lt;/name<span class="re2">&gt;</span></span>
  <span class="re1">&lt;doc<span class="re2">&gt;</span></span><span class="co3">XEP-0077</span><span class="re1">&lt;/doc<span class="re2">&gt;</span></span>
  <span class="re1">&lt;desc<span class="re2">&gt;</span></span><span class="co3">Standardization of fields related to registration use case.</span><span class="re1">&lt;/desc<span class="re2">&gt;</span></span>
  <span class="re1">&lt;field</span>
      <span class="re0">var</span>=<span class="st0">'username'</span>
      <span class="re0">type</span>=<span class="st0">'text-single'</span>
      <span class="re0">label</span>=<span class="st0">'Account name associated with the user'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;field</span>
      <span class="re0">var</span>=<span class="st0">'nick'</span>
      <span class="re0">type</span>=<span class="st0">'text-single'</span>
      <span class="re0">label</span>=<span class="st0">'Familiar name of the user'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;field</span>
      <span class="re0">var</span>=<span class="st0">'password'</span>
      <span class="re0">type</span>=<span class="st0">'text-private'</span>
      <span class="re0">label</span>=<span class="st0">'Password or secret for the user'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;field</span>
      <span class="re0">var</span>=<span class="st0">'name'</span>
      <span class="re0">type</span>=<span class="st0">'text-single'</span>
      <span class="re0">label</span>=<span class="st0">'Full name of the user'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;field</span>
      <span class="re0">var</span>=<span class="st0">'first'</span>
      <span class="re0">type</span>=<span class="st0">'text-single'</span>
      <span class="re0">label</span>=<span class="st0">'First name or given name of the user'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;field</span>
      <span class="re0">var</span>=<span class="st0">'last'</span>
      <span class="re0">type</span>=<span class="st0">'text-single'</span>
      <span class="re0">label</span>=<span class="st0">'Last name, surname, or family name of the user'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;field</span>
      <span class="re0">var</span>=<span class="st0">'email'</span>
      <span class="re0">type</span>=<span class="st0">'text-single'</span>
      <span class="re0">label</span>=<span class="st0">'Email address of the user'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;field</span>
      <span class="re0">var</span>=<span class="st0">'address'</span>
      <span class="re0">type</span>=<span class="st0">'text-single'</span>
      <span class="re0">label</span>=<span class="st0">'Street portion of a physical or mailing address'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;field</span>
      <span class="re0">var</span>=<span class="st0">'city'</span>
      <span class="re0">type</span>=<span class="st0">'text-single'</span>
      <span class="re0">label</span>=<span class="st0">'Locality portion of a physical or mailing address'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;field</span>
      <span class="re0">var</span>=<span class="st0">'state'</span>
      <span class="re0">type</span>=<span class="st0">'text-single'</span>
      <span class="re0">label</span>=<span class="st0">'Region portion of a physical or mailing address'</span><span class="re2">/&gt;</span>
 <span class="re1">&lt;field</span>
      <span class="re0">var</span>=<span class="st0">'zip'</span>
      <span class="re0">type</span>=<span class="st0">'text-single'</span>
      <span class="re0">label</span>=<span class="st0">'Postal code portion of a physical or mailing address'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;field</span>
      <span class="re0">var</span>=<span class="st0">'phone'</span>
      <span class="re0">type</span>=<span class="st0">'text-single'</span>
      <span class="re0">label</span>=<span class="st0">'Telephone number of the user'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;field</span>
      <span class="re0">var</span>=<span class="st0">'url'</span>
      <span class="re0">type</span>=<span class="st0">'text-single'</span>
      <span class="re0">label</span>=<span class="st0">'URL to web page describing the user'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;field</span>
      <span class="re0">var</span>=<span class="st0">'date'</span>
      <span class="re0">type</span>=<span class="st0">'text-single'</span>
      <span class="re0">label</span>=<span class="st0">'Some date (e.g., birth date, hire date, sign-up date)'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;field</span>
      <span class="re0">var</span>=<span class="st0">'misc'</span>
      <span class="re0">type</span>=<span class="st0">'text-single'</span>
      <span class="re0">label</span>=<span class="st0">'Free-form text field (obsolete)'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;field</span>
      <span class="re0">var</span>=<span class="st0">'text'</span>
      <span class="re0">type</span>=<span class="st0">'text-single'</span>
      <span class="re0">label</span>=<span class="st0">'Free-form text field (obsolete)'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;field</span>
      <span class="re0">var</span>=<span class="st0">'key'</span>
      <span class="re0">type</span>=<span class="st0">'text-single'</span>
      <span class="re0">label</span>=<span class="st0">'Session key for transaction (obsolete)'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/form_type<span class="re2">&gt;</span></span></pre></div></div>
<h4> <span class="mw-headline" id=".E6.B3.A8.E9.94.80">注销</span></h4>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;form_type<span class="re2">&gt;</span></span>
  <span class="re1">&lt;name<span class="re2">&gt;</span></span><span class="co3">jabber:iq:register:cancel</span><span class="re1">&lt;/name<span class="re2">&gt;</span></span>
  <span class="re1">&lt;doc<span class="re2">&gt;</span></span><span class="co3">XEP-0077</span><span class="re1">&lt;/doc<span class="re2">&gt;</span></span>
  <span class="re1">&lt;desc<span class="re2">&gt;</span></span><span class="co3">Standardization of fields related to cancellation use case.</span><span class="re1">&lt;/desc<span class="re2">&gt;</span></span>
  <span class="re1">&lt;field</span>
      <span class="re0">var</span>=<span class="st0">'password'</span>
      <span class="re0">type</span>=<span class="st0">'text-private'</span>
      <span class="re0">label</span>=<span class="st0">'Password or secret for the user'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;field</span>
      <span class="re0">var</span>=<span class="st0">'username'</span>
      <span class="re0">type</span>=<span class="st0">'text-single'</span>
      <span class="re0">label</span>=<span class="st0">'Account name associated with the user'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/form_type<span class="re2">&gt;</span></span></pre></div></div>
<h4> <span class="mw-headline" id=".E5.8F.98.E6.9B.B4.E5.AF.86.E7.A0.81">变更密码</span></h4>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;form_type<span class="re2">&gt;</span></span>
  <span class="re1">&lt;name<span class="re2">&gt;</span></span><span class="co3">jabber:iq:register:changepassword</span><span class="re1">&lt;/name<span class="re2">&gt;</span></span>
  <span class="re1">&lt;doc<span class="re2">&gt;</span></span><span class="co3">XEP-0077</span><span class="re1">&lt;/doc<span class="re2">&gt;</span></span>
  <span class="re1">&lt;desc<span class="re2">&gt;</span></span><span class="co3">Standardization of fields related to change password use case.</span><span class="re1">&lt;/desc<span class="re2">&gt;</span></span>
  <span class="re1">&lt;field</span>
      <span class="re0">var</span>=<span class="st0">'old_password'</span>
      <span class="re0">type</span>=<span class="st0">'text-private'</span>
      <span class="re0">label</span>=<span class="st0">'Old password for the user'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;field</span>
      <span class="re0">var</span>=<span class="st0">'password'</span>
      <span class="re0">type</span>=<span class="st0">'text-private'</span>
      <span class="re0">label</span>=<span class="st0">'Desired password for the user'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;field</span>
      <span class="re0">var</span>=<span class="st0">'username'</span>
      <span class="re0">type</span>=<span class="st0">'text-single'</span>
      <span class="re0">label</span>=<span class="st0">'Account name associated with the user'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/form_type<span class="re2">&gt;</span></span></pre></div></div>
<h2> <span class="mw-headline" id="XML.E6.9E.B6.E6.9E.84">XML架构</span></h2>
<h3> <span class="mw-headline" id="jabber:iq:register">jabber:iq:register</span></h3>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;?xml</span> <span class="re0">version</span>=<span class="st0">'1.0'</span> <span class="re0">encoding</span>=<span class="st0">'UTF-8'</span><span class="re2">?&gt;</span>
&#160;
<span class="re1">&lt;xs:schema</span>
    <span class="re0">xmlns:xs</span>=<span class="st0">'http://www.w3.org/2001/XMLSchema'</span>
    <span class="re0">targetNamespace</span>=<span class="st0">'jabber:iq:register'</span>
    <span class="re0">xmlns</span>=<span class="st0">'jabber:iq:register'</span>
    <span class="re0">elementFormDefault</span>=<span class="st0">'qualified'</span><span class="re2">&gt;</span>
&#160;
  <span class="re1">&lt;xs:import</span> 
      <span class="re0">namespace</span>=<span class="st0">'jabber:x:data'</span>
      <span class="re0">schemaLocation</span>=<span class="st0">'http://www.xmpp.org/schemas/x-data.xsd'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;xs:import</span> 
      <span class="re0">namespace</span>=<span class="st0">'jabber:x:oob'</span>
      <span class="re0">schemaLocation</span>=<span class="st0">'http://www.xmpp.org/schemas/x-oob.xsd'</span><span class="re2">/&gt;</span>
&#160;
  <span class="re1">&lt;xs:annotation<span class="re2">&gt;</span></span>
    <span class="re1">&lt;xs:documentation<span class="re2">&gt;</span></span><span class="co3">
      The protocol documented by this schema is defined in
      XEP-0077: http://www.xmpp.org/extensions/xep-0077.html
    </span><span class="re1">&lt;/xs:documentation<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/xs:annotation<span class="re2">&gt;</span></span>
&#160;
  <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'query'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;xs:complexType<span class="re2">&gt;</span></span>
      <span class="re1">&lt;xs:sequence</span> <span class="re0">xmlns:xdata</span>=<span class="st0">'jabber:x:data'</span>
                   <span class="re0">xmlns:xoob</span>=<span class="st0">'jabber:x:oob'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;xs:choice</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span><span class="re2">&gt;</span>
          <span class="re1">&lt;xs:sequence</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span><span class="re2">&gt;</span>
            <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'registered'</span> <span class="re0">type</span>=<span class="st0">'empty'</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span><span class="re2">/&gt;</span>
            <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'instructions'</span> <span class="re0">type</span>=<span class="st0">'xs:string'</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span><span class="re2">/&gt;</span>
            <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'username'</span> <span class="re0">type</span>=<span class="st0">'xs:string'</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span><span class="re2">/&gt;</span>
            <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'nick'</span> <span class="re0">type</span>=<span class="st0">'xs:string'</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span><span class="re2">/&gt;</span>
            <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'password'</span> <span class="re0">type</span>=<span class="st0">'xs:string'</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span><span class="re2">/&gt;</span>
            <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'name'</span> <span class="re0">type</span>=<span class="st0">'xs:string'</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span><span class="re2">/&gt;</span>
            <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'first'</span> <span class="re0">type</span>=<span class="st0">'xs:string'</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span><span class="re2">/&gt;</span>
            <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'last'</span> <span class="re0">type</span>=<span class="st0">'xs:string'</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span><span class="re2">/&gt;</span>
            <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'email'</span> <span class="re0">type</span>=<span class="st0">'xs:string'</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span><span class="re2">/&gt;</span>
            <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'address'</span> <span class="re0">type</span>=<span class="st0">'xs:string'</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span><span class="re2">/&gt;</span>
            <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'city'</span> <span class="re0">type</span>=<span class="st0">'xs:string'</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span><span class="re2">/&gt;</span>
            <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'state'</span> <span class="re0">type</span>=<span class="st0">'xs:string'</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span><span class="re2">/&gt;</span>
            <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'zip'</span> <span class="re0">type</span>=<span class="st0">'xs:string'</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span><span class="re2">/&gt;</span>
            <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'phone'</span> <span class="re0">type</span>=<span class="st0">'xs:string'</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span><span class="re2">/&gt;</span>
            <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'url'</span> <span class="re0">type</span>=<span class="st0">'xs:string'</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span><span class="re2">/&gt;</span>
            <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'date'</span> <span class="re0">type</span>=<span class="st0">'xs:string'</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span><span class="re2">/&gt;</span>
            <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'misc'</span> <span class="re0">type</span>=<span class="st0">'xs:string'</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span><span class="re2">/&gt;</span>
            <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'text'</span> <span class="re0">type</span>=<span class="st0">'xs:string'</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span><span class="re2">/&gt;</span>
            <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'key'</span> <span class="re0">type</span>=<span class="st0">'xs:string'</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span><span class="re2">/&gt;</span>
          <span class="re1">&lt;/xs:sequence<span class="re2">&gt;</span></span>
          <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'remove'</span> <span class="re0">type</span>=<span class="st0">'empty'</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span><span class="re2">/&gt;</span>
        <span class="re1">&lt;/xs:choice<span class="re2">&gt;</span></span>
        <span class="re1">&lt;xs:element</span> <span class="re0">ref</span>=<span class="st0">'xdata:x'</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span><span class="re2">/&gt;</span>
        <span class="re1">&lt;xs:element</span> <span class="re0">ref</span>=<span class="st0">'xoob:x'</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span><span class="re2">/&gt;</span>
      <span class="re1">&lt;/xs:sequence<span class="re2">&gt;</span></span>
    <span class="re1">&lt;/xs:complexType<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span>
&#160;
  <span class="re1">&lt;xs:simpleType</span> <span class="re0">name</span>=<span class="st0">'empty'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;xs:restriction</span> <span class="re0">base</span>=<span class="st0">'xs:string'</span><span class="re2">&gt;</span>
      <span class="re1">&lt;xs:enumeration</span> <span class="re0">value</span>=<span class="st0">''</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;/xs:restriction<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/xs:simpleType<span class="re2">&gt;</span></span>
&#160;
<span class="re1">&lt;/xs:schema<span class="re2">&gt;</span></span></pre></div></div>
<h3> <span class="mw-headline" id="Stream_Feature">Stream Feature</span></h3>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;?xml</span> <span class="re0">version</span>=<span class="st0">'1.0'</span> <span class="re0">encoding</span>=<span class="st0">'UTF-8'</span><span class="re2">?&gt;</span>
&#160;
<span class="re1">&lt;xs:schema</span>
    <span class="re0">xmlns:xs</span>=<span class="st0">'http://www.w3.org/2001/XMLSchema'</span>
    <span class="re0">targetNamespace</span>=<span class="st0">'http://jabber.org/features/iq-register'</span>
    <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/features/iq-register'</span>
    <span class="re0">elementFormDefault</span>=<span class="st0">'qualified'</span><span class="re2">&gt;</span>
&#160;
  <span class="re1">&lt;xs:annotation<span class="re2">&gt;</span></span>
    <span class="re1">&lt;xs:documentation<span class="re2">&gt;</span></span><span class="co3">
      The protocol documented by this schema is defined in
      XEP-0077: http://www.xmpp.org/extensions/xep-0077.html
    </span><span class="re1">&lt;/xs:documentation<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/xs:annotation<span class="re2">&gt;</span></span>
&#160;
  <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'register'</span> <span class="re0">type</span>=<span class="st0">'empty'</span><span class="re2">/&gt;</span>
&#160;
  <span class="re1">&lt;xs:simpleType</span> <span class="re0">name</span>=<span class="st0">'empty'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;xs:restriction</span> <span class="re0">base</span>=<span class="st0">'xs:string'</span><span class="re2">&gt;</span>
      <span class="re1">&lt;xs:enumeration</span> <span class="re0">value</span>=<span class="st0">''</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;/xs:restriction<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/xs:simpleType<span class="re2">&gt;</span></span>
&#160;
<span class="re1">&lt;/xs:schema<span class="re2">&gt;</span></span></pre></div></div>
<h2> <span class="mw-headline" id=".E9.99.84.E5.BD.95">附录</span></h2>
<h3> <span class="mw-headline" id=".E9.99.84.E5.BD.95A:.E6.96.87.E6.A1.A3.E4.BF.A1.E6.81.AF">附录A:文档信息</span></h3>
<p>系列：<a rel="nofollow" class="external text" href="http://xmpp.org/extensions/">XEP</a>
</p><p>序号：0077
</p><p>发布者：<a rel="nofollow" class="external text" href="http://xmpp.org/xsf/">XMPP标准基金会</a>
</p><p>状态：<a rel="nofollow" class="external text" href="http://www.xmpp.org/extensions/xep-0001.html#states-Final">终结版</a>
</p><p>类型：<a rel="nofollow" class="external text" href="http://www.xmpp.org/extensions/xep-0001.html#types-Standards%20Track">标准跟踪</a>
</p><p>版本：2.3
</p><p>最后更新：2009-09-15
</p><p>批准机构：<a rel="nofollow" class="external text" href="http://xmpp.org/council/">XMPP理事会</a>
</p><p>依赖标准：XMPP Core
</p><p>替代标准：无
</p><p>被替代标准：无
</p><p>缩略名：iq-register
</p><p>XML架构: &lt;<a rel="nofollow" class="external free" href="http://www.xmpp.org/schemas/iq-register.xsd">http://www.xmpp.org/schemas/iq-register.xsd</a>&gt;
</p><p>原文控制： <a rel="nofollow" class="external text" href="http://svn.xmpp.org:18080/browse/XMPP/trunk/extensions/xep-0077.xml">HTML</a> <a rel="nofollow" class="external text" href="http://svn.xmpp.org:18080//changelog/~rss/XMPP/trunk/extensions/xep-0077.xml/rss.xml">RSS</a>
</p><p>本文的其它格式： <a rel="nofollow" class="external text" href="http://xmpp.org/extensions/xep-0077.xml">XML</a> <a rel="nofollow" class="external text" href="http://xmpp.org/extensions/xep-0077.pdf">PDF</a>
</p>
<h3> <span class="mw-headline" id=".E9.99.84.E5.BD.95B:.E4.BD.9C.E8.80.85.E4.BF.A1.E6.81.AF">附录B:作者信息</span></h3>
<p><b>Peter Saint-Andre</b>
</p><p>Email: <a rel="nofollow" class="external text" href="mailto:stpeter@jabber.org">stpeter@jabber.org</a>
</p><p>JabberID: stpeter@jabber.org
</p><p>URI: <a rel="nofollow" class="external free" href="https://stpeter.im/">https://stpeter.im/</a>
</p>
<h3> <span class="mw-headline" id=".E9.99.84.E5.BD.95C:.E6.B3.95.E5.BE.8B.E9.80.9A.E5.91.8A">附录C:法律通告</span></h3>
<p><b>版权</b>
</p><p>XMPP扩展协议的版权(1999-2008)归XMPP标准化基金会(XSF)所有.
</p><p><b>权限</b>
</p><p>特此授权,费用全免,对任何获得本协议副本的人,对使用本协议没有限制,包括不限制在软件程序中实现本协议,不限制在网络服务中布署本协议,不限制拷贝,修改,合并,发行,翻译,分发,转授,或销售本协议的副本,被允许使用本协议做了以上工作的人士,应接受前述的版权声明和本许可通知并且必须包含在所有的副本或实质性部分的规格中.除非单独的许可，被重新分发的修改工作，不得含有关于作者，标题，编号，或出版者的规格的误导性资料，并不得宣称修改工作是由本文的作者，作者所属的任何组织或项目，或XMPP标准基金会签注。
</p><p><b>免责声明'</b>
</p><p><b>## 特别注意：本协议是提供的“原样”的基础，没有担保或任何形式的条件，明示或暗示，包括，但不限于任何担保或关于名称，非侵权性，适销性或适合作某一特定目的的条件. ##</b>
</p><p><b>责任限制</b>
</p><p>在任何情况下以及没有任何法律规定时，不论是侵权行为（包括疏忽），合同或其它方面，除非根据适用法律的要求（如蓄意和有严重疏忽行为）或以书面形式同意，XMPP标准基金会或任何作者不对本协议所造成的损失承担责任，包括任何直接，间接，特殊，偶发，或任何从本协议出，入，连接的字符产生的或实现，布署或其他对本协议的使用导致的相应的损害赔偿（包括但不限于善意的损失，停止作业，电脑失灵或故障，或任何和所有其他商业损害或损失） ，即使XMPP标准基金会或作者已被告知此类损害的可能性。
</p><p><b>知识产权的一致性</b>
</p><p>XMPP扩展协议完全遵守XSF的知识产权策略(可在&lt;<a rel="nofollow" class="external free" href="http://www.xmpp.org/extensions/ipr-policy.shtml">http://www.xmpp.org/extensions/ipr-policy.shtml</a>&gt;找到副本或写信给XMPP标准基金会, 1899 Wynkoop Street, Suite 600, Denver, CO 80202 USA).
</p>
<h3> <span class="mw-headline" id=".E9.99.84.E5.BD.95D:.E5.92.8CXMPP.E7.9A.84.E5.85.B3.E7.B3.BB">附录D:和XMPP的关系</span></h3>
<p>可扩展的消息和出席信息协议 (XMPP) 定义于 XMPP Core (<a class="external mw-magiclink-rfc" href="//tools.ietf.org/html/rfc3920">RFC 3920</a>) 和 XMPP IM (<a class="external mw-magiclink-rfc" href="//tools.ietf.org/html/rfc3921">RFC 3921</a>) 规范里，由 XMPP标准基金会贡献到由依据<a class="external mw-magiclink-rfc" href="//tools.ietf.org/html/rfc2026">RFC 2026</a>成立的互联网工程人物组管理的互联网标准流程 Internet Standards Process. 本文定义的任何协议已在互联网标准流程之外开发，并且被理解为 XMPP 的扩展而不是一个XMPP本身的演化, 开发, 或修改.
</p>
<h3> <span class="mw-headline" id=".E9.99.84.E5.BD.95E:.E8.AE.A8.E8.AE.BA.E5.9C.B0.E7.82.B9">附录E:讨论地点</span></h3>
<p>主要的XMPP扩展协议讨论地点是 &lt;standards@xmpp.org&gt; 讨论列表.
</p><p>在 xmpp.org 的其它讨论列表中的讨论可能也有合适的; 所有的列表见 &lt;<a rel="nofollow" class="external free" href="http://xmpp.org/about/discuss.shtml">http://xmpp.org/about/discuss.shtml</a>&gt; .
</p><p>勘误表可以发送邮件到 &lt;editor@xmpp.org&gt;.
</p>
<h3> <span class="mw-headline" id=".E9.99.84.E5.BD.95F:.E9.9C.80.E6.B1.82.E4.B8.80.E8.87.B4.E6.80.A7">附录F:需求一致性</span></h3>
<p>以下用于本文的需求关键字的解释见于 <a rel="nofollow" class="external text" href="http://www.ietf.org/rfc/rfc2119.txt">RFC 2119</a>: "MUST", "SHALL", "REQUIRED"; "MUST NOT", "SHALL NOT"; "SHOULD", "RECOMMENDED"; "SHOULD NOT", "NOT RECOMMENDED"; "MAY", "OPTIONAL".
</p><p><br />
</p>
<h3> <span class="mw-headline" id=".E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8">附录G:备注</span></h3>
<ol><li> <a class="external mw-magiclink-rfc" href="//tools.ietf.org/html/rfc2779">RFC 2779</a>: A Model for Presence and Instant Messaging &lt;<a rel="nofollow" class="external free" href="http://tools.ietf.org/html/rfc2779">http://tools.ietf.org/html/rfc2779</a>&gt;.
</li><li> <a class="external mw-magiclink-rfc" href="//tools.ietf.org/html/rfc3921">RFC 3921</a>: 可扩展的消息和出席信息协议 (XMPP): Instant Messaging and Presence &lt;<a rel="nofollow" class="external free" href="http://tools.ietf.org/html/rfc3921">http://tools.ietf.org/html/rfc3921</a>&gt;.
</li><li> XEP-0030: Service Discovery &lt;<a rel="nofollow" class="external free" href="http://www.xmpp.org/extensions/xep-0030.html">http://www.xmpp.org/extensions/xep-0030.html</a>&gt;.
</li><li> XEP-0100: Gateway Interaction &lt;<a rel="nofollow" class="external free" href="http://www.xmpp.org/extensions/xep-0100.html">http://www.xmpp.org/extensions/xep-0100.html</a>&gt;.
</li><li> XEP-0045: Multi-User Chat &lt;<a rel="nofollow" class="external free" href="http://www.xmpp.org/extensions/xep-0045.html">http://www.xmpp.org/extensions/xep-0045.html</a>&gt;.
</li><li> XEP-0004: Data Forms &lt;<a rel="nofollow" class="external free" href="http://www.xmpp.org/extensions/xep-0004.html">http://www.xmpp.org/extensions/xep-0004.html</a>&gt;.
</li><li> 这包括提供一个空的 password 元素或一个不包含XML字符数据的 password 元素 , 即, 要么是 &lt;password/&gt; 要么是 &lt;password&gt;&lt;/password&gt;.
</li><li> <a class="external mw-magiclink-rfc" href="//tools.ietf.org/html/rfc3921">RFC 3921</a>: 可扩展的消息和出席信息协议 (XMPP): Instant Messaging and Presence &lt;<a rel="nofollow" class="external free" href="http://tools.ietf.org/html/rfc3921">http://tools.ietf.org/html/rfc3921</a>&gt;.
</li><li> <a class="external mw-magiclink-rfc" href="//tools.ietf.org/html/rfc3920">RFC 3920</a>: 可扩展的消息和出席信息协议 (XMPP): Core &lt;<a rel="nofollow" class="external free" href="http://tools.ietf.org/html/rfc3920">http://tools.ietf.org/html/rfc3920</a>&gt;.
</li><li> XEP-0068: Field Data Standardization for Data Forms &lt;<a rel="nofollow" class="external free" href="http://www.xmpp.org/extensions/xep-0068.html">http://www.xmpp.org/extensions/xep-0068.html</a>&gt;.
</li><li> XEP-0066: Out of Band Data &lt;<a rel="nofollow" class="external free" href="http://www.xmpp.org/extensions/xep-0066.html">http://www.xmpp.org/extensions/xep-0066.html</a>&gt;.
</li><li> XEP-0086: Error Condition Mappings &lt;<a rel="nofollow" class="external free" href="http://www.xmpp.org/extensions/xep-0086.html">http://www.xmpp.org/extensions/xep-0086.html</a>&gt;.
</li><li> 互联网编号分配机构(IANA) 是用于互联网协议的唯一性参数值分配的核心协调者, 例如号码和URI计划. 更多信息, 见 &lt;<a rel="nofollow" class="external free" href="http://www.iana.org/">http://www.iana.org/</a>&gt;.
</li><li> XMPP登记员XMPP Registrar 维护着一个保留的协议名字空间以及用于由XMPP标准基金会批准的XMPP扩展协议的上下文参数的注册项的列表. 更多信息, 见 &lt;<a rel="nofollow" class="external free" href="http://xmpp.org/registrar/">http://xmpp.org/registrar/</a>&gt;.
</li><li> XEP-0147: XMPP URI Query Components &lt;<a rel="nofollow" class="external free" href="http://www.xmpp.org/extensions/xep-0147.html">http://www.xmpp.org/extensions/xep-0147.html</a>&gt;.
</li></ol>
<h3> <span class="mw-headline" id=".E9.99.84.E5.BD.95H:.E4.BF.AE.E8.AE.A2.E5.8E.86.E5.8F.B2">附录H:修订历史</span></h3>
<p>注意: 本协议的旧版本可能在 <a rel="nofollow" class="external free" href="http://xmpp.org/extensions/attic/">http://xmpp.org/extensions/attic/</a> 还可用
</p><p><b>版本 2.3 (2009-09-15)</b>
</p><p>澄清字段 "first" 和 "last" 实际上总是分别用于显示名 given name 和姓 family name.
</p><p>(psa) 
</p><p><b>版本 2.2 (2006-01-24)</b>
</p><p>进一步定义了和数据表单的集成, 特别是如果需要在注销现有用户时要求额外的信息 (例如, 用户名和密码) 或更改密码 (例如, 旧密码); 也澄清了注销注册时服务器的处理.
</p><p>(psa)
</p><p><b>版本 2.1 (2005-07-14)</b>
</p><p>澄清了可扩展性规则; 移除了过期时间expiration date; 修改了架构 schema 以列入 jabber:x:data 和 jabber:x:oob 信息的可选包含项.
</p><p>(psa)
</p><p><b>版本 2.0 (2004-08-30)</b>
</p><p>通过Jabber理事会的投票, 提升状态为最终版Final; 也定义了服务器server的含义就是一个即时消息服务器.
</p><p>(psa)
</p><p><b>版本 1.6 (2004-08-23)</b>
</p><p>为了引起理事会的关注, 澄清了 x:data, iq:register, 和 x:oob 的优先次序; 进一步定义了未注册实体初始注册请求时服务器的处理.
</p><p>(psa)
</p><p><b>版本 1.5 (2004-07-21)</b>
</p><p>指定服务器对于来自未注册实体的请求的处理.
</p><p>(psa)
</p><p><b>版本 1.4 (2004-05-10)</b>
</p><p>移除关于服务器和服务的一致性语言 (属于一套协议规范).
</p><p>(psa)
</p><p>Version 1.3 (2004-02-24)
</p><p>Added text about redirection to web registration.
</p><p>(psa)
</p><p>Version 1.2 (2003-11-26)
</p><p>Documented use of &lt;key/&gt; element; added optional stream feature; added XMPP error handling; specified handling of empty passwords.
</p><p>(psa)
</p><p>Version 1.1 (2003-10-02)
</p><p>Moved change password use case from XEP-0078.
</p><p>(psa)
</p><p>Version 1.0 (2003-06-18)
</p><p>Per a vote of the Jabber Council, advanced status to Draft.
</p><p>(psa)
</p><p>Version 0.9 (2003-06-18)
</p><p>Changes to address Council concerns.
</p><p>(psa)
</p><p>Version 0.8 (2003-06-13)
</p><p>Restored the &lt;misc/&gt; and &lt;text/&gt; elements; added the old &lt;key/&gt; element; specified these three elements as obsolete.
</p><p>(psa)
</p><p>Version 0.7 (2003-06-12)
</p><p>Added &lt;registered/&gt; element; specified FORM_TYPE for x:data form; clarified that support for the extensibility mechanism is optional; removed the &lt;misc/&gt; and &lt;text/&gt; elements (not necessary given extensibility option); added &lt;nick/&gt;, &lt;first/&gt;, and &lt;last/&gt; elements that were traditionally documented as part of jabber:iq:register.
</p><p>(psa)
</p><p>Version 0.6 (2003-06-06)
</p><p>Removed XMPP-style error conditions until formats are stable.
</p><p>(psa)
</p><p>Version 0.5 (2003-05-30)
</p><p>Removed "encrypted secret" content, added information about expiration date.
</p><p>(psa)
</p><p>Version 0.4 (2003-05-28)
</p><p>Added "encrypted secret" content.
</p><p>(psa)
</p><p>Version 0.3 (2003-05-20)
</p><p>Slight editorial revisions.
</p><p>(psa)
</p><p>Version 0.2 (2003-04-29)
</p><p>Fixed schema, made minor editorial changes.
</p><p>(psa)
</p><p>Version 0.1 (2003-04-06)
</p><p>Initial version.
</p><p>(psa)
</p>
<hr />
<p>结束
</p>
<!-- 
NewPP limit report
Preprocessor node count: 490/1000000
Post-expand include size: 3174/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key mediawiki:pcache:idhash:11-0!*!0!!zh-cn!*!* and timestamp 20160221182459 -->
</div><div class="printfooter">
来自“<a href="http://wiki.jabbercn.org/index.php?title=XEP-0077&amp;oldid=2111">http://wiki.jabbercn.org/index.php?title=XEP-0077&amp;oldid=2111</a>”</div>
		<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks"><a href="/%E7%89%B9%E6%AE%8A:%E9%A1%B5%E9%9D%A2%E5%88%86%E7%B1%BB" title="特殊:页面分类">2个分类</a>: <ul><li><a href="/%E5%88%86%E7%B1%BB:XMPP%E6%89%A9%E5%B1%95" title="分类:XMPP扩展">XMPP扩展</a></li><li><a href="/%E5%88%86%E7%B1%BB:%E5%B7%B2%E7%BF%BB%E8%AF%91" title="分类:已翻译">已翻译</a></li></ul></div></div>		<!-- end content -->
				<div class="visualClear"></div>
	</div>
</div></div>
<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>查看</h5>
		<div class="pBody">
			<ul>
				<li id="ca-nstab-main" class="selected"><a href="/XEP-0077" title="查看内容页面 [c]" accesskey="c">页面</a></li>
				<li id="ca-talk" class="new"><a href="/index.php?title=%E8%AE%A8%E8%AE%BA:XEP-0077&amp;action=edit&amp;redlink=1" title="关于内容页面的讨论 [t]" accesskey="t">讨论</a></li>
				<li id="ca-viewsource"><a href="/index.php?title=XEP-0077&amp;action=edit" title="本页面已被保护。你可以查看其源代码。 [e]" accesskey="e">查看源代码</a></li>
				<li id="ca-history"><a href="/index.php?title=XEP-0077&amp;action=history" title="本页面的早前修订版本 [h]" accesskey="h">历史</a></li>
			</ul>
		</div>
	</div>

	<div class="portlet" id="p-personal">
		<h5>个人工具</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="/index.php?title=%E7%89%B9%E6%AE%8A:%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95&amp;returnto=XEP-0077" title="我们希望您可以登入，但不强求 [o]" accesskey="o">登录/创建账户</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a title="访问首页" style="background-image: url(/skins/common/images/xmppcn.png);" href="/%E9%A6%96%E9%A1%B5"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div class="generated-sidebar portlet" id="p-navigation">
		<h5>导航</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage-description"><a href="/%E9%A6%96%E9%A1%B5" title="访问首页 [z]" accesskey="z">首页</a></li>
				<li id="n-portal"><a href="/Jabber/XMPP%E4%B8%AD%E6%96%87%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92:%E7%A4%BE%E5%8C%BA%E4%B8%93%E9%A1%B5" title="关于本项目，你可以做什么，在哪里找到你需要的事物">社区专页</a></li>
				<li id="n-currentevents"><a href="/Jabber/XMPP%E4%B8%AD%E6%96%87%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92:%E6%96%B0%E9%97%BB%E5%8A%A8%E6%80%81" title="查看当前事件的背景信息">新闻动态</a></li>
				<li id="n-recentchanges"><a href="/%E7%89%B9%E6%AE%8A:%E6%9C%80%E8%BF%91%E6%9B%B4%E6%94%B9" title="本wiki的最近更改列表 [r]" accesskey="r">最近更改</a></li>
				<li id="n-randompage"><a href="/%E7%89%B9%E6%AE%8A:%E9%9A%8F%E6%9C%BA%E9%A1%B5%E9%9D%A2" title="随机进入一个页面 [x]" accesskey="x">随机页面</a></li>
				<li id="n-help"><a href="/%E5%B8%AE%E5%8A%A9:%E7%9B%AE%E5%BD%95" title="寻求帮助的地方">帮助</a></li>
			</ul>
		</div>
	</div>
	<div class="generated-sidebar portlet" id="p-XMPP.E8.B5.84.E6.BA.90">
		<h5>XMPP资源</h5>
		<div class='pBody'>
			<ul>
				<li id="n-XMPP.E5.85.AC.E5.85.B1.E6.9C.8D.E5.8A.A1"><a href="/XMPP%E5%85%AC%E5%85%B1%E6%9C%8D%E5%8A%A1">XMPP公共服务</a></li>
				<li id="n-XMPP.E5.AE.A2.E6.88.B7.E7.AB.AF.E8.BD.AF.E4.BB.B6"><a href="/XMPP%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%BD%AF%E4%BB%B6">XMPP客户端软件</a></li>
				<li id="n-XMPP.E6.9C.8D.E5.8A.A1.E5.99.A8.E8.BD.AF.E4.BB.B6"><a href="/XMPP%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BD%AF%E4%BB%B6">XMPP服务器软件</a></li>
				<li id="n-.E5.8F.8B.E6.83.85.E9.93.BE.E6.8E.A5"><a href="/%E5%8F%8B%E6%83%85%E9%93%BE%E6%8E%A5">友情链接</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		<h5><label for="searchInput">搜索</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/index.php" id="searchform">
				<input type='hidden' name="title" value="特殊:搜索"/>
				<input type="search" name="search" title="在Jabber/XMPP中文翻译计划中搜索 [f]" accesskey="f" id="searchInput" />
				<input type="submit" name="go" value="提交" title="如果相同的标题存在的话便直接前往该页面" id="searchGoButton" class="searchButton" />&#160;
				<input type="submit" name="fulltext" value="搜索" title="搜索含这些文字的页面" id="mw-searchButton" class="searchButton" />
			</form>
		</div>
	</div>




<script src="http://yacy.jabbercn.org:8090/yacy/ui/js/jquery-1.3.2.min.js" type="text/javascript"></script>
<script>
   $(document).ready(function() {
      yconf = {
         url : 'http://yacy.jabbercn.org:8090/',
         theme : 'smoothness',
         title : 'XMPP搜索大全',
         logo     : 'http://yacy.jabbercn.org:8090/env/grafics/50-xmpp_logo.jpg',
         link     : 'http://wiki.jabbercn.org',
         urlmaskfilter : '.*',
         width : 500,
         height : 500
      };
      $.getScript(yconf.url+'/yacy/ui/js/yacyui-portalsearch.js', function(){});
   });
</script>
        <div id="p-search" class="portlet">
<h5>站外搜索</h5>
<div id="yacylivesearch" class="pBody">
   <form id="ysearch" method="get" accept-charset="UTF-8" action="http://yacy.jabbercn.org:8090/yacysearch.html">
      <input name="search" id="yquery" type="text" size="8" maxlength="80" value=""/>
      <input type="hidden" name="verify" value="false" />
      <input type="hidden" name="maximumRecords" value="10" />
      <input type="hidden" name="resource" value="local" />
      <input type="hidden" name="urlmaskfilter" value=".*" />
      <input type="hidden" name="prefermaskfilter" value="" />
      <input type="hidden" name="former" value="" />
      <input type="hidden" name="display" value="2" />
      <input type="hidden" name="nav" value="all" />
      <input type="submit" name="Enter" value="搜索" class="searchButton" />
   </form>
</div>
</div>



	<div class="portlet" id="p-tb">
		<h5>工具箱</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="/%E7%89%B9%E6%AE%8A:%E9%93%BE%E5%85%A5%E9%A1%B5%E9%9D%A2/XEP-0077" title="所有链入本页的wiki页面列表 [j]" accesskey="j">链入页面</a></li>
				<li id="t-recentchangeslinked"><a href="/%E7%89%B9%E6%AE%8A:%E9%93%BE%E5%87%BA%E6%9B%B4%E6%94%B9/XEP-0077" title="本页链入的页面的最近更改 [k]" accesskey="k">链出更改</a></li>
				<li id="t-specialpages"><a href="/%E7%89%B9%E6%AE%8A:%E7%89%B9%E6%AE%8A%E9%A1%B5%E9%9D%A2" title="所有特殊页面列表 [q]" accesskey="q">特殊页面</a></li>
				<li><a href="/index.php?title=XEP-0077&amp;printable=yes" rel="alternate">可打印版</a></li>
				<li id="t-permalink"><a href="/index.php?title=XEP-0077&amp;oldid=2111" title="本页面该修订版本的永久链接">永久链接</a></li>
			</ul>
		</div>
	</div>
</div><!-- end of the left (by default at least) column -->
<div class="visualClear"></div>
<div id="footer">
	<div id="f-copyrightico">
		<a href="http://creativecommons.org/licenses/by-nc-sa/3.0/"><img src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" alt="Attribution-Noncommercial-Share Alike 3.0 Unported" width="88" height="31" /></a>
	</div>
	<div id="f-poweredbyico">
		<a href="http://www.mediawiki.org/"><img src="/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
	</div>
	<ul id="f-list">
		<li id="lastmod"> 本页面最后修订于2011年11月30日 (星期三) 13:34。</li>
		<li id="viewcount">此页面已被浏览过46,621次。</li>
		<li id="copyright">本站全部文字内容使用<a class="external" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Attribution-Noncommercial-Share Alike 3.0 Unported</a>授权。</li>
		<li id="privacy"><a href="/Jabber/XMPP%E4%B8%AD%E6%96%87%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92:%E9%9A%90%E7%A7%81%E6%9D%83%E6%94%BF%E7%AD%96" title="Jabber/XMPP中文翻译计划:隐私权政策">隐私权政策</a></li>
		<li id="about"><a href="/Jabber/XMPP%E4%B8%AD%E6%96%87%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92:%E5%85%B3%E4%BA%8E" title="Jabber/XMPP中文翻译计划:关于">关于Jabber/XMPP中文翻译计划</a></li>
		<li id="disclaimer"><a href="/Jabber/XMPP%E4%B8%AD%E6%96%87%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92:%E5%85%8D%E8%B4%A3%E5%A3%B0%E6%98%8E" title="Jabber/XMPP中文翻译计划:免责声明">免责声明</a></li>
	</ul>
</div>
</div>
<script>if(window.mw){
	mw.loader.load(["mediawiki.user", "mediawiki.util", "mediawiki.page.ready", "mediawiki.legacy.wikibits", "mediawiki.legacy.ajax", "mediawiki.legacy.mwsuggest"]);
}
</script>
<script>if(window.mw){
	mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"externaldiff":0,"externaleditor":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"highlightbroken":1,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"quickbar":5,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"showjumplinks":1,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"monobook","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,
	"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"variant":"zh-cn","language":"zh-cn","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false});;mw.user.tokens.set({"editToken":"+\\","watchToken":false});;mw.loader.state({"user.options":"ready","user.tokens":"ready"});
	
	/* cache key: mediawiki:resourceloader:filter:minify-js:4:42c4e9caefe8ca663d220ee0c286ac74 */
}
</script><!-- Piwik -->
<script type="text/javascript">
/* <![CDATA[ */
var pkBaseURL = (("https:" == document.location.protocol) ? "https://rtp.rooyee.im/piwik/" : "http://rtp.rooyee.im/piwik/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
/* ]]> */
</script>
<script type="text/javascript">
/* <![CDATA[ */
try {
var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 5);
piwikTracker.setDocumentTitle("XEP-0077");
piwikTracker.setIgnoreClasses("image");

piwikTracker.trackPageView();
piwikTracker.enableLinkTracking();
} catch( err ) {}
/* ]]> */
</script><noscript><p><img src="http://rtp.rooyee.im/piwik/piwik.php?idsite=5" style="border:0" alt=""/></p></noscript>
<!-- /Piwik --><!-- Served in 0.039 secs. --></body></html>