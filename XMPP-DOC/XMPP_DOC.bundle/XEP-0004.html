<!DOCTYPE html>
<html lang="zh-cn" dir="ltr" class="client-nojs">
<head>
<title>XEP-0004 - Jabber/XMPP中文翻译计划</title>
<meta charset="UTF-8" />
<meta name="generator" content="MediaWiki 1.18.2" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="Jabber/XMPP中文翻译计划 (zh-cn)" />
<link rel="EditURI" type="application/rsd+xml" href="http://wiki.jabbercn.org/api.php?action=rsd" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" />
<link rel="alternate" type="application/atom+xml" title="Jabber/XMPP中文翻译计划的Atom" href="/index.php?title=%E7%89%B9%E6%AE%8A:%E6%9C%80%E8%BF%91%E6%9B%B4%E6%94%B9&amp;feed=atom" />
<link rel="stylesheet" href="/load.php?debug=false&amp;lang=zh-cn&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cskins.monobook&amp;only=styles&amp;skin=monobook&amp;*" />
<!--[if lt IE 5.5000]><link rel="stylesheet" href="/skins/monobook/IE50Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 5.5000]><link rel="stylesheet" href="/skins/monobook/IE55Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 6]><link rel="stylesheet" href="/skins/monobook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/skins/monobook/IE70Fixes.css?303" media="screen" /><![endif]--><meta name="ResourceLoaderDynamicStyles" content="" />
<style>a:lang(ar),a:lang(ckb),a:lang(fa),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}a.new,#quickbar a.new{color:#ba0000}

/* cache key: mediawiki:resourceloader:filter:minify-css:4:c88e2bcd56513749bec09a7e29cb3ffa */</style>
<script src="/load.php?debug=false&amp;lang=zh-cn&amp;modules=startup&amp;only=scripts&amp;skin=monobook&amp;*"></script>
<script>if(window.mw){
	mw.config.set({"wgCanonicalNamespace": "", "wgCanonicalSpecialPageName": false, "wgNamespaceNumber": 0, "wgPageName": "XEP-0004", "wgTitle": "XEP-0004", "wgCurRevisionId": 3233, "wgArticleId": 41, "wgIsArticle": true, "wgAction": "view", "wgUserName": null, "wgUserGroups": ["*"], "wgCategories": ["XMPP扩展", "已翻译"], "wgBreakFrames": false, "wgRestrictionEdit": [], "wgRestrictionMove": [], "wgSearchNamespaces": [0]});
}
</script><script>if(window.mw){
	mw.loader.load(["mediawiki.page.startup"]);
}
</script>
<style type="text/css">/*<![CDATA[*/
.source-xml {border: 1px dashed #2f6fab; color: black; background-color: #f9f9f9;}
.source-xml li, .source-xml pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for xml
 * CSS class: source-xml, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.source-xml .de1, .source-xml .de2 {font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;}
.source-xml  {font-family: monospace;}
.source-xml .imp {font-weight: bold; color: red;}
.source-xml li, .source-xml li.li1 {font-weight: normal;}
.source-xml li.li2 {font-weight: bold;}
.source-xml .co1 {color: #808080; font-style: italic;}
.source-xml .co2 {color: #404040; font-style: italic;}
.source-xml .co3 {color: #000000;}
.source-xml .co4 {color: #400000; font-weight: bold;}
.source-xml .es0 {color: #000099; font-weight: bold;}
.source-xml .br0 {color: #66cc66;}
.source-xml .sy0 {color: #66cc66;}
.source-xml .st0 {color: #ff0000;}
.source-xml .nu0 {color: #cc66cc;}
.source-xml .re0 {color: #000066;}
.source-xml .re1 {color: #000000; font-weight: bold;}
.source-xml .re2 {color: #000000; font-weight: bold;}
.source-xml .ln-xtra, .source-xml li.ln-xtra, .source-xml div.ln-xtra {background-color: #ffc;}
.source-xml span.xtra { display:block; }

/*]]>*/
</style>
<style type="text/css">/*<![CDATA[*/
@import "/index.php?title=MediaWiki:Geshi.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
/*]]>*/
</style></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-XEP-0004 action-view skin-monobook">
<div id="globalWrapper">
<div id="column-content"><div id="content">
	<a id="top"></a>
	
	<h1 id="firstHeading" class="firstHeading">XEP-0004</h1>
	<div id="bodyContent">
		<div id="siteSub">来自Jabber/XMPP中文翻译计划</div>
		<div id="contentSub"></div>
		<div id="jump-to-nav">跳转到： <a href="#column-one">导航</a>, <a href="#searchInput">搜索</a></div>
		<!-- start content -->
<div lang="zh-cn" dir="ltr" class="mw-content-ltr"><p><br />
</p><p><b>本文的英文原文来自<a rel="nofollow" class="external text" href="http://xmpp.org/extensions/xep-0004.html">XEP-0004</a></b>
</p><p><b>XEP-0004: 数据表单</b>
</p><p>摘要: 本文定义了一个XMPP扩展协议用于数据表单，可以用于worklows如服务配置以及特定应用的数据描述和报告。这个协议包括表单处理的轻量级语义(如请求,响应,提交和取消),定义了几种常见的字段类型(布尔、单个或多个选择的列表选项、单行或多行的文本,单个或多个JabberID、隐藏字段,等等),为以后的数据类型提供扩展性,可以用在广泛的应用中。该协议并不是要提供完整的表格处理功能（由W3C XForms技术提供），而是提供这种功能的基本子集给XMPP使用。
</p><p>作者:	Ryan Eatmon, Joe Hildebrand, Jeremie Miller, Thomas Muldowney, Peter Saint-Andre
</p><p>XMPP扩展协议的版权(1999-2008)归XMPP标准化基金会(XSF)所有
</p><p>版权:	© 1999 - 2010 XMPP标准化基金会(XSF). 参见<a href="/XEP-0004#.E6.B3.95.E5.BE.8B.E9.80.9A.E5.91.8A" title="XEP-0004">法律通告</a>.
</p><p>状态: 最终
</p><p>类型: 标准跟踪
</p><p>版本: 2.9
</p><p>最后更新日期: 2007-08-13
</p><p>注意: 这里定义的协议是XMPP标准化基金会的一个最终标准.对于实现和布署来说可以被认为是一个稳定技术.
</p>
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>目录</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#.E7.BB.AA.E8.AE.BA"><span class="tocnumber">1</span> <span class="toctext">绪论</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#.E9.9C.80.E6.B1.82"><span class="tocnumber">2</span> <span class="toctext">需求</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#.E5.8D.8F.E8.AE.AE"><span class="tocnumber">3</span> <span class="toctext">协议</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#.E8.A1.A8.E5.8D.95.E7.B1.BB.E5.9E.8B"><span class="tocnumber">3.1</span> <span class="toctext">表单类型</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#.E5.AD.97.E6.AE.B5.E5.85.83.E7.B4.A0"><span class="tocnumber">3.2</span> <span class="toctext">字段元素</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#.E5.AD.97.E6.AE.B5.E7.B1.BB.E5.9E.8B"><span class="tocnumber">3.3</span> <span class="toctext">字段类型</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#.E8.A1.A8.E5.8D.95.E7.BB.93.E6.9E.9C.E4.B8.AD.E7.9A.84.E5.A4.9A.E4.B8.AA.E9.A1.B9.E7.9B.AE"><span class="tocnumber">3.4</span> <span class="toctext">表单结果中的多个项目</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="#.E6.95.B0.E6.8D.AE.E6.9C.89.E6.95.88.E6.80.A7"><span class="tocnumber">4</span> <span class="toctext">数据有效性</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#.E4.BE.8B.E5.AD.90"><span class="tocnumber">5</span> <span class="toctext">例子</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#.E9.85.8D.E7.BD.AE"><span class="tocnumber">5.1</span> <span class="toctext">配置</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#.E6.90.9C.E7.B4.A2"><span class="tocnumber">5.2</span> <span class="toctext">搜索</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="#.E6.9C.8D.E5.8A.A1.E5.8F.91.E7.8E.B0"><span class="tocnumber">6</span> <span class="toctext">服务发现</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="#.E5.AE.89.E5.85.A8.E6.80.A7.E8.80.83.E8.99.91"><span class="tocnumber">7</span> <span class="toctext">安全性考虑</span></a></li>
<li class="toclevel-1 tocsection-14"><a href="#IANA.E8.80.83.E8.99.91"><span class="tocnumber">8</span> <span class="toctext">IANA考虑</span></a></li>
<li class="toclevel-1 tocsection-15"><a href="#XMPP.E6.B3.A8.E5.86.8C.E8.80.83.E8.99.91"><span class="tocnumber">9</span> <span class="toctext">XMPP注册考虑</span></a>
<ul>
<li class="toclevel-2 tocsection-16"><a href="#.E5.8D.8F.E8.AE.AE.E5.91.BD.E5.90.8D.E7.A9.BA.E9.97.B4"><span class="tocnumber">9.1</span> <span class="toctext">协议命名空间</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#.E5.8F.82.E6.95.B0.E5.80.BC"><span class="tocnumber">9.2</span> <span class="toctext">参数值</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-18"><a href="#XML_.E6.9E.B6.E6.9E.84"><span class="tocnumber">10</span> <span class="toctext">XML 架构</span></a></li>
<li class="toclevel-1 tocsection-19"><a href="#.E6.9C.80.E7.BB.88.E7.8A.B6.E6.80.81.E7.9A.84.E4.BF.AE.E6.94.B9"><span class="tocnumber">11</span> <span class="toctext">最终状态的修改</span></a></li>
<li class="toclevel-1 tocsection-20"><a href="#.E8.8D.89.E7.A8.BF.E7.8A.B6.E6.80.81.E7.9A.84.E4.BF.AE.E6.94.B9"><span class="tocnumber">12</span> <span class="toctext">草稿状态的修改</span></a></li>
<li class="toclevel-1 tocsection-21"><a href="#.E9.99.84.E5.BD.95"><span class="tocnumber">13</span> <span class="toctext">附录</span></a>
<ul>
<li class="toclevel-2 tocsection-22"><a href="#.E9.99.84.E5.BD.95A:.E6.96.87.E6.A1.A3.E4.BF.A1.E6.81.AF"><span class="tocnumber">13.1</span> <span class="toctext">附录A:文档信息</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#.E9.99.84.E5.BD.95B:.E4.BD.9C.E8.80.85.E4.BF.A1.E6.81.AF"><span class="tocnumber">13.2</span> <span class="toctext">附录B:作者信息</span></a></li>
<li class="toclevel-2"><a href="#.E9.99.84.E5.BD.95C:.E6.B3.95.E5.BE.8B.E9.80.9A.E5.91.8A"><span class="tocnumber">13.3</span> <span class="toctext">附录C:法律通告</span></a></li>
<li class="toclevel-2"><a href="#.E9.99.84.E5.BD.95D:.E5.92.8CXMPP.E7.9A.84.E5.85.B3.E7.B3.BB"><span class="tocnumber">13.4</span> <span class="toctext">附录D:和XMPP的关系</span></a></li>
<li class="toclevel-2"><a href="#.E9.99.84.E5.BD.95E:.E8.AE.A8.E8.AE.BA.E5.9C.B0.E7.82.B9"><span class="tocnumber">13.5</span> <span class="toctext">附录E:讨论地点</span></a></li>
<li class="toclevel-2"><a href="#.E9.99.84.E5.BD.95F:.E9.9C.80.E6.B1.82.E4.B8.80.E8.87.B4.E6.80.A7"><span class="tocnumber">13.6</span> <span class="toctext">附录F:需求一致性</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8"><span class="tocnumber">13.7</span> <span class="toctext">附录G:备注</span></a></li>
<li class="toclevel-2 tocsection-25"><a href="#.E9.99.84.E5.BD.95H:.E4.BF.AE.E8.AE.A2.E5.8E.86.E5.8F.B2"><span class="tocnumber">13.8</span> <span class="toctext">附录H:修订历史</span></a></li>
</ul>
</li>
</ul>
</td></tr></table>
<h2> <span class="mw-headline" id=".E7.BB.AA.E8.AE.BA">绪论</span></h2>
<p>几个现有的Jabber/XMPP的协议包含用户和应用程序之间的结构数据交换，为常用的任务，如注册（<a rel="nofollow" class="external text" href="http://xmpp.org/extensions/xep-0077.html">In-Band Registration</a><a href="/XEP-0004#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0004">1</a>）和搜索（<a rel="nofollow" class="external text" href="http://xmpp.org/extensions/xep-0055.html">Jabber Search</a> <a href="/XEP-0004#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0004">2</a>）。不幸的是，这些早期的协议是“硬编码”，因此很大的限制了可交换信息的范围。此外，其他协议(如，<a rel="nofollow" class="external text" href="http://xmpp.org/extensions/xep-0045.html">Multi-User Chat</a> <a href="/XEP-0004#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0004">3</a>)可能需要以交换数据为目的，例如配置，但是配置选项可能根据具体实施或部署不同。最后，开发人员可能要以灵活的方式扩展其他协议(如, <a rel="nofollow" class="external text" href="http://xmpp.org/extensions/xep-0030.html">Service Discovery</a><a href="/XEP-0004#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0004">4</a>)，以提供在基本协议没有定义的信息。在所有这些情况下，这将有助于使用一个通用的数据描述格式，可以用于动态表单生成和各种情况下的数据“建模”。
</p><p>一个例子可能会有帮助。试想一下，当用户创建一个文本会议服务的多用户聊天室，该服务允许用户以各种方式配置房间。虽然大多数实现可能提供了一个较为常见的可配置功能集（讨论记录，房间拥有者的最大数量，等等）。还会有一些分歧：也许一个实现允许把房间日志以各种文件类型（XML，HTML，PDF等格式）和各种时间周期（每小时，每天，每周等）保存。而另一个实现，可能只存在登录的开/关选择一种格式（如，在HTML保存每日日志）。很明显，第一个实现比第二个实现有更多的配置选项。而不像“硬编码”每个选项通过不同的XML元素（如，&lt;room_logging_period/&gt;），一个好的设计应该包含更多灵活的格式。
</p><p>此处所描述的'jabber:x:data'协议为Jabber/XMPP实体的使用定义了灵活的格式，控制在“名称值”对的简单和<a rel="nofollow" class="external text" href="http://www.w3.org/TR/xforms/">XForms 1.0</a> <a href="/XEP-0004#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0004">5</a>（当这个协议被设计时才开始发展的）的复杂之间。在很多方面，'jabber:x:data' 与<a rel="nofollow" class="external text" href="http://www.w3.org/TR/xhtml1/">XHTML 1.0</a><a href="/XEP-0004#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0004">6</a>的表单模块类似。但它提供一些Jabber特有的数据类型，允许应用程序请求数据字段，更自然地集成到IQ节的“workflow”语义中。而且它可以作为现有的Jabber/XMPP协议的扩展，而当这个协议被开发出来时，XHTML的表单模块却不能（尤其是当时并没有<a rel="nofollow" class="external text" href="http://www.w3.org/TR/2004/WD-xhtml-modularization-20040218/">Modularization of XHTML</a> <a href="/XEP-0004#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0004">7</a>）。
</p>
<h2> <span class="mw-headline" id=".E9.9C.80.E6.B1.82">需求</span></h2>
<p>本文档涉及下列需求:
</p>
<ol><li> <b>数据收集</b> -- 该协议应允许表单处理实体（通常是一个服务器，服务，或bot）从表单提交实体（通常是一个由用户控制的客户端）收集数据。应该是通过不同的数据字段来做，每个都可以是不同的数据“类型”，而且允许自由格式的输入或多个选项的选择（就像HTML表单一样）。
</li><li> <b>数据报告</b> -- 该协议应允许表单处理的实体向表单提交的实体报告数据，再通过不同的数据字段。 
</li><li> <b>可移植性</b> -- 协议应该尽量只定义普通数据格式和基本的数据类型。提示应该在相关的用户界面提供，但应该仅仅是提示，而不是严格的要求。 
</li><li> <b>简单</b> -- 协议在客户端的实施应该简单，并且大多数复杂的工作（如，数据有效性和处理）应由服务器和组件去完成，而不是客户端。 
</li><li> <b>灵活性</b> -- 协议应该具有灵活性和可扩展性，而不像“硬编码”。
</li><li> <b>兼容性</b> -- 协议应该为已有的Jabber/XMPP协议定义一个扩展，而且不破坏已有的实现，除非绝对必要。
</li></ol>
<h2> <span class="mw-headline" id=".E5.8D.8F.E8.AE.AE">协议</span></h2>
<p>'jabber:x:data' 命名空间的基本语法如下（正式的描述可以在下面的XML节中找到）:
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;x</span> <span class="re0">xmlns</span>=<span class="st0">'jabber:x:data'</span> 
   <span class="re0">type</span>=<span class="st0">'{form-type}'</span><span class="re2">&gt;</span> 
  <span class="re1">&lt;title</span><span class="re2">/&gt;</span> 
  <span class="re1">&lt;instructions</span><span class="re2">/&gt;</span> 
  <span class="re1">&lt;field</span> <span class="re0">var</span>=<span class="st0">'field-name'</span> 
         <span class="re0">type</span>=<span class="st0">'{field-type}'</span> 
         <span class="re0">label</span>=<span class="st0">'description'</span><span class="re2">&gt;</span> 
    <span class="re1">&lt;desc</span><span class="re2">/&gt;</span> 
    <span class="re1">&lt;required</span><span class="re2">/&gt;</span> 
    <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">field-value</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
    <span class="re1">&lt;option</span> <span class="re0">label</span>=<span class="st0">'option-label'</span><span class="re2">&gt;</span><span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">option-value</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span><span class="re1">&lt;/option<span class="re2">&gt;</span></span> 
    <span class="re1">&lt;option</span> <span class="re0">label</span>=<span class="st0">'option-label'</span><span class="re2">&gt;</span><span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">option-value</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span><span class="re1">&lt;/option<span class="re2">&gt;</span></span> 
  <span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
<span class="re1">&lt;/x<span class="re2">&gt;</span></span></pre></div></div>
<p>受'jabber:x:data' 命名空间限制的&lt;x/&gt;元素，应该包括直接作为&lt;message/&gt;节第一级子元素或作为&lt;iq/&gt; 节（其中第一级子元素是由一个"wrapper"命名空间限制的）的第二级子节。参见下文列举的限制。
</p><p>可选项&lt;title/&gt;和&lt;instructions/&gt;元素，允许表单处理实体把表单标记为一个整体并指定自然语言指令，后面跟着表单提交实体。这些元素的XML字符数据不应包含换行符（\n和\r字符），而任何换行符操作（如，在用户界面显示）在这里不是特指的。但&lt;instructions/&gt;元素的多个实体可以被包括在内。
</p>
<h3> <span class="mw-headline" id=".E8.A1.A8.E5.8D.95.E7.B1.BB.E5.9E.8B">表单类型</span></h3>
<p>'jabber:x:data'表单中数据的收集或提供可以位于不同的上下文。例子包括一个需要填写的空表单，填好的表单，一个提交结果，一个搜索结果，或仅仅是用'jabber:x:data'命名空间封装的一组数据。完整的数据上下文由3个条件提供：
</p>
<ol><li> "wrapper"协议（即，以&lt;iq/&gt;节直接子元素为根元素的命名空间和受'jabber:x:data' 命名空间限制的&lt;x/&gt;元素的父元素）。
</li><li> 一个包含事务（如，一个IQ "set"或"result"）或会话结构（如，一个消息&lt;thread/&gt;）的表单的位置。
</li><li> 表单中&lt;x/&gt;根元素的类型属性
</li></ol>
<p>前面2件上下文信息有其他协议提供，而表单类型见下表描述。
</p>
<dl><dd><b>表1：表单类型</b>
</dd></dl>
<table border="1" cellspacing="0">
<tr>
<th> 类型 </th>
<th> 描述
</th></tr>
<tr>
<td>表单 </td>
<td> 表单处理实体请求表单提交实体去完成表单。
</td></tr>
<tr>
<td>提交 </td>
<td> 表单提交实体提交数据给表单处理实体。提交信息可以包含不是空表单提供的字段，但表单处理实体必须忽略任何无法识别的字段。
</td></tr>
<tr>
<td>取消 </td>
<td> 表单提交实体取消给表单处理实体提交的数据。
</td></tr>
<tr>
<td>结果 </td>
<td> 单处理实体返回数据（如查询结果）给表单提交实体，或数据是一个通用的数据集。
</td></tr></table>
<p><br />
</p><p><br />
为了维护表单类型中获取的数据的上下文，必须遵守以下规则:
</p>
<dl><dd><ul><li> 对于&lt;iq/&gt;节，受"wrapper" 命名空间限制的根元素，以"form" 或"submit"的一种形式，必须以一种"result"形式的表单返回。受'jabber:x:data'命名空间限制的&lt;x/&gt;元素，必须是"wrapper"命名空间根元素的子元素。根据<a rel="nofollow" class="external text" href="http://tools.ietf.org/html/rfc3920">XMPP Core</a> <a href="/XEP-0004#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0004">8</a>所定义， 'id' 属性必须在IQ结果中被复制。对于表单类型为"form" 或 "result",&lt;iq/&gt;节应该是"result"类型。对于表单类型为"submit" 或"cancel"，  &lt;iq/&gt;节应该是"set"类型。
</li></ul>
</dd></dl>
<dl><dd><ul><li> 对于&lt;message/&gt;节，如果提供的话，&lt;thread/&gt;应该在回复中被复制。受'jabber:x:data'命名空间限制的&lt;x/&gt;元素，必须是&lt;message/&gt;节的子元素。
</li></ul>
</dd></dl>
<h3> <span class="mw-headline" id=".E5.AD.97.E6.AE.B5.E5.85.83.E7.B4.A0">字段元素</span></h3>
<p>一个"form"，"submit"，或 "result"类型的数据表单应该包含至少一个&lt;field/&gt;元素。一个"cancel"类型的表单，不应该包含任何&lt;field/&gt;元素。
</p><p><br />
&lt;field/&gt;元素可以包含以下任何子元素:
</p>
<dl><dd><b>&lt;desc/&gt;</b>
</dd><dd>该元素的XML字符数据提供了该字段一个自然语言的描述，为了在用户代理中介绍（如，作为一个"tool-tip"，帮助按钮，或在字段附近的文本标记）。&lt;desc/&gt;元素不应包含换行符（\n和\r字符），因为布局负责用户代理，任何换行的处理（如，在用户界面演示）在这里是未指明的。（注意：提供一个字段的描述，使用&lt;desc/&gt;元素是被推荐的，而不是一个单独的"fixed"类型的&lt;field/&gt;元素。）
</dd></dl>
<dl><dd><b>&lt;required/&gt;</b>
</dd><dd>该元素必须为空，标记所需的字段，为了被表单识别为有效字段。
</dd></dl>
<dl><dd><b>&lt;value/&gt;</b>
</dd><dd>该元素的XML字符数据定义了在"form"类型数据表单中的字段（根据表单处理实体）的默认值，在"submit"类型数据表单中由表单提交实体提供的数据，或在"result"类型数据表单中的数据结果。在"form"类型数据表单中，如果表单处理实体通过&lt;value/&gt;元素提供了一个默认值，表单提交实体就不应该尝试去执行一个不同的默认值。
</dd></dl>
<dl><dd><b>&lt;option/&gt;</b>
</dd><dd>在"list-single"或"list-multi"字段类型中的一个选项。&lt;value/&gt;子元素的XML字符定义了选项的值，而且标签属性为选项定义了一个人们易读的名称。&lt;option/&gt;元素必须且只能包含一个&lt;value/&gt;子元素。如果字段类型不是"list-single"或"list-multi"，就一定不能包含&lt;option/&gt;元素。
</dd></dl>
<p>如果&lt;field/&gt;元素类型是其他的而不是“fixed”（见下文），它必须拥有一个'var'属性在表单中唯一标识字段（如果是“fixed”，可以拥有一个'var'属性）。&lt;field/&gt;元素可以拥有一个标签属性，为字段定义一个人们易读的名称。对于“form”类型的数据表单，每个&lt;field/&gt;元素应该拥有'type'属性，它定义了字段数据的数据 "type"（如果没有'type'被指定，则默认为"text-single"）。在其他表单类型的上下文中提供的字段，也可以拥有一个'type'属性。对于"submit"类型的数据表单，'type'中包含的属性是可选的，因为表单处理实体被假定知道它处理的表单的数据类型。
</p><p>如果字段出现在用户页面上（如，问卷中的项或表单结果），在XML中的字段元素的顺序，应该决定出现在用户处的项目的顺序。
</p>
<h3> <span class="mw-headline" id=".E5.AD.97.E6.AE.B5.E7.B1.BB.E5.9E.8B">字段类型</span></h3>
<p>以下字段类型代表Jabber/XMPP实体之间通用的数据类型。这些字段并打算像数据类型一样被广泛定义，如<a rel="nofollow" class="external text" href="http://www.w3.org/TR/xmlschema-2/">XML Schema Part 2</a> <a href="/XEP-0004#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0004">9</a>, 也没有定义用户界面元素。
</p>
<dl><dd><b>表2:字段类型</b>
</dd></dl>
<table border="1" cellspacing="0">
<tr>
<th> 类型 </th>
<th> 描述
</th></tr>
<tr>
<td>布尔型 </td>
<td> 该字段允许一个实体收集或提供一个在两个选项中只能二选一的选择。默认值为"false"。<a href="/XEP-0004#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0004">10</a>
</td></tr>
<tr>
<td>固定 </td>
<td> 该字段是用于数据的描述（如，人们易读的"section"头信息）而不是数据的收集或提供。&lt;value/&gt;子元素不应该包含换行符（\n和\r字符）；然而一个应用应该生成多个固定的字段，每个都包含&lt;value/&gt;子元素。
</td></tr>
<tr>
<td>隐藏 </td>
<td> 该字段未展现给表单提交实体，但是和表单一起返回。表单提交实体不能修改隐藏字段的值，但如果这种行为被定义为是“使用协议”时可以这样做。
</td></tr>
<tr>
<td>多jid </td>
<td> 该字段允许一个实体收集或提供多个Jabber ID。每个提供的JID应该是唯一的（比较确定的，包括Nodeprep的应用、Nameprep和Resourceprep profiles of Stringprep，按XMPP Core中说明的），而重复的JID一定会被忽略。*
</td></tr>
<tr>
<td>单jid </td>
<td> 该字段允许一个实体收集或提供单个的Jabber ID。
</td></tr>
<tr>
<td>多选项列表 </td>
<td> 该字段允许一个实体从很多选项中收集或提供一个或多个选项。表单提交实体从表单处理实体提交的选项中选择一个或多个项，而且不能插入新的选项。表单处理实体不能修改从表单处理实体处获取的项目的顺序，因为项目的顺序可能很重要。**
</td></tr>
<tr>
<td>单选项列表</td>
<td> 该字段允许一个实体从很多选项中收集或提供一个选项。表单提交实体从表单处理实体提交的选项中选择一个项，而且不能插入新的选项。**
</td></tr>
<tr>
<td>多文本</td>
<td> 该字段允许一个实体收集或提供多行的文本。***
</td></tr>
<tr>
<td>私有文本</td>
<td> 该字段允许一个实体收集或提供一行或一个词的文本，其应该在界面上遮蔽。（如，星号显示的多个实体）
</td></tr>
<tr>
<td>单文本</td>
<td> 该字段允许一个实体收集或提供一行或一个词的文本，其应该在界面上显示。这个字段类型是缺省的而且必须假定，当一个表单提交实体收到一个不知道的字段类型时。
</td></tr></table>
<p><br />
注意：为字段类型"jid-single"或"jid-multi"提供的数据必须包含一个或一个以上的有效Jabber ID，有效性是由XMPP Core（参看后面章节的Data Validation）定义的寻址规则决定的。
</p><p>注意：在list-multi和list-single中的&lt;option/&gt;元素必须是唯一的，唯一性是由‘label’属性的值和&lt;value/&gt;元素中的XML字符数据决定的。（即，2个都必须是唯一的）
</p><p>注意：为字段类型"text-multi"提供的数据不应该包含任何换行符（\n和\r字符）。而应用程序应该把数据分为多个字符串（基于平台插入的换行符），然后用不同的&lt;value/&gt;元素中的XML字符数据指定每一个字符串。同样的，以"text-multi"字段类型接收了多个&lt;value/&gt;元素的应用程序，应该把value元素中的XML字符数据合并成一个文本块以提交给用户。每一个字符串为平台适时的通过换行符分开。
</p>
<h3> <span class="mw-headline" id=".E8.A1.A8.E5.8D.95.E7.BB.93.E6.9E.9C.E4.B8.AD.E7.9A.84.E5.A4.9A.E4.B8.AA.E9.A1.B9.E7.9B.AE">表单结果中的多个项目</span></h3>
<p>在某些情况下（如，查询请求的结果），传达多个项目是必须的。因此，一个"result"类型的数据表单可能包含2个上面基本语法没有描述的子元素:
</p>
<ol><li>只有一个&lt;reported/&gt;元素，可以理解为一个“表头”描述数据去遵循。 
</li><li>零个或更多&lt;item/&gt;元素，可以理解为包含符合请求的数据（如果有的话）的"table cells"。 
</li></ol>
<p>其语法如下：
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;x</span> <span class="re0">xmlns</span>=<span class="st0">'jabber:x:data'</span> 
   <span class="re0">type</span>=<span class="st0">'result'</span><span class="re2">&gt;</span> 
  <span class="re1">&lt;reported<span class="re2">&gt;</span></span> 
    <span class="re1">&lt;field</span> <span class="re0">var</span>=<span class="st0">'field-name'</span> <span class="re0">label</span>=<span class="st0">'description'</span> <span class="re0">type</span>=<span class="st0">'{field-type}'</span><span class="re2">/&gt;</span> 
  <span class="re1">&lt;/reported<span class="re2">&gt;</span></span> 
  <span class="re1">&lt;item<span class="re2">&gt;</span></span> 
    <span class="re1">&lt;field</span> <span class="re0">var</span>=<span class="st0">'field-name'</span><span class="re2">&gt;</span> 
      <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">field-value</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
    <span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
  <span class="re1">&lt;/item<span class="re2">&gt;</span></span> 
  <span class="re1">&lt;item<span class="re2">&gt;</span></span> 
    <span class="re1">&lt;field</span> <span class="re0">var</span>=<span class="st0">'field-name'</span><span class="re2">&gt;</span> 
      <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">field-value</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
    <span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
  <span class="re1">&lt;/item<span class="re2">&gt;</span></span><span class="co3"> 
  . 
  . 
  . 
</span><span class="re1">&lt;/x<span class="re2">&gt;</span></span></pre></div></div>
<p>这些元素每个都必须包含一个或多个&lt;field/&gt;子元素。&lt;reported/&gt;元素为结果项定义数据格式，通过为每个项目指定所期望的字段。为此，除了'var'属性，&lt;field/&gt;元素还应该有'type'属性'label'属性；而且不能包含&lt;value/&gt;元素。在结果集中，每个&lt;item/&gt;元素定义一个项目，而且必须包含在&lt;reported/&gt;元素（虽然&lt;value/&gt;元素中的XML字符数据可能为空）中指定的字段。
</p>
<h2> <span class="mw-headline" id=".E6.95.B0.E6.8D.AE.E6.9C.89.E6.95.88.E6.80.A7">数据有效性</span></h2>
<p>数据有效性是表单处理实体（通常是一个服务器，服务，或bot）的责任，而不是表单提交实体（通常是一个由用户控制的客户端）。这有助于满足保持客户端实现简单的要求。如果表单处理实体确定提供的数据是无效的，它应该返回一个“不接受”的错误。选择在XMPP &lt;text/&gt;元素中提供文字说明，或识别问题的特殊应用子元素（参考<a rel="nofollow" class="external text" href="http://xmpp.org/extensions/xep-0086.html">Error Condition Mappings</a> <a href="/XEP-0004#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0004">11</a>中的映射和格式）。
</p>
<h2> <span class="mw-headline" id=".E4.BE.8B.E5.AD.90">例子</span></h2>
<p>对于下面的例子，我们假设存在一个bot hosting服务在Jabber network上，位于&lt;botster.shakespeare.lit&gt;。这个服务允许注册用户创建和配置新的bots，对已经存在的bots查找和交互，等等。我们假定这些交互的发生使用的Ad-Hoc Commands [12]协议，协议被用作表单的"wrapper"协议，受'jabber:x:data'命名空间限制。下面章节中的例子，体现了前文中描述的数据表单协议的大部分特性。
</p><p>注意：额外的例子可以通过各种“使用协议”的说明书中找到。如XEP-0045:Multi-User Chat和XEP-0055:Jabber Search。
</p>
<h3> <span class="mw-headline" id=".E9.85.8D.E7.BD.AE">配置</span></h3>
<dl><dd>第一步是为用户在主机上创建一个新的bot。我们假设这是通过发送一个“创建”命令给期望的bot来实现的:
</dd></dl>
<dl><dd><b>例1.用户请求Bot创建</b>
</dd></dl>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">from</span>=<span class="st0">'romeo@montague.net/home'</span> 
    <span class="re0">to</span>=<span class="st0">'joogle@botster.shakespeare.lit'</span> 
    <span class="re0">type</span>=<span class="st0">'get'</span> 
    <span class="re0">xml:lang</span>=<span class="st0">'en'</span> 
    <span class="re0">id</span>=<span class="st0">'create1'</span><span class="re2">&gt;</span> 
  <span class="re1">&lt;command</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/commands'</span>  
           <span class="re0">node</span>=<span class="st0">'create'</span> 
           <span class="re0">action</span>=<span class="st0">'execute'</span><span class="re2">/&gt;</span> 
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<dl><dd>然后主服务返回一个数据表单个用户:
</dd></dl>
<dl><dd><b>例2.服务返回一个Bot创建表单</b>
</dd></dl>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">from</span>=<span class="st0">'joogle@botster.shakespeare.lit'</span> 
    <span class="re0">to</span>=<span class="st0">'romeo@montague.net/home'</span> 
    <span class="re0">type</span>=<span class="st0">'result'</span> 
    <span class="re0">xml:lang</span>=<span class="st0">'en'</span> 
    <span class="re0">id</span>=<span class="st0">'create1'</span><span class="re2">&gt;</span> 
  <span class="re1">&lt;command</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/commands'</span> 
           <span class="re0">node</span>=<span class="st0">'create'</span> 
           <span class="re0">sessionid</span>=<span class="st0">'create:20040408T0128Z'</span> 
           <span class="re0">status</span>=<span class="st0">'executing'</span><span class="re2">&gt;</span> 
    <span class="re1">&lt;x</span> <span class="re0">xmlns</span>=<span class="st0">'jabber:x:data'</span> <span class="re0">type</span>=<span class="st0">'form'</span><span class="re2">&gt;</span> 
      <span class="re1">&lt;title<span class="re2">&gt;</span></span><span class="co3">Bot Configuration</span><span class="re1">&lt;/title<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;instructions<span class="re2">&gt;</span></span><span class="co3">Fill out this form to configure your new bot!</span><span class="re1">&lt;/instructions<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'hidden'</span> 
             <span class="re0">var</span>=<span class="st0">'FORM_TYPE'</span><span class="re2">&gt;</span> 
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">jabber:bot</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'fixed'</span><span class="re2">&gt;</span><span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">Section 1: Bot Info</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span><span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'text-single'</span> 
             <span class="re0">label</span>=<span class="st0">'The name of your bot'</span> 
             <span class="re0">var</span>=<span class="st0">'botname'</span><span class="re2">/&gt;</span> 
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'text-multi'</span> 
             <span class="re0">label</span>=<span class="st0">'Helpful description of your bot'</span> 
             <span class="re0">var</span>=<span class="st0">'description'</span><span class="re2">/&gt;</span> 
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'boolean'</span> 
             <span class="re0">label</span>=<span class="st0">'Public bot?'</span> 
             <span class="re0">var</span>=<span class="st0">'public'</span><span class="re2">&gt;</span> 
        <span class="re1">&lt;required</span><span class="re2">/&gt;</span> 
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'text-private'</span> 
             <span class="re0">label</span>=<span class="st0">'Password for special access'</span> 
             <span class="re0">var</span>=<span class="st0">'password'</span><span class="re2">/&gt;</span> 
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'fixed'</span><span class="re2">&gt;</span><span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">Section 2: Features</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span><span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'list-multi'</span> 
             <span class="re0">label</span>=<span class="st0">'What features will the bot support?'</span> 
             <span class="re0">var</span>=<span class="st0">'features'</span><span class="re2">&gt;</span> 
        <span class="re1">&lt;option</span> <span class="re0">label</span>=<span class="st0">'Contests'</span><span class="re2">&gt;</span><span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">contests</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span><span class="re1">&lt;/option<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;option</span> <span class="re0">label</span>=<span class="st0">'News'</span><span class="re2">&gt;</span><span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">news</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span><span class="re1">&lt;/option<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;option</span> <span class="re0">label</span>=<span class="st0">'Polls'</span><span class="re2">&gt;</span><span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">polls</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span><span class="re1">&lt;/option<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;option</span> <span class="re0">label</span>=<span class="st0">'Reminders'</span><span class="re2">&gt;</span><span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">reminders</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span><span class="re1">&lt;/option<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;option</span> <span class="re0">label</span>=<span class="st0">'Search'</span><span class="re2">&gt;</span><span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">search</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span><span class="re1">&lt;/option<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">news</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">search</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'fixed'</span><span class="re2">&gt;</span><span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">Section 3: Subscriber List</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span><span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'list-single'</span> 
             <span class="re0">label</span>=<span class="st0">'Maximum number of subscribers'</span> 
             <span class="re0">var</span>=<span class="st0">'maxsubs'</span><span class="re2">&gt;</span> 
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">20</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;option</span> <span class="re0">label</span>=<span class="st0">'10'</span><span class="re2">&gt;</span><span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">10</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span><span class="re1">&lt;/option<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;option</span> <span class="re0">label</span>=<span class="st0">'20'</span><span class="re2">&gt;</span><span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">20</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span><span class="re1">&lt;/option<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;option</span> <span class="re0">label</span>=<span class="st0">'30'</span><span class="re2">&gt;</span><span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">30</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span><span class="re1">&lt;/option<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;option</span> <span class="re0">label</span>=<span class="st0">'50'</span><span class="re2">&gt;</span><span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">50</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span><span class="re1">&lt;/option<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;option</span> <span class="re0">label</span>=<span class="st0">'100'</span><span class="re2">&gt;</span><span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">100</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span><span class="re1">&lt;/option<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;option</span> <span class="re0">label</span>=<span class="st0">'None'</span><span class="re2">&gt;</span><span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">none</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span><span class="re1">&lt;/option<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'fixed'</span><span class="re2">&gt;</span><span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">Section 4: Invitations</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span><span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'jid-multi'</span> 
             <span class="re0">label</span>=<span class="st0">'People to invite'</span> 
             <span class="re0">var</span>=<span class="st0">'invitelist'</span><span class="re2">&gt;</span> 
        <span class="re1">&lt;desc<span class="re2">&gt;</span></span><span class="co3">Tell all your friends about your new bot!</span><span class="re1">&lt;/desc<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
    <span class="re1">&lt;/x<span class="re2">&gt;</span></span> 
  <span class="re1">&lt;/command<span class="re2">&gt;</span></span> 
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<dl><dd>然后用户提交配置表单:
</dd></dl>
<dl><dd><b>例3.用户提交bot创建表单</b>
</dd></dl>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">from</span>=<span class="st0">'romeo@montague.net/home'</span> 
    <span class="re0">to</span>=<span class="st0">'joogle@botster.shakespeare.lit'</span> 
    <span class="re0">type</span>=<span class="st0">'set'</span> 
    <span class="re0">xml:lang</span>=<span class="st0">'en'</span> 
    <span class="re0">id</span>=<span class="st0">'create2'</span><span class="re2">&gt;</span> 
  <span class="re1">&lt;command</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/commands'</span> 
           <span class="re0">node</span>=<span class="st0">'create'</span> 
           <span class="re0">sessionid</span>=<span class="st0">'create:20040408T0128Z'</span><span class="re2">&gt;</span> 
    <span class="re1">&lt;x</span> <span class="re0">xmlns</span>=<span class="st0">'jabber:x:data'</span> <span class="re0">type</span>=<span class="st0">'submit'</span><span class="re2">&gt;</span> 
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'hidden'</span> <span class="re0">var</span>=<span class="st0">'FORM_TYPE'</span><span class="re2">&gt;</span> 
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">jabber:bot</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'text-single'</span> <span class="re0">var</span>=<span class="st0">'botname'</span><span class="re2">&gt;</span> 
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">The Jabber Google Bot</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'text-multi'</span> <span class="re0">var</span>=<span class="st0">'description'</span><span class="re2">&gt;</span> 
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">This bot enables you to send requests to</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">Google and receive the search results right</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">in your Jabber client. It</span><span class="co4">&amp;apos;</span><span class="co3"> really cool!</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">It even supports Google News!</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'boolean'</span> <span class="re0">var</span>=<span class="st0">'public'</span><span class="re2">&gt;</span> 
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">0</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'text-private'</span> <span class="re0">var</span>=<span class="st0">'password'</span><span class="re2">&gt;</span> 
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">v3r0na</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'list-multi'</span> <span class="re0">var</span>=<span class="st0">'features'</span><span class="re2">&gt;</span> 
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">news</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">search</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'list-single'</span> <span class="re0">var</span>=<span class="st0">'maxsubs'</span><span class="re2">&gt;</span> 
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">50</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'jid-multi'</span> <span class="re0">var</span>=<span class="st0">'invitelist'</span><span class="re2">&gt;</span> 
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">juliet@capulet.com</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">benvolio@montague.net</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
    <span class="re1">&lt;/x<span class="re2">&gt;</span></span> 
  <span class="re1">&lt;/command<span class="re2">&gt;</span></span> 
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<dl><dd>然后服务返回结果给用户:
</dd></dl>
<dl><dd><b>例4.服务返回bot创建的结果</b>
</dd></dl>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">from</span>=<span class="st0">'joogle@botster.shakespeare.lit'</span> 
    <span class="re0">to</span>=<span class="st0">'romeo@montague.net/home'</span> 
    <span class="re0">type</span>=<span class="st0">'result'</span> 
    <span class="re0">xml:lang</span>=<span class="st0">'en'</span> 
    <span class="re0">id</span>=<span class="st0">'create2'</span><span class="re2">&gt;</span> 
  <span class="re1">&lt;command</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/commands'</span> 
           <span class="re0">node</span>=<span class="st0">'create'</span> 
           <span class="re0">sessionid</span>=<span class="st0">'create:20040408T0128Z'</span> 
           <span class="re0">status</span>=<span class="st0">'completed'</span><span class="re2">&gt;</span> 
    <span class="re1">&lt;x</span> <span class="re0">xmlns</span>=<span class="st0">'jabber:x:data'</span> <span class="re0">type</span>=<span class="st0">'result'</span><span class="re2">&gt;</span> 
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'hidden'</span> <span class="re0">var</span>=<span class="st0">'FORM_TYPE'</span><span class="re2">&gt;</span> 
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">jabber:bot</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'text-single'</span> <span class="re0">var</span>=<span class="st0">'botname'</span><span class="re2">&gt;</span> 
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">The Jabber Google Bot</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'boolean'</span> <span class="re0">var</span>=<span class="st0">'public'</span><span class="re2">&gt;</span> 
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">0</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'text-private'</span> <span class="re0">var</span>=<span class="st0">'password'</span><span class="re2">&gt;</span> 
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">v3r0na</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'list-multi'</span> <span class="re0">var</span>=<span class="st0">'features'</span><span class="re2">&gt;</span> 
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">news</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">search</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'list-single'</span> <span class="re0">var</span>=<span class="st0">'maxsubs'</span><span class="re2">&gt;</span> 
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">50</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'jid-multi'</span> <span class="re0">var</span>=<span class="st0">'invitelist'</span><span class="re2">&gt;</span> 
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">juliet@capulet.com</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">benvolio@montague.net</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
    <span class="re1">&lt;/x<span class="re2">&gt;</span></span> 
  <span class="re1">&lt;/command<span class="re2">&gt;</span></span> 
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<h3> <span class="mw-headline" id=".E6.90.9C.E7.B4.A2">搜索</span></h3>
<p>既然用户已经创建了这个搜索bot,我们假设他所邀请的好友中的一个，决定通过发送一个搜索请求来试一试:
</p>
<dl><dd><b>例5.用户请求搜索表单</b>
</dd></dl>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">from</span>=<span class="st0">'juliet@capulet.com/chamber'</span> 
    <span class="re0">to</span>=<span class="st0">'joogle@botster.shakespeare.lit'</span> 
    <span class="re0">type</span>=<span class="st0">'get'</span> 
    <span class="re0">xml:lang</span>=<span class="st0">'en'</span> 
    <span class="re0">id</span>=<span class="st0">'search1'</span><span class="re2">&gt;</span> 
  <span class="re1">&lt;command</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/commands'</span>  
           <span class="re0">node</span>=<span class="st0">'search'</span> 
           <span class="re0">action</span>=<span class="st0">'execute'</span><span class="re2">/&gt;</span> 
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<dl><dd><b>例6.服务返回搜索表单</b>
</dd></dl>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">from</span>=<span class="st0">'joogle@botster.shakespeare.lit'</span> 
    <span class="re0">to</span>=<span class="st0">'juliet@capulet.com/chamber'</span> 
    <span class="re0">type</span>=<span class="st0">'result'</span> 
    <span class="re0">xml:lang</span>=<span class="st0">'en'</span> 
    <span class="re0">id</span>=<span class="st0">'search1'</span><span class="re2">&gt;</span> 
  <span class="re1">&lt;command</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/commands'</span>  
           <span class="re0">node</span>=<span class="st0">'search'</span> 
           <span class="re0">status</span>=<span class="st0">'executing'</span><span class="re2">&gt;</span> 
    <span class="re1">&lt;x</span> <span class="re0">xmlns</span>=<span class="st0">'jabber:x:data'</span> <span class="re0">type</span>=<span class="st0">'form'</span><span class="re2">&gt;</span> 
      <span class="re1">&lt;title<span class="re2">&gt;</span></span><span class="co3">Joogle Search</span><span class="re1">&lt;/title<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;instructions<span class="re2">&gt;</span></span><span class="co3">Fill out this form to search for information!</span><span class="re1">&lt;/instructions<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'text-single'</span> 
             <span class="re0">var</span>=<span class="st0">'search_request'</span><span class="re2">&gt;</span> 
        <span class="re1">&lt;required</span><span class="re2">/&gt;</span> 
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
    <span class="re1">&lt;/x<span class="re2">&gt;</span></span> 
  <span class="re1">&lt;/command<span class="re2">&gt;</span></span> 
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<dl><dd><b>例7.用户提交搜索表单</b>
</dd></dl>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">from</span>=<span class="st0">'juliet@capulet.com/chamber'</span> 
    <span class="re0">to</span>=<span class="st0">'joogle@botster.shakespeare.lit'</span> 
    <span class="re0">type</span>=<span class="st0">'get'</span> 
    <span class="re0">xml:lang</span>=<span class="st0">'en'</span> 
    <span class="re0">id</span>=<span class="st0">'search2'</span><span class="re2">&gt;</span> 
  <span class="re1">&lt;command</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/commands'</span>  
           <span class="re0">node</span>=<span class="st0">'search'</span><span class="re2">&gt;</span> 
    <span class="re1">&lt;x</span> <span class="re0">xmlns</span>=<span class="st0">'jabber:x:data'</span> <span class="re0">type</span>=<span class="st0">'submit'</span><span class="re2">&gt;</span> 
      <span class="re1">&lt;field</span> <span class="re0">type</span>=<span class="st0">'text-single'</span> <span class="re0">var</span>=<span class="st0">'search_request'</span><span class="re2">&gt;</span> 
        <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">verona</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
    <span class="re1">&lt;/x<span class="re2">&gt;</span></span> 
  <span class="re1">&lt;/command<span class="re2">&gt;</span></span> 
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<dl><dd><b>例8.服务返回搜索结果</b>
</dd></dl>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">from</span>=<span class="st0">'joogle@botster.shakespeare.lit'</span> 
    <span class="re0">to</span>=<span class="st0">'juliet@capulet.com/chamber'</span> 
    <span class="re0">type</span>=<span class="st0">'result'</span> 
    <span class="re0">xml:lang</span>=<span class="st0">'en'</span> 
    <span class="re0">id</span>=<span class="st0">'search2'</span><span class="re2">&gt;</span> 
  <span class="re1">&lt;command</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/commands'</span>  
           <span class="re0">node</span>=<span class="st0">'search'</span> 
           <span class="re0">status</span>=<span class="st0">'completed'</span><span class="re2">&gt;</span> 
    <span class="re1">&lt;x</span> <span class="re0">xmlns</span>=<span class="st0">'jabber:x:data'</span> <span class="re0">type</span>=<span class="st0">'result'</span><span class="re2">&gt;</span> 
      <span class="re1">&lt;title<span class="re2">&gt;</span></span><span class="co3">Joogle Search: verona</span><span class="re1">&lt;/title<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;reported<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;field</span> <span class="re0">var</span>=<span class="st0">'name'</span><span class="re2">/&gt;</span> 
        <span class="re1">&lt;field</span> <span class="re0">var</span>=<span class="st0">'url'</span><span class="re2">/&gt;</span> 
      <span class="re1">&lt;/reported<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;item<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;field</span> <span class="re0">var</span>=<span class="st0">'name'</span><span class="re2">&gt;</span> 
          <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">Comune di Verona - Benvenuti nel sito ufficiale</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;field</span> <span class="re0">var</span>=<span class="st0">'url'</span><span class="re2">&gt;</span> 
          <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">http://www.comune.verona.it/</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;/item<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;item<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;field</span> <span class="re0">var</span>=<span class="st0">'name'</span><span class="re2">&gt;</span> 
          <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">benvenuto!</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;field</span> <span class="re0">var</span>=<span class="st0">'url'</span><span class="re2">&gt;</span> 
          <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">http://www.hellasverona.it/</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;/item<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;item<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;field</span> <span class="re0">var</span>=<span class="st0">'name'</span><span class="re2">&gt;</span> 
          <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">Universita degli Studi di Verona - Home Page</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;field</span> <span class="re0">var</span>=<span class="st0">'url'</span><span class="re2">&gt;</span> 
          <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">http://www.univr.it/</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;/item<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;item<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;field</span> <span class="re0">var</span>=<span class="st0">'name'</span><span class="re2">&gt;</span> 
          <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">Aeroporti del Garda</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;field</span> <span class="re0">var</span>=<span class="st0">'url'</span><span class="re2">&gt;</span> 
          <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">http://www.aeroportoverona.it/</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;/item<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;item<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;field</span> <span class="re0">var</span>=<span class="st0">'name'</span><span class="re2">&gt;</span> 
          <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">Veronafiere - fiera di Verona</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;field</span> <span class="re0">var</span>=<span class="st0">'url'</span><span class="re2">&gt;</span> 
          <span class="re1">&lt;value<span class="re2">&gt;</span></span><span class="co3">http://www.veronafiere.it/</span><span class="re1">&lt;/value<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;/field<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;/item<span class="re2">&gt;</span></span> 
    <span class="re1">&lt;/x<span class="re2">&gt;</span></span> 
  <span class="re1">&lt;/command<span class="re2">&gt;</span></span> 
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<h2> <span class="mw-headline" id=".E6.9C.8D.E5.8A.A1.E5.8F.91.E7.8E.B0">服务发现</span></h2>
<p>如果一个实体支持包含受'jabber:x:data'命名空间限制的&lt;x/&gt;元素作为&lt;message/&gt;节直接子元素，它必须报告支持包含一个"jabber:x:data"（参看Protocol Namespaces中关于一个或多个永久命名空间的发行）的服务搜索特征，去响应服务搜索信息请求:
</p>
<dl><dd><b>例9.服务搜索信息请求</b>
</dd></dl>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'get'</span> 
    <span class="re0">from</span>=<span class="st0">'romeo@montague.net/orchard'</span> 
    <span class="re0">to</span>=<span class="st0">'juliet@capulet.com/balcony'</span> 
    <span class="re0">id</span>=<span class="st0">'disco1'</span><span class="re2">&gt;</span> 
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/disco#info'</span><span class="re2">/&gt;</span> 
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<dl><dd><b>例10.服务搜索信息响应</b>
</dd></dl>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'result'</span> 
    <span class="re0">from</span>=<span class="st0">'juliet@capulet.com/balcony'</span> 
    <span class="re0">to</span>=<span class="st0">'romeo@montague.net/orchard'</span> 
    <span class="re0">id</span>=<span class="st0">'disco1'</span><span class="re2">&gt;</span> 
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/disco#info'</span><span class="re2">&gt;</span><span class="co3"> 
    ... 
    </span><span class="re1">&lt;feature</span> <span class="re0">var</span>=<span class="st0">'jabber:x:data'</span><span class="re2">/&gt;</span><span class="co3"> 
    ... 
  </span><span class="re1">&lt;/query<span class="re2">&gt;</span></span> 
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>如果实体支持数据表单，间接的通过在wrapper命名空间中包含数据表单，它不能为'jabber:x:data'命名空间通知支持，因为在wrapper协助中的支持是隐性的。
</p>
<h2> <span class="mw-headline" id=".E5.AE.89.E5.85.A8.E6.80.A7.E8.80.83.E8.99.91">安全性考虑</span></h2>
<p>没有安全问题与上述的规范和XMPP Core中相关章节的描述有关。
</p>
<h2> <span class="mw-headline" id="IANA.E8.80.83.E8.99.91">IANA考虑</span></h2>
<p>这份文档与<a rel="nofollow" class="external text" href="http://www.iana.org/">Internet Assigned Numbers Authority (IANA)</a> <a href="/XEP-0004#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0004">13</a>无关。
</p>
<h2> <span class="mw-headline" id="XMPP.E6.B3.A8.E5.86.8C.E8.80.83.E8.99.91">XMPP注册考虑</span></h2>
<h3> <span class="mw-headline" id=".E5.8D.8F.E8.AE.AE.E5.91.BD.E5.90.8D.E7.A9.BA.E9.97.B4">协议命名空间</span></h3>
<p><a rel="nofollow" class="external text" href="http://xmpp.org/registrar/">XMPP Registrar</a> <a href="/XEP-0004#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0004">14</a>在它注册的协议命名空间中包含'jabber:x:data'命名空间。
</p>
<h3> <span class="mw-headline" id=".E5.8F.82.E6.95.B0.E5.80.BC">参数值</span></h3>
<p>XMPP注册员维持着一个与'jabber:x:data'命名空间相关的注册参数值。具体定义在<a rel="nofollow" class="external text" href="http://xmpp.org/extensions/xep-0068.html">Field Standardization for Data Forms</a> <a href="/XEP-0004#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0004">15</a>。注册的地方是&lt;<a rel="nofollow" class="external free" href="http://xmpp.org/registrar/formtypes.html">http://xmpp.org/registrar/formtypes.html</a>&gt;。
</p>
<h2> <span class="mw-headline" id="XML_.E6.9E.B6.E6.9E.84">XML 架构</span></h2>
<p>该架构是描述性的，不是规范的。
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;?xml</span> <span class="re0">version</span>=<span class="st0">'1.0'</span> <span class="re0">encoding</span>=<span class="st0">'UTF-8'</span><span class="re2">?&gt;</span> 
&#160;
<span class="re1">&lt;xs:schema</span> 
    <span class="re0">xmlns:xs</span>=<span class="st0">'http://www.w3.org/2001/XMLSchema'</span> 
    <span class="re0">targetNamespace</span>=<span class="st0">'jabber:x:data'</span> 
    <span class="re0">xmlns</span>=<span class="st0">'jabber:x:data'</span> 
    <span class="re0">elementFormDefault</span>=<span class="st0">'qualified'</span><span class="re2">&gt;</span> 
&#160;
  <span class="re1">&lt;xs:annotation<span class="re2">&gt;</span></span> 
    <span class="re1">&lt;xs:documentation<span class="re2">&gt;</span></span><span class="co3"> 
      The protocol documented by this schema is defined in 
      XEP-0004: http://www.xmpp.org/extensions/xep-0004.html 
    </span><span class="re1">&lt;/xs:documentation<span class="re2">&gt;</span></span> 
  <span class="re1">&lt;/xs:annotation<span class="re2">&gt;</span></span> 
&#160;
  <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'x'</span><span class="re2">&gt;</span> 
    <span class="re1">&lt;xs:complexType<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;xs:sequence<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'instructions'</span>  
                    <span class="re0">minOccurs</span>=<span class="st0">'0'</span>  
                    <span class="re0">maxOccurs</span>=<span class="st0">'unbounded'</span>  
                    <span class="re0">type</span>=<span class="st0">'xs:string'</span><span class="re2">/&gt;</span> 
        <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'title'</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span> <span class="re0">type</span>=<span class="st0">'xs:string'</span><span class="re2">/&gt;</span> 
        <span class="re1">&lt;xs:element</span> <span class="re0">ref</span>=<span class="st0">'field'</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span> <span class="re0">maxOccurs</span>=<span class="st0">'unbounded'</span><span class="re2">/&gt;</span> 
        <span class="re1">&lt;xs:element</span> <span class="re0">ref</span>=<span class="st0">'reported'</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span> <span class="re0">maxOccurs</span>=<span class="st0">'1'</span><span class="re2">/&gt;</span> 
        <span class="re1">&lt;xs:element</span> <span class="re0">ref</span>=<span class="st0">'item'</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span> <span class="re0">maxOccurs</span>=<span class="st0">'unbounded'</span><span class="re2">/&gt;</span> 
      <span class="re1">&lt;/xs:sequence<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;xs:attribute</span> <span class="re0">name</span>=<span class="st0">'type'</span> <span class="re0">use</span>=<span class="st0">'required'</span><span class="re2">&gt;</span> 
        <span class="re1">&lt;xs:simpleType<span class="re2">&gt;</span></span> 
          <span class="re1">&lt;xs:restriction</span> <span class="re0">base</span>=<span class="st0">'xs:NCName'</span><span class="re2">&gt;</span> 
            <span class="re1">&lt;xs:enumeration</span> <span class="re0">value</span>=<span class="st0">'cancel'</span><span class="re2">/&gt;</span> 
            <span class="re1">&lt;xs:enumeration</span> <span class="re0">value</span>=<span class="st0">'form'</span><span class="re2">/&gt;</span> 
            <span class="re1">&lt;xs:enumeration</span> <span class="re0">value</span>=<span class="st0">'result'</span><span class="re2">/&gt;</span> 
            <span class="re1">&lt;xs:enumeration</span> <span class="re0">value</span>=<span class="st0">'submit'</span><span class="re2">/&gt;</span> 
          <span class="re1">&lt;/xs:restriction<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;/xs:simpleType<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;/xs:attribute<span class="re2">&gt;</span></span> 
    <span class="re1">&lt;/xs:complexType<span class="re2">&gt;</span></span> 
  <span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span> 
&#160;
  <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'field'</span><span class="re2">&gt;</span> 
    <span class="re1">&lt;xs:complexType<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;xs:sequence<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'desc'</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span> <span class="re0">type</span>=<span class="st0">'xs:string'</span><span class="re2">/&gt;</span> 
        <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'required'</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span> <span class="re0">type</span>=<span class="st0">'empty'</span><span class="re2">/&gt;</span> 
        <span class="re1">&lt;xs:element</span> <span class="re0">ref</span>=<span class="st0">'value'</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span> <span class="re0">maxOccurs</span>=<span class="st0">'unbounded'</span><span class="re2">/&gt;</span> 
        <span class="re1">&lt;xs:element</span> <span class="re0">ref</span>=<span class="st0">'option'</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span> <span class="re0">maxOccurs</span>=<span class="st0">'unbounded'</span><span class="re2">/&gt;</span> 
      <span class="re1">&lt;/xs:sequence<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;xs:attribute</span> <span class="re0">name</span>=<span class="st0">'label'</span> <span class="re0">type</span>=<span class="st0">'xs:string'</span> <span class="re0">use</span>=<span class="st0">'optional'</span><span class="re2">/&gt;</span> 
      <span class="re1">&lt;xs:attribute</span> <span class="re0">name</span>=<span class="st0">'type'</span> <span class="re0">use</span>=<span class="st0">'optional'</span><span class="re2">&gt;</span> 
        <span class="re1">&lt;xs:simpleType<span class="re2">&gt;</span></span> 
          <span class="re1">&lt;xs:restriction</span> <span class="re0">base</span>=<span class="st0">'xs:NCName'</span><span class="re2">&gt;</span> 
            <span class="re1">&lt;xs:enumeration</span> <span class="re0">value</span>=<span class="st0">'boolean'</span><span class="re2">/&gt;</span> 
            <span class="re1">&lt;xs:enumeration</span> <span class="re0">value</span>=<span class="st0">'fixed'</span><span class="re2">/&gt;</span> 
            <span class="re1">&lt;xs:enumeration</span> <span class="re0">value</span>=<span class="st0">'hidden'</span><span class="re2">/&gt;</span> 
            <span class="re1">&lt;xs:enumeration</span> <span class="re0">value</span>=<span class="st0">'jid-multi'</span><span class="re2">/&gt;</span> 
            <span class="re1">&lt;xs:enumeration</span> <span class="re0">value</span>=<span class="st0">'jid-single'</span><span class="re2">/&gt;</span> 
            <span class="re1">&lt;xs:enumeration</span> <span class="re0">value</span>=<span class="st0">'list-multi'</span><span class="re2">/&gt;</span> 
            <span class="re1">&lt;xs:enumeration</span> <span class="re0">value</span>=<span class="st0">'list-single'</span><span class="re2">/&gt;</span> 
            <span class="re1">&lt;xs:enumeration</span> <span class="re0">value</span>=<span class="st0">'text-multi'</span><span class="re2">/&gt;</span> 
            <span class="re1">&lt;xs:enumeration</span> <span class="re0">value</span>=<span class="st0">'text-private'</span><span class="re2">/&gt;</span> 
            <span class="re1">&lt;xs:enumeration</span> <span class="re0">value</span>=<span class="st0">'text-single'</span><span class="re2">/&gt;</span> 
          <span class="re1">&lt;/xs:restriction<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;/xs:simpleType<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;/xs:attribute<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;xs:attribute</span> <span class="re0">name</span>=<span class="st0">'var'</span> <span class="re0">type</span>=<span class="st0">'xs:string'</span> <span class="re0">use</span>=<span class="st0">'optional'</span><span class="re2">/&gt;</span> 
    <span class="re1">&lt;/xs:complexType<span class="re2">&gt;</span></span> 
  <span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span> 
&#160;
  <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'option'</span><span class="re2">&gt;</span> 
    <span class="re1">&lt;xs:complexType<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;xs:sequence<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;xs:element</span> <span class="re0">ref</span>=<span class="st0">'value'</span><span class="re2">/&gt;</span> 
      <span class="re1">&lt;/xs:sequence<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;xs:attribute</span> <span class="re0">name</span>=<span class="st0">'label'</span> <span class="re0">type</span>=<span class="st0">'xs:string'</span> <span class="re0">use</span>=<span class="st0">'optional'</span><span class="re2">/&gt;</span> 
    <span class="re1">&lt;/xs:complexType<span class="re2">&gt;</span></span> 
  <span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span> 
&#160;
  <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'value'</span> <span class="re0">type</span>=<span class="st0">'xs:string'</span><span class="re2">/&gt;</span> 
&#160;
  <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'reported'</span><span class="re2">&gt;</span> 
    <span class="re1">&lt;xs:annotation<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;xs:documentation<span class="re2">&gt;</span></span><span class="co3"> 
        When contained in a &quot;reported&quot; element, the &quot;field&quot; element 
        SHOULD NOT contain a &quot;value&quot; child. 
      </span><span class="re1">&lt;/xs:documentation<span class="re2">&gt;</span></span> 
    <span class="re1">&lt;/xs:annotation<span class="re2">&gt;</span></span> 
    <span class="re1">&lt;xs:complexType<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;xs:sequence<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;xs:element</span> <span class="re0">ref</span>=<span class="st0">'field'</span> <span class="re0">maxOccurs</span>=<span class="st0">'unbounded'</span><span class="re2">/&gt;</span> 
      <span class="re1">&lt;/xs:sequence<span class="re2">&gt;</span></span> 
    <span class="re1">&lt;/xs:complexType<span class="re2">&gt;</span></span> 
  <span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span> 
&#160;
  <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'item'</span><span class="re2">&gt;</span> 
    <span class="re1">&lt;xs:complexType<span class="re2">&gt;</span></span> 
      <span class="re1">&lt;xs:sequence<span class="re2">&gt;</span></span> 
        <span class="re1">&lt;xs:element</span> <span class="re0">ref</span>=<span class="st0">'field'</span> <span class="re0">maxOccurs</span>=<span class="st0">'unbounded'</span><span class="re2">/&gt;</span> 
      <span class="re1">&lt;/xs:sequence<span class="re2">&gt;</span></span> 
    <span class="re1">&lt;/xs:complexType<span class="re2">&gt;</span></span> 
  <span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span> 
&#160;
  <span class="re1">&lt;xs:simpleType</span> <span class="re0">name</span>=<span class="st0">'empty'</span><span class="re2">&gt;</span> 
    <span class="re1">&lt;xs:restriction</span> <span class="re0">base</span>=<span class="st0">'xs:string'</span><span class="re2">&gt;</span> 
      <span class="re1">&lt;xs:enumeration</span> <span class="re0">value</span>=<span class="st0">''</span><span class="re2">/&gt;</span> 
    <span class="re1">&lt;/xs:restriction<span class="re2">&gt;</span></span> 
  <span class="re1">&lt;/xs:simpleType<span class="re2">&gt;</span></span> 
&#160;
<span class="re1">&lt;/xs:schema<span class="re2">&gt;</span></span></pre></div></div>
<h2> <span class="mw-headline" id=".E6.9C.80.E7.BB.88.E7.8A.B6.E6.80.81.E7.9A.84.E4.BF.AE.E6.94.B9">最终状态的修改</span></h2>
<p>当本规范已经是最终状态时，下面的实体协议已经做了修改：
</p>
<ul><li> 指定的'var'属性是所有字段类型所必须的，除了"fixed", 因为'var'属性是可选的。
</li></ul>
<ul><li> 通过服务搜索指定何时去通知支持。
</li></ul>
<ul><li> 移除引用&lt;presence/&gt;节。
</li></ul>
<h2> <span class="mw-headline" id=".E8.8D.89.E7.A8.BF.E7.8A.B6.E6.80.81.E7.9A.84.E4.BF.AE.E6.94.B9">草稿状态的修改</span></h2>
<p>当本规范在草稿状态时，下面的实体协议已经做了修改：
</p>
<ul><li> &lt;x/&gt;元素可能直接包含在&lt;message/&gt;和&lt;presence/&gt;节中。
</li><li> &lt;x/&gt;元素可能包含一个&lt;title/&gt;子元素，在表单或结果中。
</li><li> &lt;x/&gt;元素必须拥有一个‘类型’属性。
</li><li> &lt;field/&gt;元素可能是类型='jid-single'。
</li><li> 结果可能以&lt;item/&gt;标签的方式返回报告。
</li><li> 结果可能包含一个&lt;reported/&gt;元素的结果集。
</li><li> &lt;reported/&gt;字段可能拥有一个‘类型’属性，提供如何与数据交互的提示（类型='jid-single'是最有用的）。
</li></ul>
<h2> <span class="mw-headline" id=".E9.99.84.E5.BD.95">附录</span></h2>
<h3> <span class="mw-headline" id=".E9.99.84.E5.BD.95A:.E6.96.87.E6.A1.A3.E4.BF.A1.E6.81.AF">附录A:文档信息</span></h3>
<p>系列：<a rel="nofollow" class="external text" href="http://xmpp.org/extensions/">XEP</a>
</p><p>序号：0004
</p><p>发布者：<a rel="nofollow" class="external text" href="http://xmpp.org/xsf/">XMPP标准基金会</a>
</p><p>状态：<a rel="nofollow" class="external text" href="http://www.xmpp.org/extensions/xep-0001.html#states-Final">终结版</a>
</p><p>类型：<a rel="nofollow" class="external text" href="http://www.xmpp.org/extensions/xep-0001.html#types-Standards%20Track">标准跟踪</a>
</p><p>版本：2.9
</p><p>最后更新：2007-07-13
</p><p>批准机构：<a rel="nofollow" class="external text" href="http://xmpp.org/council/">XMPP理事会</a>
</p><p>依赖标准：<a href="/RFC3920" title="RFC3920">XMPP Core</a>
</p><p>替代标准：无
</p><p>被替代标准：无
</p><p>缩略名：x-data
</p><p>XML架构:&lt;<a rel="nofollow" class="external free" href="http://www.xmpp.org/schemas/x-data.xsd">http://www.xmpp.org/schemas/x-data.xsd</a>&gt;
</p><p>原文控制： <a rel="nofollow" class="external text" href="http://svn.xmpp.org:18080/browse/XMPP/trunk/extensions/xep-0004.xml">HTML</a> <a rel="nofollow" class="external text" href="http://svn.xmpp.org:18080//changelog/~rss/XMPP/trunk/extensions/xep-0004.xml/rss.xml">RSS</a>
</p><p>本文的其它格式： <a rel="nofollow" class="external text" href="http://xmpp.org/extensions/xep-0004.xml">XML</a> <a rel="nofollow" class="external text" href="http://xmpp.org/extensions/xep-0004.pdf">PDF</a>
</p><p><br />
</p>
<h3> <span class="mw-headline" id=".E9.99.84.E5.BD.95B:.E4.BD.9C.E8.80.85.E4.BF.A1.E6.81.AF">附录B:作者信息</span></h3>
<p><b>Ryan Eatmon</b>
</p><p>Email: <a rel="nofollow" class="external text" href="mailto:reatmon@jabber.org">reatmon@jabber.org</a>
</p><p>JabberID: reatmon@jabber.org
</p><p><br />
<b>Joe Hildebrand</b>
</p><p>Email: <a rel="nofollow" class="external text" href="mailto:jhildebr@cisco.com">jhildebr@cisco.com</a>
</p><p>JabberID: hildjj@jabber.org
</p><p><br />
<b>Jeremie Miller</b>
</p><p>Email: <a rel="nofollow" class="external text" href="mailto:jer@jabber.org">jer@jabber.org</a>
</p><p>JabberID: jer@jabber.org
</p><p><br />
<b>Thomas Muldowney</b>
</p><p>Email: <a rel="nofollow" class="external text" href="mailto:temas@jabber.org">temas@jabber.org</a>
</p><p>JabberID: temas@jabber.org
</p><p><br />
<b>Peter Saint-Andre</b>
</p><p>Email: <a rel="nofollow" class="external text" href="mailto:stpeter@jabber.org">stpeter@jabber.org</a>
</p><p>JabberID: stpeter@jabber.org
</p><p>URI: <a rel="nofollow" class="external free" href="https://stpeter.im/">https://stpeter.im/</a>
</p>
<h3> <span class="mw-headline" id=".E9.99.84.E5.BD.95C:.E6.B3.95.E5.BE.8B.E9.80.9A.E5.91.8A">附录C:法律通告</span></h3>
<p><b>版权</b>
</p><p>XMPP扩展协议的版权(1999-2008)归XMPP标准化基金会(XSF)所有.
</p><p><b>权限</b>
</p><p>特此授权,费用全免,对任何获得本协议副本的人,对使用本协议没有限制,包括不限制在软件程序中实现本协议,不限制在网络服务中布署本协议,不限制拷贝,修改,合并,发行,翻译,分发,转授,或销售本协议的副本,被允许使用本协议做了以上工作的人士,应接受前述的版权声明和本许可通知并且必须包含在所有的副本或实质性部分的规格中.除非单独的许可，被重新分发的修改工作，不得含有关于作者，标题，编号，或出版者的规格的误导性资料，并不得宣称修改工作是由本文的作者，作者所属的任何组织或项目，或XMPP标准基金会签注。
</p><p><b>免责声明'</b>
</p><p><b>## 特别注意：本协议是提供的“原样”的基础，没有担保或任何形式的条件，明示或暗示，包括，但不限于任何担保或关于名称，非侵权性，适销性或适合作某一特定目的的条件. ##</b>
</p><p><b>责任限制</b>
</p><p>在任何情况下以及没有任何法律规定时，不论是侵权行为（包括疏忽），合同或其它方面，除非根据适用法律的要求（如蓄意和有严重疏忽行为）或以书面形式同意，XMPP标准基金会或任何作者不对本协议所造成的损失承担责任，包括任何直接，间接，特殊，偶发，或任何从本协议出，入，连接的字符产生的或实现，布署或其他对本协议的使用导致的相应的损害赔偿（包括但不限于善意的损失，停止作业，电脑失灵或故障，或任何和所有其他商业损害或损失） ，即使XMPP标准基金会或作者已被告知此类损害的可能性。
</p><p><b>知识产权的一致性</b>
</p><p>XMPP扩展协议完全遵守XSF的知识产权策略(可在&lt;<a rel="nofollow" class="external free" href="http://www.xmpp.org/extensions/ipr-policy.shtml">http://www.xmpp.org/extensions/ipr-policy.shtml</a>&gt;找到副本或写信给XMPP标准基金会, 1899 Wynkoop Street, Suite 600, Denver, CO 80202 USA).
</p>
<h3> <span class="mw-headline" id=".E9.99.84.E5.BD.95D:.E5.92.8CXMPP.E7.9A.84.E5.85.B3.E7.B3.BB">附录D:和XMPP的关系</span></h3>
<p>可扩展的消息和出席信息协议 (XMPP) 定义于 XMPP Core (<a class="external mw-magiclink-rfc" href="//tools.ietf.org/html/rfc3920">RFC 3920</a>) 和 XMPP IM (<a class="external mw-magiclink-rfc" href="//tools.ietf.org/html/rfc3921">RFC 3921</a>) 规范里，由 XMPP标准基金会贡献到由依据<a class="external mw-magiclink-rfc" href="//tools.ietf.org/html/rfc2026">RFC 2026</a>成立的互联网工程人物组管理的互联网标准流程 Internet Standards Process. 本文定义的任何协议已在互联网标准流程之外开发，并且被理解为 XMPP 的扩展而不是一个XMPP本身的演化, 开发, 或修改.
</p>
<h3> <span class="mw-headline" id=".E9.99.84.E5.BD.95E:.E8.AE.A8.E8.AE.BA.E5.9C.B0.E7.82.B9">附录E:讨论地点</span></h3>
<p>主要的XMPP扩展协议讨论地点是 &lt;standards@xmpp.org&gt; 讨论列表.
</p><p>在 xmpp.org 的其它讨论列表中的讨论可能也有合适的; 所有的列表见 &lt;<a rel="nofollow" class="external free" href="http://xmpp.org/about/discuss.shtml">http://xmpp.org/about/discuss.shtml</a>&gt; .
</p><p>勘误表可以发送邮件到 &lt;editor@xmpp.org&gt;.
</p>
<h3> <span class="mw-headline" id=".E9.99.84.E5.BD.95F:.E9.9C.80.E6.B1.82.E4.B8.80.E8.87.B4.E6.80.A7">附录F:需求一致性</span></h3>
<p>以下用于本文的需求关键字的解释见于 <a rel="nofollow" class="external text" href="http://www.ietf.org/rfc/rfc2119.txt">RFC 2119</a>: "MUST", "SHALL", "REQUIRED"; "MUST NOT", "SHALL NOT"; "SHOULD", "RECOMMENDED"; "SHOULD NOT", "NOT RECOMMENDED"; "MAY", "OPTIONAL".
</p><p><br />
</p>
<h3> <span class="mw-headline" id=".E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8">附录G:备注</span></h3>
<ol><li>XEP-0077: In-Band Registration &lt;<a rel="nofollow" class="external free" href="http://xmpp.org/extensions/xep-0077.html">http://xmpp.org/extensions/xep-0077.html</a>&gt;.
</li><li>XEP-0055: Jabber Search &lt;<a rel="nofollow" class="external free" href="http://xmpp.org/extensions/xep-0055.html">http://xmpp.org/extensions/xep-0055.html</a>&gt;.
</li><li>XEP-0045: Multi-User Chat &lt;<a rel="nofollow" class="external free" href="http://xmpp.org/extensions/xep-0045.html">http://xmpp.org/extensions/xep-0045.html</a>&gt;.
</li><li>XEP-0030: Service Discovery &lt;<a rel="nofollow" class="external free" href="http://xmpp.org/extensions/xep-0030.html">http://xmpp.org/extensions/xep-0030.html</a>&gt;.
</li><li>XForms 1.0 &lt;<a rel="nofollow" class="external free" href="http://www.w3.org/TR/xforms">http://www.w3.org/TR/xforms</a>&gt;.
</li><li>XHTML 1.0 &lt;<a rel="nofollow" class="external free" href="http://www.w3.org/TR/xhtml1">http://www.w3.org/TR/xhtml1</a>&gt;.
</li><li>Modularization of XHTML &lt;<a rel="nofollow" class="external free" href="http://www.w3.org/TR/2004/WD-xhtml-modularization-20040218/">http://www.w3.org/TR/2004/WD-xhtml-modularization-20040218/</a>&gt;.
</li><li><a class="external mw-magiclink-rfc" href="//tools.ietf.org/html/rfc3920">RFC 3920</a>: Extensible Messaging and Presence Protocol (XMPP): Core &lt;<a rel="nofollow" class="external free" href="http://tools.ietf.org/html/rfc3920">http://tools.ietf.org/html/rfc3920</a>&gt;.
</li><li>XML Schema Part 2: Datatypes &lt;<a rel="nofollow" class="external free" href="http://www.w3.org/TR/xmlschema-2/">http://www.w3.org/TR/xmlschema-2/</a>&gt;.
</li><li>In accordance with Section 3.2.2.1 of XML Schema Part 2: Datatypes, the allowable lexical representations for the xs:boolean datatype are the strings "0" and "false" for the concept 'false' and the strings "1" and "true" for the concept 'true'; implementations MUST support both styles of lexical representation.
</li><li>XEP-0086: Error Condition Mappings &lt;<a rel="nofollow" class="external free" href="http://xmpp.org/extensions/xep-0086.html">http://xmpp.org/extensions/xep-0086.html</a>&gt;.
</li><li>XEP-0050: Ad-Hoc Commands &lt;<a rel="nofollow" class="external free" href="http://xmpp.org/extensions/xep-0050.html">http://xmpp.org/extensions/xep-0050.html</a>&gt;.
</li><li>The Internet Assigned Numbers Authority (IANA) is the central coordinator for the assignment of unique parameter values for Internet protocols, such as port numbers and URI schemes. For further information, see &lt;<a rel="nofollow" class="external free" href="http://www.iana.org/">http://www.iana.org/</a>&gt;.
</li><li>The XMPP Registrar maintains a list of reserved protocol namespaces as well as registries of parameters used in the context of XMPP extension protocols approved by the XMPP Standards Foundation. For further information, see &lt;<a rel="nofollow" class="external free" href="http://xmpp.org/registrar/">http://xmpp.org/registrar/</a>&gt;.
</li><li>XEP-0068: Field Data Standardization for Data Forms &lt;<a rel="nofollow" class="external free" href="http://xmpp.org/extensions/xep-0068.html">http://xmpp.org/extensions/xep-0068.html</a>&gt;.
</li></ol>
<h3> <span class="mw-headline" id=".E9.99.84.E5.BD.95H:.E4.BF.AE.E8.AE.A2.E5.8E.86.E5.8F.B2">附录H:修订历史</span></h3>
<p>注意: 
</p><p><b>版本 2.9 (2007-08-13)</b>
</p><p>Clarified the definition and handling of the list-multi and list-single field types; specified that hidden field values should not be modified unless such behavior is defined for the using protocol; specified that a submission should include all fields provided in the empty form and may include additional fields, but that additional fields must be ignored if not understood by the form-processing entity.
</p><p>(psa)
</p><p><b>版本 2.8 (2007-05-21)</b>
</p><p>Removed mentions of presence stanzas; added section on discovering support; added section on substantive changes in Final state.
</p><p>(psa)
</p><p><b>版本 2.7 (2006-01-25)</b>
</p><p>Incorporated errata: (1) clarified rules regarding inclusion of option and value elements depending on field type; (2) clarified handling of default values; (3) added value elements to list-multi field in Example 2; (4) harmonized spelling of form-processing entity and form-submitting entity.
</p><p>(psa)
</p><p>Version 2.6 (2004-10-13)
Incorporated errata: (1) corrected syntax of &lt;reported/&gt; element (&lt;field/&gt; element should not contain a &lt;value/&gt; child); (2) corrected Example 8.
</p><p>(psa) 
Version 2.5 (2004-05-07)
Clarified terminology regarding form-processing entities and form-submitting entities; corrected several small errors in the schema.
</p><p>(psa) 
Version 2.4 (2004-05-04)
Per discussion by the authors and Jabber Council, specified that the 'var' attribute is required for all field types except "fixed", for which the 'var' attribute is optional.
</p><p>(psa) 
Version 2.3 (2004-03-31)
Formalization and further editorial revisions.
</p><p>(psa) 
Version 2.2 (2004-01-22)
Editorial revisions.
</p><p>(psa) 
Version 2.1 (2003-02-16)
Added schema.
</p><p>(psa) 
Version 2.0 (2002-12-09)
Per a vote of the Jabber Council, changed status to Final.
</p><p>(psa) 
Version 1.1 (2002-10-15)
Call for Experience changes (see Changes in Draft State section). This version voted to Final on 2002-12-09.
</p><p>(rwe) 
Version 1.0 (2002-04-24)
Per a vote of the Jabber Council, changed status to Draft.
</p><p>(psa) 
Version 0.6 (2002-03-15)
Protocol tweaks based on Standards list discussion.
</p><p>(rwe) 
Version 0.5 (2002-02-06)
Protocol tweaks based on implementation and discussion.
</p><p>(rwe) 
Version 0.4 (2001-11-16)
Major redesign to attempt to clarify the scope of this document and limit what it is trying to solve.
</p><p>(rwe) 
Version 0.3 (2001-07-23)
Protocol update
</p><p>(rwe) 
Version 0.2 (2001-06-29)
Protocol update and DocBook version
</p><p>(rwe) 
Version 0.1 (2001-01-25)
Initial release
</p><p>(rwe)
</p>
<!-- 
NewPP limit report
Preprocessor node count: 224/1000000
Post-expand include size: 3174/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key mediawiki:pcache:idhash:41-0!*!0!!zh-cn!*!* and timestamp 20160221182313 -->
</div><div class="printfooter">
来自“<a href="http://wiki.jabbercn.org/index.php?title=XEP-0004&amp;oldid=3233">http://wiki.jabbercn.org/index.php?title=XEP-0004&amp;oldid=3233</a>”</div>
		<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks"><a href="/%E7%89%B9%E6%AE%8A:%E9%A1%B5%E9%9D%A2%E5%88%86%E7%B1%BB" title="特殊:页面分类">2个分类</a>: <ul><li><a href="/%E5%88%86%E7%B1%BB:XMPP%E6%89%A9%E5%B1%95" title="分类:XMPP扩展">XMPP扩展</a></li><li><a href="/%E5%88%86%E7%B1%BB:%E5%B7%B2%E7%BF%BB%E8%AF%91" title="分类:已翻译">已翻译</a></li></ul></div></div>		<!-- end content -->
				<div class="visualClear"></div>
	</div>
</div></div>
<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>查看</h5>
		<div class="pBody">
			<ul>
				<li id="ca-nstab-main" class="selected"><a href="/XEP-0004" title="查看内容页面 [c]" accesskey="c">页面</a></li>
				<li id="ca-talk" class="new"><a href="/index.php?title=%E8%AE%A8%E8%AE%BA:XEP-0004&amp;action=edit&amp;redlink=1" title="关于内容页面的讨论 [t]" accesskey="t">讨论</a></li>
				<li id="ca-viewsource"><a href="/index.php?title=XEP-0004&amp;action=edit" title="本页面已被保护。你可以查看其源代码。 [e]" accesskey="e">查看源代码</a></li>
				<li id="ca-history"><a href="/index.php?title=XEP-0004&amp;action=history" title="本页面的早前修订版本 [h]" accesskey="h">历史</a></li>
			</ul>
		</div>
	</div>

	<div class="portlet" id="p-personal">
		<h5>个人工具</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="/index.php?title=%E7%89%B9%E6%AE%8A:%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95&amp;returnto=XEP-0004" title="我们希望您可以登入，但不强求 [o]" accesskey="o">登录/创建账户</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a title="访问首页" style="background-image: url(/skins/common/images/xmppcn.png);" href="/%E9%A6%96%E9%A1%B5"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div class="generated-sidebar portlet" id="p-navigation">
		<h5>导航</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage-description"><a href="/%E9%A6%96%E9%A1%B5" title="访问首页 [z]" accesskey="z">首页</a></li>
				<li id="n-portal"><a href="/Jabber/XMPP%E4%B8%AD%E6%96%87%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92:%E7%A4%BE%E5%8C%BA%E4%B8%93%E9%A1%B5" title="关于本项目，你可以做什么，在哪里找到你需要的事物">社区专页</a></li>
				<li id="n-currentevents"><a href="/Jabber/XMPP%E4%B8%AD%E6%96%87%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92:%E6%96%B0%E9%97%BB%E5%8A%A8%E6%80%81" title="查看当前事件的背景信息">新闻动态</a></li>
				<li id="n-recentchanges"><a href="/%E7%89%B9%E6%AE%8A:%E6%9C%80%E8%BF%91%E6%9B%B4%E6%94%B9" title="本wiki的最近更改列表 [r]" accesskey="r">最近更改</a></li>
				<li id="n-randompage"><a href="/%E7%89%B9%E6%AE%8A:%E9%9A%8F%E6%9C%BA%E9%A1%B5%E9%9D%A2" title="随机进入一个页面 [x]" accesskey="x">随机页面</a></li>
				<li id="n-help"><a href="/%E5%B8%AE%E5%8A%A9:%E7%9B%AE%E5%BD%95" title="寻求帮助的地方">帮助</a></li>
			</ul>
		</div>
	</div>
	<div class="generated-sidebar portlet" id="p-XMPP.E8.B5.84.E6.BA.90">
		<h5>XMPP资源</h5>
		<div class='pBody'>
			<ul>
				<li id="n-XMPP.E5.85.AC.E5.85.B1.E6.9C.8D.E5.8A.A1"><a href="/XMPP%E5%85%AC%E5%85%B1%E6%9C%8D%E5%8A%A1">XMPP公共服务</a></li>
				<li id="n-XMPP.E5.AE.A2.E6.88.B7.E7.AB.AF.E8.BD.AF.E4.BB.B6"><a href="/XMPP%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%BD%AF%E4%BB%B6">XMPP客户端软件</a></li>
				<li id="n-XMPP.E6.9C.8D.E5.8A.A1.E5.99.A8.E8.BD.AF.E4.BB.B6"><a href="/XMPP%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BD%AF%E4%BB%B6">XMPP服务器软件</a></li>
				<li id="n-.E5.8F.8B.E6.83.85.E9.93.BE.E6.8E.A5"><a href="/%E5%8F%8B%E6%83%85%E9%93%BE%E6%8E%A5">友情链接</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		<h5><label for="searchInput">搜索</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/index.php" id="searchform">
				<input type='hidden' name="title" value="特殊:搜索"/>
				<input type="search" name="search" title="在Jabber/XMPP中文翻译计划中搜索 [f]" accesskey="f" id="searchInput" />
				<input type="submit" name="go" value="提交" title="如果相同的标题存在的话便直接前往该页面" id="searchGoButton" class="searchButton" />&#160;
				<input type="submit" name="fulltext" value="搜索" title="搜索含这些文字的页面" id="mw-searchButton" class="searchButton" />
			</form>
		</div>
	</div>




<script src="http://yacy.jabbercn.org:8090/yacy/ui/js/jquery-1.3.2.min.js" type="text/javascript"></script>
<script>
   $(document).ready(function() {
      yconf = {
         url : 'http://yacy.jabbercn.org:8090/',
         theme : 'smoothness',
         title : 'XMPP搜索大全',
         logo     : 'http://yacy.jabbercn.org:8090/env/grafics/50-xmpp_logo.jpg',
         link     : 'http://wiki.jabbercn.org',
         urlmaskfilter : '.*',
         width : 500,
         height : 500
      };
      $.getScript(yconf.url+'/yacy/ui/js/yacyui-portalsearch.js', function(){});
   });
</script>
        <div id="p-search" class="portlet">
<h5>站外搜索</h5>
<div id="yacylivesearch" class="pBody">
   <form id="ysearch" method="get" accept-charset="UTF-8" action="http://yacy.jabbercn.org:8090/yacysearch.html">
      <input name="search" id="yquery" type="text" size="8" maxlength="80" value=""/>
      <input type="hidden" name="verify" value="false" />
      <input type="hidden" name="maximumRecords" value="10" />
      <input type="hidden" name="resource" value="local" />
      <input type="hidden" name="urlmaskfilter" value=".*" />
      <input type="hidden" name="prefermaskfilter" value="" />
      <input type="hidden" name="former" value="" />
      <input type="hidden" name="display" value="2" />
      <input type="hidden" name="nav" value="all" />
      <input type="submit" name="Enter" value="搜索" class="searchButton" />
   </form>
</div>
</div>



	<div class="portlet" id="p-tb">
		<h5>工具箱</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="/%E7%89%B9%E6%AE%8A:%E9%93%BE%E5%85%A5%E9%A1%B5%E9%9D%A2/XEP-0004" title="所有链入本页的wiki页面列表 [j]" accesskey="j">链入页面</a></li>
				<li id="t-recentchangeslinked"><a href="/%E7%89%B9%E6%AE%8A:%E9%93%BE%E5%87%BA%E6%9B%B4%E6%94%B9/XEP-0004" title="本页链入的页面的最近更改 [k]" accesskey="k">链出更改</a></li>
				<li id="t-specialpages"><a href="/%E7%89%B9%E6%AE%8A:%E7%89%B9%E6%AE%8A%E9%A1%B5%E9%9D%A2" title="所有特殊页面列表 [q]" accesskey="q">特殊页面</a></li>
				<li><a href="/index.php?title=XEP-0004&amp;printable=yes" rel="alternate">可打印版</a></li>
				<li id="t-permalink"><a href="/index.php?title=XEP-0004&amp;oldid=3233" title="本页面该修订版本的永久链接">永久链接</a></li>
			</ul>
		</div>
	</div>
</div><!-- end of the left (by default at least) column -->
<div class="visualClear"></div>
<div id="footer">
	<div id="f-copyrightico">
		<a href="http://creativecommons.org/licenses/by-nc-sa/3.0/"><img src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" alt="Attribution-Noncommercial-Share Alike 3.0 Unported" width="88" height="31" /></a>
	</div>
	<div id="f-poweredbyico">
		<a href="http://www.mediawiki.org/"><img src="/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
	</div>
	<ul id="f-list">
		<li id="lastmod"> 本页面最后修订于2013年7月24日 (星期三) 23:49。</li>
		<li id="viewcount">此页面已被浏览过45,807次。</li>
		<li id="copyright">本站全部文字内容使用<a class="external" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Attribution-Noncommercial-Share Alike 3.0 Unported</a>授权。</li>
		<li id="privacy"><a href="/Jabber/XMPP%E4%B8%AD%E6%96%87%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92:%E9%9A%90%E7%A7%81%E6%9D%83%E6%94%BF%E7%AD%96" title="Jabber/XMPP中文翻译计划:隐私权政策">隐私权政策</a></li>
		<li id="about"><a href="/Jabber/XMPP%E4%B8%AD%E6%96%87%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92:%E5%85%B3%E4%BA%8E" title="Jabber/XMPP中文翻译计划:关于">关于Jabber/XMPP中文翻译计划</a></li>
		<li id="disclaimer"><a href="/Jabber/XMPP%E4%B8%AD%E6%96%87%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92:%E5%85%8D%E8%B4%A3%E5%A3%B0%E6%98%8E" title="Jabber/XMPP中文翻译计划:免责声明">免责声明</a></li>
	</ul>
</div>
</div>
<script>if(window.mw){
	mw.loader.load(["mediawiki.user", "mediawiki.util", "mediawiki.page.ready", "mediawiki.legacy.wikibits", "mediawiki.legacy.ajax", "mediawiki.legacy.mwsuggest"]);
}
</script>
<script>if(window.mw){
	mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"externaldiff":0,"externaleditor":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"highlightbroken":1,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"quickbar":5,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"showjumplinks":1,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"monobook","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,
	"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"variant":"zh-cn","language":"zh-cn","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false});;mw.user.tokens.set({"editToken":"+\\","watchToken":false});;mw.loader.state({"user.options":"ready","user.tokens":"ready"});
	
	/* cache key: mediawiki:resourceloader:filter:minify-js:4:42c4e9caefe8ca663d220ee0c286ac74 */
}
</script><!-- Piwik -->
<script type="text/javascript">
/* <![CDATA[ */
var pkBaseURL = (("https:" == document.location.protocol) ? "https://rtp.rooyee.im/piwik/" : "http://rtp.rooyee.im/piwik/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
/* ]]> */
</script>
<script type="text/javascript">
/* <![CDATA[ */
try {
var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 5);
piwikTracker.setDocumentTitle("XEP-0004");
piwikTracker.setIgnoreClasses("image");

piwikTracker.trackPageView();
piwikTracker.enableLinkTracking();
} catch( err ) {}
/* ]]> */
</script><noscript><p><img src="http://rtp.rooyee.im/piwik/piwik.php?idsite=5" style="border:0" alt=""/></p></noscript>
<!-- /Piwik --><!-- Served in 0.036 secs. --></body></html>