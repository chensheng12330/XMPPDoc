<!DOCTYPE html>
<html lang="zh-cn" dir="ltr" class="client-nojs">
<head>
<title>XEP-0085 - Jabber/XMPP中文翻译计划</title>
<meta charset="UTF-8" />
<meta name="generator" content="MediaWiki 1.18.2" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="Jabber/XMPP中文翻译计划 (zh-cn)" />
<link rel="EditURI" type="application/rsd+xml" href="http://wiki.jabbercn.org/api.php?action=rsd" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" />
<link rel="alternate" type="application/atom+xml" title="Jabber/XMPP中文翻译计划的Atom" href="/index.php?title=%E7%89%B9%E6%AE%8A:%E6%9C%80%E8%BF%91%E6%9B%B4%E6%94%B9&amp;feed=atom" />
<link rel="stylesheet" href="/load.php?debug=false&amp;lang=zh-cn&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cskins.monobook&amp;only=styles&amp;skin=monobook&amp;*" />
<!--[if lt IE 5.5000]><link rel="stylesheet" href="/skins/monobook/IE50Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 5.5000]><link rel="stylesheet" href="/skins/monobook/IE55Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 6]><link rel="stylesheet" href="/skins/monobook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/skins/monobook/IE70Fixes.css?303" media="screen" /><![endif]--><meta name="ResourceLoaderDynamicStyles" content="" />
<style>a:lang(ar),a:lang(ckb),a:lang(fa),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}a.new,#quickbar a.new{color:#ba0000}

/* cache key: mediawiki:resourceloader:filter:minify-css:4:c88e2bcd56513749bec09a7e29cb3ffa */</style>
<script src="/load.php?debug=false&amp;lang=zh-cn&amp;modules=startup&amp;only=scripts&amp;skin=monobook&amp;*"></script>
<script>if(window.mw){
	mw.config.set({"wgCanonicalNamespace": "", "wgCanonicalSpecialPageName": false, "wgNamespaceNumber": 0, "wgPageName": "XEP-0085", "wgTitle": "XEP-0085", "wgCurRevisionId": 15, "wgArticleId": 13, "wgIsArticle": true, "wgAction": "view", "wgUserName": null, "wgUserGroups": ["*"], "wgCategories": ["XMPP扩展", "已翻译"], "wgBreakFrames": false, "wgRestrictionEdit": [], "wgRestrictionMove": [], "wgSearchNamespaces": [0]});
}
</script><script>if(window.mw){
	mw.loader.load(["mediawiki.page.startup"]);
}
</script>
<style type="text/css">/*<![CDATA[*/
.source-xml {border: 1px dashed #2f6fab; color: black; background-color: #f9f9f9;}
.source-xml li, .source-xml pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for xml
 * CSS class: source-xml, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.source-xml .de1, .source-xml .de2 {font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;}
.source-xml  {font-family: monospace;}
.source-xml .imp {font-weight: bold; color: red;}
.source-xml li, .source-xml li.li1 {font-weight: normal;}
.source-xml li.li2 {font-weight: bold;}
.source-xml .co1 {color: #808080; font-style: italic;}
.source-xml .co2 {color: #404040; font-style: italic;}
.source-xml .co3 {color: #000000;}
.source-xml .co4 {color: #400000; font-weight: bold;}
.source-xml .es0 {color: #000099; font-weight: bold;}
.source-xml .br0 {color: #66cc66;}
.source-xml .sy0 {color: #66cc66;}
.source-xml .st0 {color: #ff0000;}
.source-xml .nu0 {color: #cc66cc;}
.source-xml .re0 {color: #000066;}
.source-xml .re1 {color: #000000; font-weight: bold;}
.source-xml .re2 {color: #000000; font-weight: bold;}
.source-xml .ln-xtra, .source-xml li.ln-xtra, .source-xml div.ln-xtra {background-color: #ffc;}
.source-xml span.xtra { display:block; }

/*]]>*/
</style>
<style type="text/css">/*<![CDATA[*/
@import "/index.php?title=MediaWiki:Geshi.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
/*]]>*/
</style></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-XEP-0085 action-view skin-monobook">
<div id="globalWrapper">
<div id="column-content"><div id="content">
	<a id="top"></a>
	
	<h1 id="firstHeading" class="firstHeading">XEP-0085</h1>
	<div id="bodyContent">
		<div id="siteSub">来自Jabber/XMPP中文翻译计划</div>
		<div id="contentSub"></div>
		<div id="jump-to-nav">跳转到： <a href="#column-one">导航</a>, <a href="#searchInput">搜索</a></div>
		<!-- start content -->
<div lang="zh-cn" dir="ltr" class="mw-content-ltr"><p><br />
<b>本文的英文原文来自<a rel="nofollow" class="external text" href="http://www.xmpp.org/extensions/xep-0085.html">XEP-0085</a></b>
</p><p><b>XEP-0085:聊天状态通知</b>
</p><p>本文定义了一个XMPP协议扩展,用于沟通用户的聊天状态，从而表明聊天的好友是否正积极参与聊天，撰写邮件，暂时中止，无效的，或消失。本协议可用于一对一聊天会话的上下文或多用户聊天室。
</p><p>注意: 这里定义的协议是XMPP标准化基金会的一个草案标准.对本协议的执行是被鼓励的,也适于部署到生产系统,但是在它成为最终标准之前可能还会有一些变动.
</p><p><b>文档信息</b>
</p><p>系列: <a rel="nofollow" class="external text" href="http://www.xmpp.org/extensions/">XEP</a> <a href="/index.php?title=XMPP%E6%89%A9%E5%B1%95&amp;action=edit&amp;redlink=1" class="new" title="XMPP扩展（尚未撰写）">译文</a>
</p><p>编号: 0085
</p><p>发行者: <a rel="nofollow" class="external text" href="http://www.xmpp.org/xsf/">XMPP标准化基金会</a> <a href="/index.php?title=XMPP%E6%A0%87%E5%87%86%E5%9F%BA%E9%87%91%E4%BC%9A&amp;action=edit&amp;redlink=1" class="new" title="XMPP标准基金会（尚未撰写）">译文</a>
</p><p>状态: 草案
</p><p>类型: 标准跟踪
</p><p>版本: 1.2
</p><p>最后更新日期: 2006-07-12
</p><p>批准机构: <a rel="nofollow" class="external text" href="http://www.xmpp.org/council/">XMPP理事会</a> <a href="/index.php?title=XMPP%E7%90%86%E4%BA%8B%E4%BC%9A&amp;action=edit&amp;redlink=1" class="new" title="XMPP理事会（尚未撰写）">译文</a>
</p><p>依赖于: <a href="/RFC3920" title="RFC3920">XMPP Core</a>, <a href="/RFC3921" title="RFC3921">XMPP IM</a>, XEP-0030
</p><p>上文: XEP-0022(部分)
</p><p>下文: 无
</p><p>简称: chatstates
</p><p>名字空间的XML方案: &lt;<a rel="nofollow" class="external free" href="http://www.xmpp.org/schemas/chatstates.xsd">http://www.xmpp.org/schemas/chatstates.xsd</a>&gt;
</p><p>注册项: &lt;<a rel="nofollow" class="external free" href="http://www.xmpp.org/registrar/amp.html">http://www.xmpp.org/registrar/amp.html</a>&gt;
</p><p>Wiki页: &lt;<a rel="nofollow" class="external free" href="http://wiki.jabber.org/index.php/Chat">http://wiki.jabber.org/index.php/Chat</a> State Notifications (XEP-0085)&gt;
</p><p><b>作者信息</b>
</p><p><b>Peter Saint-Andre</b>
</p>
<dl><dd>JID: [xmpp:stpeter@jabber.org stpeter@jabber.org]
</dd></dl>
<dl><dd>URI: &lt;<a rel="nofollow" class="external free" href="https://stpeter.im/">https://stpeter.im/</a>&gt;
</dd></dl>
<p><b>Dave Smith</b>
</p>
<dl><dd>Email: <a rel="nofollow" class="external text" href="mailto:dizzyd@jabber.org">dizzyd@jabber.org</a>
</dd></dl>
<dl><dd>JabberID: [xmpp:dizzyd@jabber.org dizzyd@jabber.org]
</dd></dl>
<p><b>法律通告</b>
</p><p><b>版权</b>
</p><p>XMPP扩展协议的版权(1999-2008)归XMPP标准化基金会(XSF)所有.
</p><p><b>权限</b>
</p><p>特此授权,费用全免,对任何获得本协议副本的人,对使用本协议没有限制,包括不限制在软件程序中实现本协议,不限制在网络服务中布署本协议,不限制拷贝,修改,合并,发行,翻译,分发,转授,或销售本协议的副本,被允许使用本协议做了以上工作的人士,应接受前述的版权声明和本许可通知并且必须包含在所有的副本或实质性部分的规格中.除非单独的许可，被重新分发的修改工作，不得含有关于作者，标题，编号，或出版者的规格的误导性资料，并不得宣称修改工作是由本文的作者，作者所属的任何组织或项目，或XMPP标准基金会签注。
</p><p><b>免责声明</b>
</p><p>注意：本协议是提供的“原样”的基础，没有担保或任何形式的条件，明示或暗示，包括，但不限于任何担保或关于名称，非侵权性，适销性或适合作某一特定目的的条件.在任何情况XMPP标准基金会或作者不对此协议承担任何责任索赔，损害赔偿，或其他责任，无论是在一项行动的合同，侵权，或否则，所产生的，运出，或在他涉嫌与规格或执行，部署或以其它方式使用本协议. ##
</p><p><b>责任限制</b>
</p><p>在任何情况下以及没有任何法律规定时，不论是侵权行为（包括疏忽），合同或其它方面，除非根据适用法律的要求（如蓄意和有严重疏忽行为）或同意以书面形式，XMPP标准基金会或任何作者不对本协议承担所造成的损失，包括任何直接，间接，特殊，偶发，或相应的损害赔偿的任何字符利用所产生的或不能使用的规格（包括但不限于善意的损失，停止作业，电脑失灵或故障，或任何和所有其他商业损害或损失） ，即使XMPP标准基金会或作者已被告知此类损害的可能性。
</p><p><b>知识产权的一致性</b>
</p><p>XMPP扩展协议完全遵守XSF的知识产权策略(可在&lt;<a rel="nofollow" class="external free" href="http://www.xmpp.org/extensions/ipr-policy.shtml">http://www.xmpp.org/extensions/ipr-policy.shtml</a>&gt;找到副本或写信给XSF, P.O. Box 1641, Denver, CO 80201 USA). 
</p><p><b>讨论地点</b>
</p><p>首选的讨论的地方是标准讨论邮件列表: &lt;<a rel="nofollow" class="external free" href="http://mail.jabber.org/mailman/listinfo/standards">http://mail.jabber.org/mailman/listinfo/standards</a>&gt;.
勘误表发送到<a rel="nofollow" class="external text" href="mailto:editor@xmpp.org">editor@xmpp.org</a>
</p><p><b>XMPP 相关信息</b>
</p><p>XMPP 是由XSF(XMPP标准化基金会)按互联网标准程序贡献的,和 IETF的<a class="external mw-magiclink-rfc" href="//tools.ietf.org/html/rfc2026">RFC 2026</a>兼容的规范,包括 XMPP核心(<a class="external mw-magiclink-rfc" href="//tools.ietf.org/html/rfc3920">RFC 3920</a>)和 XMPP IM(<a class="external mw-magiclink-rfc" href="//tools.ietf.org/html/rfc3921">RFC 3921</a>).在本文中定义的任何协议,都是在互联网标准程序之外开发的,是扩展XMPP，而不是改变、发展和修改 XMPP本身。
</p><p><b>一致性术语</b>
</p><p>本文中以下关键词的含义如 <a class="external mw-magiclink-rfc" href="//tools.ietf.org/html/rfc2119">RFC 2119</a> 所述: "MUST", "SHALL", "REQUIRED"; "MUST NOT", "SHALL NOT"; "SHOULD", "RECOMMENDED"; "SHOULD NOT", "NOT RECOMMENDED"; "MAY", "OPTIONAL".
</p>
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>目录</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#.E7.BB.AA.E8.AE.BA"><span class="tocnumber">1</span> <span class="toctext">绪论</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#.E5.AE.9A.E4.B9.89"><span class="tocnumber">2</span> <span class="toctext">定义</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#.E7.8A.B6.E6.80.81.E5.9B.BE"><span class="tocnumber">3</span> <span class="toctext">状态图</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#.E6.9F.A5.E8.AF.A2.E6.98.AF.E5.90.A6.E6.94.AF.E6.8C.81"><span class="tocnumber">4</span> <span class="toctext">查询是否支持</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#.E5.95.86.E4.B8.9A.E8.A7.84.E5.88.99"><span class="tocnumber">5</span> <span class="toctext">商业规则</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#.E9.80.9A.E7.9F.A5.E7.9A.84.E7.94.9F.E6.88.90"><span class="tocnumber">5.1</span> <span class="toctext">通知的生成</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#.E6.94.AF.E6.8C.81.E8.A6.81.E6.B1.82"><span class="tocnumber">5.2</span> <span class="toctext">支持要求</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#.E9.87.8D.E5.A4.8D"><span class="tocnumber">5.3</span> <span class="toctext">重复</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#.E4.B8.8A.E4.B8.8B.E6.96.87.E4.BD.BF.E7.94.A8"><span class="tocnumber">5.4</span> <span class="toctext">上下文使用</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#.E5.9C.A8.E5.A4.9A.E4.BA.BA.E8.81.8A.E5.A4.A9.E4.B8.AD.E4.BD.BF.E7.94.A8"><span class="tocnumber">5.5</span> <span class="toctext">在多人聊天中使用</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#.E9.80.9A.E7.9F.A5.E8.AF.AD.E6.B3.95"><span class="tocnumber">5.6</span> <span class="toctext">通知语法</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#.E7.BA.BF.E7.B4.A2"><span class="tocnumber">5.7</span> <span class="toctext">线索</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#.E6.9C.8D.E5.8A.A1.E5.AF.B9.E9.80.9A.E7.9F.A5.E7.9A.84.E5.A4.84.E7.90.86"><span class="tocnumber">5.8</span> <span class="toctext">服务对通知的处理</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-14"><a href="#.E4.B8.80.E4.B8.AA.E7.AE.80.E5.8D.95.E4.BE.8B.E5.AD.90"><span class="tocnumber">6</span> <span class="toctext">一个简单例子</span></a></li>
<li class="toclevel-1 tocsection-15"><a href="#.E4.BC.9A.E8.AF.9D.E7.BB.86.E8.8A.82"><span class="tocnumber">7</span> <span class="toctext">会话细节</span></a></li>
<li class="toclevel-1 tocsection-16"><a href="#.E5.AE.9E.E7.8E.B0.E6.B3.A8.E6.84.8F"><span class="tocnumber">8</span> <span class="toctext">实现注意</span></a></li>
<li class="toclevel-1 tocsection-17"><a href="#.E5.AE.89.E5.85.A8.E4.BA.8B.E9.A1.B9"><span class="tocnumber">9</span> <span class="toctext">安全事项</span></a></li>
<li class="toclevel-1 tocsection-18"><a href="#IANA.E4.BA.8B.E9.A1.B9"><span class="tocnumber">10</span> <span class="toctext">IANA事项</span></a></li>
<li class="toclevel-1 tocsection-19"><a href="#XMPP.E6.B3.A8.E5.86.8C.E4.BA.8B.E9.A1.B9"><span class="tocnumber">11</span> <span class="toctext">XMPP注册事项</span></a>
<ul>
<li class="toclevel-2 tocsection-20"><a href="#.E5.8D.8F.E8.AE.AE.E5.91.BD.E5.90.8D.E7.A9.BA.E9.97.B4"><span class="tocnumber">11.1</span> <span class="toctext">协议命名空间</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-21"><a href="#XML_Schema"><span class="tocnumber">12</span> <span class="toctext">XML Schema</span></a></li>
<li class="toclevel-1 tocsection-22"><a href="#.E5.A4.87.E6.B3.A8"><span class="tocnumber">13</span> <span class="toctext">备注</span></a></li>
<li class="toclevel-1 tocsection-23"><a href="#.E4.BF.AE.E8.AE.A2.E5.8E.86.E5.8F.B2"><span class="tocnumber">14</span> <span class="toctext">修订历史</span></a></li>
</ul>
</td></tr></table>
<h2> <span class="mw-headline" id=".E7.BB.AA.E8.AE.BA">绪论</span></h2>
<p>许多即时通讯系统包含了一对一聊天的聊天状态的提醒(或者，有时，在多对多聊天中也包含)。通常在用户的伙伴在正在输入的时候会被限制。比如 在XEP-0022定义的 Composing事件(参考消息事件)。然而，一个composing事件实质上是关于个人参与或者涉及的聊天会话的信息，比如在XEP-0022中的分发和显示事件。当一个 composing事件引起兴趣并被关注时，会话等级状态的概念能够被扩展以说明关于即时聊天的参与者的一些问题如下:
</p>
<ul><li> 这个参与者是否已经停止了输入？
</li></ul>
<ul><li> 这个参与者是否注意这次聊天？
</li></ul>
<ul><li> 这个参与者是否暂时没有激活这个会话(换言之，此时没有注意这次聊天)？
</li></ul>
<ul><li> 这个参与者是否已离开(也就是说不再参与这次聊天了)？
</li></ul>
<p>为了回答这些问题，本文档通过定义4种附加状态(paused, active, inactive, gone)来提供表明传统输入的状态，一共(是本协议期望的)5种状态一起完整的描述在参与者参与的或者涉及的聊天会话的可能能的状态。
</p>
<h2> <span class="mw-headline" id=".E5.AE.9A.E4.B9.89">定义</span></h2>
<p>实质上，聊天状态的通知可以被看作是特定会话的出席信息的一种形式。比如，考虑下可能发生如下状况，如果用户在桌面上丢失了一个聊天窗口；用户可能仍旧被他的消息客户端影响(因此，不会自动改变基础的出席消息为away)，但是用户的聊天会话的状态可能从active状态转换为inactive，然后又转换为gone。这些信息将会帮助用户的聊天伙伴了解为什么没有从她那里受到回复消息。聊天状态通知能够出现在&lt;message/&gt;节中。
</p>
<ul><li> 一个“文本消息”————包含了&lt;body/&gt;, &lt;subject/&gt;, and &lt;thread/&gt; 子元素的标准消息，该消息在XMPP IM中定义，或者包含其他命名空间的子元素。
</li></ul>
<ul><li> 一个“单独的通知”————没有包含标准的消息文本的消息，而是只包含了期望的指定的聊天状态，也就是只包含了"<a rel="nofollow" class="external free" href="http://jabber.org/protocol/chatstates">http://jabber.org/protocol/chatstates</a>" 命名的空间限定的子元素(或者也可以包含&lt;thread/&gt;元素；参考下面的threads部分)
</li></ul>
<p>本文档的5种状态在下文中有描述。建议的触发状况和状态的改变是很简单的。这取决于具体实现来决定何时生成聊天状态通知以及生成什么通知。
</p><p><b>表格 1: Chat States</b>
</p><p><br />
</p>
<table border="1" cellspacing="0">
<tr>
<th>状态 </th>
<th>定义 </th>
<th>建议的触发状况 </th>
<th>建议的状态变化
</th></tr>
<tr>
<td>&lt;active/&gt; </td>
<td>用户激活并参与聊天会话中。 </td>
<td>用户接收初始文本消息，并发送一条文本消息，聊天界面获取焦点，或者用户注意到了聊天对话。 </td>
<td>&lt;inactive/&gt;, &lt;composing/&gt;
</td></tr>
<tr>
<td>&lt;composing/&gt; </td>
<td>用户正在输入消息 </td>
<td>用户在指定的聊天会话中受消息输入的影响(比如， 在聊天窗口的输入区域中输入) </td>
<td>&lt;active/&gt;, &lt;paused/&gt;
</td></tr>
<tr>
<td>&lt;paused/&gt; </td>
<td>用户之前在输入但是现在停止了 </td>
<td>用户正在输入消息但是短时间内没有对输入界面操作(比如5秒) </td>
<td>&lt;active/&gt;, &lt;composing/&gt;, &lt;inactive/&gt;
</td></tr>
<tr>
<td>&lt;inactive/&gt; </td>
<td>用户在会话中没有激活 </td>
<td>用户有一段时间没有对聊天界面进行操作。(比如30秒) </td>
<td>&lt;active/&gt;, &lt;gone/&gt;
</td></tr>
<tr>
<td>&lt;gone/&gt; </td>
<td>用户终止参与聊天会话。 </td>
<td>用户长时间没有对聊天界面或者系统或者设备进行操作(比如2分钟)，或者终止关闭了聊天界面(比如关闭了聊天窗口) </td>
<td>&lt;active/&gt;
</td></tr></table>
<h2> <span class="mw-headline" id=".E7.8A.B6.E6.80.81.E5.9B.BE">状态图</span></h2>
<p>以下状态图试图用可视化的方式记录了可能的状态转换。
</p><p>{image:img=状态图}
</p><p>注意：这4种显示的状态都可能转换成gone状态
</p>
<h2> <span class="mw-headline" id=".E6.9F.A5.E8.AF.A2.E6.98.AF.E5.90.A6.E6.94.AF.E6.8C.81">查询是否支持</span></h2>
<p>如果一个实体支持聊天状态通知,它必须(MUST)根据“服务发现”中的信息("disco#info")，对于请求返回"<a rel="nofollow" class="external free" href="http://jabber.org/protocol/chatstates">http://jabber.org/protocol/chatstates</a>"的feature：
</p><p><b>例子1. 一个 disco#info查询</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'get'</span> 
    <span class="re0">from</span>=<span class="st0">'romeo@shakespeare.lit/orchard'</span>
    <span class="re0">to</span>=<span class="st0">'juliet@capulet.com/balcony'</span>
    <span class="re0">id</span>=<span class="st0">'disco1'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/disco#info'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p><b>例子2. 一个 disco#info回应</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'result'</span> 
    <span class="re0">from</span>=<span class="st0">'juliet@capulet.com/balcony'</span>
    <span class="re0">to</span>=<span class="st0">'romeo@shakespeare.lit/orchard'</span>
    <span class="re0">id</span>=<span class="st0">'disco1'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/disco#info'</span><span class="re2">&gt;</span><span class="co3">
    ...
    </span><span class="re1">&lt;feature</span> <span class="re0">var</span>=<span class="st0">'http://jabber.org/protocol/chatstates'</span><span class="re2">/&gt;</span><span class="co3">
    ...
  </span><span class="re1">&lt;/query<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>另外，可以通过在“实体能力”中定义的服务发现的动态情况来决定是否支持聊天状态通知。
</p>
<h2> <span class="mw-headline" id=".E5.95.86.E4.B8.9A.E8.A7.84.E5.88.99">商业规则</span></h2>
<h3> <span class="mw-headline" id=".E9.80.9A.E7.9F.A5.E7.9A.84.E7.94.9F.E6.88.90">通知的生成</span></h3>
<p>在生成聊天状态通知前，用户应该(SHOULD)明确的查询联系人是否支持在此定义的协议(参考本文当的“服务发现”部分描述的)或者明确的与联系人协商聊天状态通知的使用(通过“节点会话协商”)。
</p><p>如果没有明确地查询或者协商，用户可以(MAY)通过下如附加的商业规则来暗示在一对一聊天中使用聊天状态通知。
</p>
<ol><li> 如果用户希望得到聊天状态通知，那么发送给联系人的初始文本消息必须(MUST)包含聊天状态扩展，扩展应该(SHOULD)是&lt;active/&gt;。
</li><li> 直到收到一个从联系人那里发送的初始文本消息的回复(或者一个单纯的通知)，用户不能(MUST NOT)继续发送聊天状态通知给联系人。
</li><li> 如果联系人对初始文本消息的回复中没有包含聊天状态通知扩展，用户不能(MUST NOT)继续发送聊天状态通知给联系人。
</li><li> 如果联系人对初始文本消息的回复中包含了&lt;active/&gt;通知(或者发送一个单独的通知给用户)，用户和联系人应该(SHOULD)继续发送聊天状态通知(就如以下部分指出的)，该通知包含一个&lt;active/&gt;通知，并且在每条文本消息中或者单纯的状态通知中包含他们所支持的聊天状态通知(至少包含&lt;composing/&gt;状态)
</li></ol>
<p>前述的规则意味着发送聊天状态是双向的(换言之，用户和联系人要么都发送聊天状态通知要么都不发送)而不是单向的(比如一个伙伴发送聊天状态通知而另一个不发送)；这是设计决定的。
</p>
<h3> <span class="mw-headline" id=".E6.94.AF.E6.8C.81.E8.A6.81.E6.B1.82">支持要求</span></h3>
<p><b>表格 2: 对所有聊天状态的支持要求</b>
</p>
<table border="1" cellspacing="0">
<tr>
<th>聊天状态 </th>
<th>要求
</th></tr>
<tr>
<td>&lt;active/&gt; </td>
<td>必须(MUST)
</td></tr>
<tr>
<td>&lt;composing/&gt; </td>
<td>必须(MUST)
</td></tr>
<tr>
<td>&lt;paused/&gt; </td>
<td>应该(SHOULD)
</td></tr>
<tr>
<td>&lt;inactive/&gt; </td>
<td>应该(SHOULD)
</td></tr>
<tr>
<td>&lt;gone/&gt; </td>
<td>应该(SHOULD)
</td></tr></table>
<p>客户端必须(MUST)允许用户配置是否愿意发送聊天状态通知。
</p><p>注意：只支持&lt;active/&gt;  &lt;composing/&gt;状态在功能上等同于支持XEP-0022的输入事件
</p>
<h3> <span class="mw-headline" id=".E9.87.8D.E5.A4.8D">重复</span></h3>
<p>即使用户持续输入的很长一段时间(比如，如果在输入一个很长，内容很多的回复)，客户端不能(MUST NOT)发送更多的单独的&lt;composing/&gt;通知。更通常的说，客户端不能(MUST NOT)发送第二个任何已经发送的单独的状态通知(换言之，一个单独的状态通知必须(MUST)有不同的状态，不能重复相同的状态)。然而，每个文本消息都应该(SHOULD)包含&lt;active/&gt;通知。
</p>
<h3> <span class="mw-headline" id=".E4.B8.8A.E4.B8.8B.E6.96.87.E4.BD.BF.E7.94.A8">上下文使用</span></h3>
<ol><li> 本协议不能(MUST NOT)在其他&lt;message/&gt;节点中使用
</li><li> 本协议不应该(SHOULD NOT)在chat或者groupchat类型以外的消息中使用。
</li><li> 文本消息或者单独的状态通知的type属性应该(SHOULD)设置为chat(一对一会话中)或者	groupchat(多对多会话中)
</li><li> 一个聊天会话可能(MAY)延伸持续为多人用户会话(换言之, 聊天状态对于多方都是可用的已经对	话伙伴的出席信息)，虽然对于建议的事件触发器的计时是不太可能的。
</li></ol>
<h3> <span class="mw-headline" id=".E5.9C.A8.E5.A4.9A.E4.BA.BA.E8.81.8A.E5.A4.A9.E4.B8.AD.E4.BD.BF.E7.94.A8">在多人聊天中使用</span></h3>
<p>聊天状态通知可以(MAY)发送到群聊房间中(比如，“多用户聊天”中定义的)。以下商业规则将会被应用：
</p>
<ol><li> 客户端可以(MAY)发送聊天状态通知，即使不是所有的驻留者这么做。
</li><li> 客户端不应该(SHOULD NOT)生成&lt;gone/&gt;通知。
</li><li> 客户端应该(SHOULD)忽略从房间其他驻留者发送的&lt;gone/&gt;通知
</li></ol>
<p>注意：在群聊的上下文中使用状态通知会导致这些通知的多播。凡事预则立，事先应该预料一下。
</p>
<h3> <span class="mw-headline" id=".E9.80.9A.E7.9F.A5.E8.AF.AD.E6.B3.95">通知语法</span></h3>
<ol><li> 消息节点中不能(MUST NOT)包含超过一个用'<a rel="nofollow" class="external free" href="http://jabber.org/protocol/chatstates'限定的子元素">http://jabber.org/protocol/chatstates'限定的子元素</a>
</li><li> 消息节点包含标准的消息文本(换言之，就是包含在XMPP IM中定义的&lt;body/&gt;&lt;subject/&gt;&lt;thread/&gt;子元素或其他命名空间的子元素，不应该包含除了&lt;active/&gt;扩展以外的状态通知。)
</li><li> 一条未包含标准文本并且要包含特定聊天状态的消息不能(MUST NOT)包含除聊天状态通知以外的子元素,而且也应该(SHOULD)排除&lt;active/&gt;；然而，如果使用了thread(参考下文)那么单独的状态通知必须(MUST)包含&lt;thread/&gt;元素。
</li></ol>
<h3> <span class="mw-headline" id=".E7.BA.BF.E7.B4.A2">线索</span></h3>
<p>聊天状态通知提供了管理聊天线索的机制(比如，&lt;thread/&gt;元素),对于threads的支持是可选的(OPTIONAL)。然而，如果所有参与聊天的客户端都支持和使用threads，那么将应用以下商业规则：
</p>
<ol><li> 客户端必须(MUST)在回复中复制并返回threadID(就是指&lt;thread/&gt;元素的值)
</li><li> 当一个客户端终止一对一聊天会话的时候(比如，用户关闭了聊天会话界面)，它必须(MUST)生	成一个&lt;gone/&gt;事件。
</li><li> 在接收到&lt;gone/&gt;事件后，客户端不能(MUST NOT)重用相同的thread ID，必须(MUST)	在之后的任何聊天消息中使用新生成的thread ID发送对方。
</li></ol>
<h3> <span class="mw-headline" id=".E6.9C.8D.E5.8A.A1.E5.AF.B9.E9.80.9A.E7.9F.A5.E7.9A.84.E5.A4.84.E7.90.86">服务对通知的处理</span></h3>
<p>当服务器在网络环境较差的环境中(比如，正在通过“Jabber HTTP Polling”或者 BOSH为带宽较低的客户端服务)或者服务在重复的广播消息节点时(比如，多用户聊天服务)可能(MAY)以不同于其他消息的处理方式处理单独的状态通知。特别的，服务器或者服务可能(MAY)拒绝分发单独的状态通知给其他用户，而且不应该(SHOULD NOT)保留离线的状态通知。与之相反的是XEP-0022,聊天状态通知完全是客户端的责任，不允许(MUST NOT)由服务器或者服务生成。
</p>
<h2> <span class="mw-headline" id=".E4.B8.80.E4.B8.AA.E7.AE.80.E5.8D.95.E4.BE.8B.E5.AD.90">一个简单例子</span></h2>
<p>现在下面的会话中，用户和联系人都支持聊天状态通知。
</p><p><b>例子3. 用户发送带有&lt;active/&gt;通知的初始文本消息。</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;message</span> 
    <span class="re0">from</span>=<span class="st0">'bernardo@shakespeare.lit/pda'</span>
    <span class="re0">to</span>=<span class="st0">'francisco@shakespeare.lit'</span>
    <span class="re0">type</span>=<span class="st0">'chat'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;body<span class="re2">&gt;</span></span><span class="co3">Who's there?</span><span class="re1">&lt;/body<span class="re2">&gt;</span></span>
  <span class="re1">&lt;active</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/chatstates'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/message<span class="re2">&gt;</span></span></pre></div></div>
<p><b>例子4. 联系人客户端返回带有&lt;active/&gt;通知的文本消息。</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;message</span> 
    <span class="re0">from</span>=<span class="st0">'francisco@shakespeare.lit/elsinore'</span>
    <span class="re0">to</span>=<span class="st0">'bernardo@shakespeare.lit/pda'</span>
    <span class="re0">type</span>=<span class="st0">'chat'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;body<span class="re2">&gt;</span></span><span class="co3">Nay, answer me: stand, and unfold yourself.</span><span class="re1">&lt;/body<span class="re2">&gt;</span></span>
  <span class="re1">&lt;active</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/chatstates'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/message<span class="re2">&gt;</span></span></pre></div></div>
<p>因为用户现在知道联系人支持聊天状态通知，用户就能发送其他状态类型了。
</p><p><b>例子5. 用户发送单独的&lt;composing/&gt;通知</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;message</span> 
    <span class="re0">from</span>=<span class="st0">'bernardo@shakespeare.lit/pda'</span>
    <span class="re0">to</span>=<span class="st0">'francisco@shakespeare.lit/elsinore'</span>
    <span class="re0">type</span>=<span class="st0">'chat'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;composing</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/chatstates'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/message<span class="re2">&gt;</span></span></pre></div></div>
<p><b>例子6. 用户返回带有&lt;active/&gt;通知的文本消息</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;message</span> 
    <span class="re0">from</span>=<span class="st0">'bernardo@shakespeare.lit/pda'</span>
    <span class="re0">to</span>=<span class="st0">'francisco@shakespeare.lit/elsinore'</span>
    <span class="re0">type</span>=<span class="st0">'chat'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;body<span class="re2">&gt;</span></span><span class="co3">Long live the king!</span><span class="re1">&lt;/body<span class="re2">&gt;</span></span>
  <span class="re1">&lt;active</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/chatstates'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/message<span class="re2">&gt;</span></span></pre></div></div>
<p>以此类推。
</p>
<h2> <span class="mw-headline" id=".E4.BC.9A.E8.AF.9D.E7.BB.86.E8.8A.82">会话细节</span></h2>
<p>接下来的会话中说明了聊天状态通知的更多细节(在例子中也使用了threads)
</p><p><b>例子7. 用户发送初始文本消息</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;message</span> 
    <span class="re0">from</span>=<span class="st0">'romeo@shakespeare.lit/orchard'</span>
    <span class="re0">to</span>=<span class="st0">'juliet@capulet.com'</span>
    <span class="re0">type</span>=<span class="st0">'chat'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;thread<span class="re2">&gt;</span></span><span class="co3">act2scene2chat1</span><span class="re1">&lt;/thread<span class="re2">&gt;</span></span>
  <span class="re1">&lt;body<span class="re2">&gt;</span></span><span class="co3">
    I take thee at thy word:
    Call me but love, and I'll be new baptized;
    Henceforth I never will be Romeo.
  </span><span class="re1">&lt;/body<span class="re2">&gt;</span></span>
  <span class="re1">&lt;active</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/chatstates'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/message<span class="re2">&gt;</span></span></pre></div></div>
<p>在此，Juliet的客户端知道Romeo的客户端支持聊天状态通知。那么她就回复一个带有状态通知的初始文本消息
</p><p><b>例子 8. 联系人客户端回复带有&lt;actiev/&gt;状态的文本消息</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;message</span> 
    <span class="re0">from</span>=<span class="st0">'juliet@capulet.com/balcony'</span>
    <span class="re0">to</span>=<span class="st0">'romeo@shakespeare.lit/orchard'</span>
    <span class="re0">type</span>=<span class="st0">'chat'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;thread<span class="re2">&gt;</span></span><span class="co3">act2scene2chat1</span><span class="re1">&lt;/thread<span class="re2">&gt;</span></span>
  <span class="re1">&lt;body<span class="re2">&gt;</span></span><span class="co3">
    What man art thou that thus bescreen'd in night
    So stumblest on my counsel?
  </span><span class="re1">&lt;/body<span class="re2">&gt;</span></span>
  <span class="re1">&lt;active</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/chatstates'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/message<span class="re2">&gt;</span></span></pre></div></div>
<p>那么会话继续。过了一会，Juliet问了Romeo一个问题，激活了Romeo的客户端。Romeo开始输入针对Juliet真诚的问题的回复，那么他的Jabber客户端通知Juliet，他正在输入。
</p><p><b>例子 9. 用户的客户端发送单独的&lt;composing/&gt;通知。</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;message</span> 
    <span class="re0">from</span>=<span class="st0">'romeo@montague.net/orchard'</span> 
    <span class="re0">to</span>=<span class="st0">'juliet@capulet.com/balcony'</span>
    <span class="re0">type</span>=<span class="st0">'chat'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;thread<span class="re2">&gt;</span></span><span class="co3">act2scene2chat1</span><span class="re1">&lt;/thread<span class="re2">&gt;</span></span>
  <span class="re1">&lt;composing</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/chatstates'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/message<span class="re2">&gt;</span></span></pre></div></div>
<p>Romeo意识到他的回答太草率了，然后暂停并选择正确的语句；过了一会儿(可以配置的),他的Jabber客户端判断出了延迟并发送&lt;paused/&gt;状态
</p><p><b>例子10. 用户客户端发送单独的&lt;paused/&gt;通知</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;message</span> 
    <span class="re0">from</span>=<span class="st0">'romeo@montague.net/orchard'</span> 
    <span class="re0">to</span>=<span class="st0">'juliet@capulet.com/balcony'</span>
    <span class="re0">type</span>=<span class="st0">'chat'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;thread<span class="re2">&gt;</span></span><span class="co3">act2scene2chat1</span><span class="re1">&lt;/thread<span class="re2">&gt;</span></span>
  <span class="re1">&lt;paused</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/chatstates'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/message<span class="re2">&gt;</span></span></pre></div></div>
<p>Romeo又开始输入，他的Jabber客户端发送&lt;composing/&gt;通知给Juliet客户端。
</p><p><b>例子11. 用户客户端发送单独的&lt;composing/&gt;通知</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;message</span> 
    <span class="re0">from</span>=<span class="st0">'romeo@montague.net/orchard'</span> 
    <span class="re0">to</span>=<span class="st0">'juliet@capulet.com/balcony'</span>
    <span class="re0">type</span>=<span class="st0">'chat'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;thread<span class="re2">&gt;</span></span><span class="co3">act2scene2chat1</span><span class="re1">&lt;/thread<span class="re2">&gt;</span></span>
  <span class="re1">&lt;composing</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/chatstates'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/message<span class="re2">&gt;</span></span></pre></div></div>
<p>Romeo最后发送了回复。
</p><p><b>例子12. 用户回复</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;message</span> 
    <span class="re0">from</span>=<span class="st0">'romeo@montague.net/orchard'</span> 
    <span class="re0">to</span>=<span class="st0">'juliet@capulet.com/balcony'</span>
    <span class="re0">type</span>=<span class="st0">'chat'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;thread<span class="re2">&gt;</span></span><span class="co3">act2scene2chat1</span><span class="re1">&lt;/thread<span class="re2">&gt;</span></span>
  <span class="re1">&lt;body<span class="re2">&gt;</span></span><span class="co3">Neither, fair saint, if either thee dislike.</span><span class="re1">&lt;/body<span class="re2">&gt;</span></span>
  <span class="re1">&lt;active</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/chatstates'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/message<span class="re2">&gt;</span></span></pre></div></div>
<p>对话像潮水一样一次一次，直到Juliet被她的护士叫去。
</p><p><b>例子13. 联系人发送文本消息</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;message</span> 
    <span class="re0">from</span>=<span class="st0">'juliet@capulet.com/balcony'</span>
    <span class="re0">to</span>=<span class="st0">'romeo@shakespeare.lit/orchard'</span>
    <span class="re0">type</span>=<span class="st0">'chat'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;thread<span class="re2">&gt;</span></span><span class="co3">act2scene2chat1</span><span class="re1">&lt;/thread<span class="re2">&gt;</span></span>
  <span class="re1">&lt;body<span class="re2">&gt;</span></span><span class="co3">
    I hear some noise within; dear love, adieu!
    Anon, good nurse! Sweet Montague, be true.
    Stay but a little, I will come again.
  </span><span class="re1">&lt;/body<span class="re2">&gt;</span></span>
  <span class="re1">&lt;active</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/chatstates'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/message<span class="re2">&gt;</span></span></pre></div></div>
<p>我们假定Juliet最小化了聊天窗口,那么她的客户端生成&lt;inactive/&gt; 通知
</p><p><b>例子14. 联系人客户端发送单独的&lt;inactive/&gt; 通知</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;message</span> 
    <span class="re0">from</span>=<span class="st0">'juliet@capulet.com/balcony'</span>
    <span class="re0">to</span>=<span class="st0">'romeo@shakespeare.lit/orchard'</span>
    <span class="re0">type</span>=<span class="st0">'chat'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;thread<span class="re2">&gt;</span></span><span class="co3">act2scene2chat1</span><span class="re1">&lt;/thread<span class="re2">&gt;</span></span>
  <span class="re1">&lt;inactive</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/chatstates'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/message<span class="re2">&gt;</span></span></pre></div></div>
<p>当她回来并还原窗口，她的客户端生成一个&lt;active/&gt;通知：
</p><p><b>例子15. 联系人客户端发送单独的&lt;active/&gt;通知</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;message</span> 
    <span class="re0">from</span>=<span class="st0">'juliet@capulet.com/balcony'</span>
    <span class="re0">to</span>=<span class="st0">'romeo@shakespeare.lit/orchard'</span>
    <span class="re0">type</span>=<span class="st0">'chat'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;thread<span class="re2">&gt;</span></span><span class="co3">act2scene2chat1</span><span class="re1">&lt;/thread<span class="re2">&gt;</span></span>
  <span class="re1">&lt;active</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/chatstates'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/message<span class="re2">&gt;</span></span></pre></div></div>
<p>对话继续，但是Juliet被那么爱唠叨的护士又叫去了。
</p><p><b>例子16. 联系人客户端发送文本消息</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;message</span> 
    <span class="re0">from</span>=<span class="st0">'juliet@capulet.com/balcony'</span>
    <span class="re0">to</span>=<span class="st0">'romeo@shakespeare.lit/orchard'</span>
    <span class="re0">type</span>=<span class="st0">'chat'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;thread<span class="re2">&gt;</span></span><span class="co3">act2scene2chat1</span><span class="re1">&lt;/thread<span class="re2">&gt;</span></span>
  <span class="re1">&lt;body<span class="re2">&gt;</span></span><span class="co3">
    A thousand times good night!
  </span><span class="re1">&lt;/body<span class="re2">&gt;</span></span>
  <span class="re1">&lt;active</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/chatstates'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/message<span class="re2">&gt;</span></span></pre></div></div>
<p>我们假设Juliet关闭了聊天窗口，那么她的客户端生成&lt;gone/&gt;通知：
</p><p><b>例子17. 联系人发送单独的&lt;gone/&gt;状态</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;message</span> 
    <span class="re0">from</span>=<span class="st0">'juliet@capulet.com/balcony'</span>
    <span class="re0">to</span>=<span class="st0">'romeo@shakespeare.lit/orchard'</span>
    <span class="re0">type</span>=<span class="st0">'chat'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;thread<span class="re2">&gt;</span></span><span class="co3">act2scene2chat1</span><span class="re1">&lt;/thread<span class="re2">&gt;</span></span>
  <span class="re1">&lt;gone</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/chatstates'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/message<span class="re2">&gt;</span></span></pre></div></div>
<p>Romeo的客户端现在认为这个聊天线索结束了，当他发送一条新消息时，生成一个新的thread ID
</p><p><b>例子18. 用户的客户端用新的thread ID发送文本消息</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;message</span> 
    <span class="re0">from</span>=<span class="st0">'romeo@shakespeare.lit/orchard'</span>
    <span class="re0">to</span>=<span class="st0">'juliet@capulet.com/balcony'</span>
    <span class="re0">type</span>=<span class="st0">'chat'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;thread<span class="re2">&gt;</span></span><span class="co3">act2scene2chat2</span><span class="re1">&lt;/thread<span class="re2">&gt;</span></span>
  <span class="re1">&lt;body<span class="re2">&gt;</span></span><span class="co3">
    A thousand times the worse, to want thy light.
    Love goes toward love, as schoolboys from their books,
    But love from love, toward school with heavy looks.
  </span><span class="re1">&lt;/body<span class="re2">&gt;</span></span>
  <span class="re1">&lt;active</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/chatstates'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/message<span class="re2">&gt;</span></span></pre></div></div>
<p>当juliet返回在她楼厅里的电脑时，她发现来自Romeo的新消息。当她回复时，她的客户端回复包含了&lt;active/&gt;的通知和新的thread ID。
</p><p><b>例子19. 联系人客户端发送文本消息</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;message</span> 
    <span class="re0">from</span>=<span class="st0">'juliet@capulet.com/balcony'</span>
    <span class="re0">to</span>=<span class="st0">'romeo@shakespeare.lit/orchard'</span>
    <span class="re0">type</span>=<span class="st0">'chat'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;thread<span class="re2">&gt;</span></span><span class="co3">act2scene2chat2</span><span class="re1">&lt;/thread<span class="re2">&gt;</span></span>
  <span class="re1">&lt;body<span class="re2">&gt;</span></span><span class="co3">
    Hist! Romeo, hist! O, for a falconer's voice,....
  </span><span class="re1">&lt;/body<span class="re2">&gt;</span></span>
  <span class="re1">&lt;active</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/chatstates'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/message<span class="re2">&gt;</span></span></pre></div></div>
<p>以此类推。
</p><p>天哪，这些倒霉的恋人确实会继续下去，不是么？
</p>
<h2> <span class="mw-headline" id=".E5.AE.9E.E7.8E.B0.E6.B3.A8.E6.84.8F">实现注意</span></h2>
<p>从另一个实体收到状态通知的客户端应该预计到它可能再也不会收到对方的下一个消息或者聊天状态通知(比如，因为其他实体死机或者下线)并应该对此应该有相应的计划。
</p>
<h2> <span class="mw-headline" id=".E5.AE.89.E5.85.A8.E4.BA.8B.E9.A1.B9">安全事项</span></h2>
<p>聊天线索的状态说明了用户和他的计算机之间的交互，包括物理上的出席状况；这类信息不应该(SHOULD NOT)显示给不被信任的参与会话的用户。客户端的实现必须(MUST)提供使用户能够根据需要禁止聊天状态通知的机制。
</p>
<h2> <span class="mw-headline" id="IANA.E4.BA.8B.E9.A1.B9">IANA事项</span></h2>
<p>本文档不需要IANA事项。
</p>
<h2> <span class="mw-headline" id="XMPP.E6.B3.A8.E5.86.8C.E4.BA.8B.E9.A1.B9">XMPP注册事项</span></h2>
<h3> <span class="mw-headline" id=".E5.8D.8F.E8.AE.AE.E5.91.BD.E5.90.8D.E7.A9.BA.E9.97.B4">协议命名空间</span></h3>
<p>XMPP Register在所注册的协议空间中包含了'<a rel="nofollow" class="external free" href="http://jabber.org/protocol/chatstates'">http://jabber.org/protocol/chatstates'</a> 。
</p>
<h2> <span class="mw-headline" id="XML_Schema">XML Schema</span></h2>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;?xml</span> <span class="re0">version</span>=<span class="st0">'1.0'</span> <span class="re0">encoding</span>=<span class="st0">'UTF-8'</span><span class="re2">?&gt;</span>
&#160;
<span class="re1">&lt;xs:schema</span>
    <span class="re0">xmlns:xs</span>=<span class="st0">'http://www.w3.org/2001/XMLSchema'</span>
    <span class="re0">targetNamespace</span>=<span class="st0">'http://jabber.org/protocol/chatstates'</span>
    <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/chatstates'</span>
    <span class="re0">elementFormDefault</span>=<span class="st0">'qualified'</span><span class="re2">&gt;</span>
&#160;
  <span class="re1">&lt;xs:annotation<span class="re2">&gt;</span></span>
    <span class="re1">&lt;xs:documentation<span class="re2">&gt;</span></span><span class="co3">
      The protocol documented by this schema is defined in
      XEP-0085: http://www.xmpp.org/extensions/xep-0085.html
    </span><span class="re1">&lt;/xs:documentation<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/xs:annotation<span class="re2">&gt;</span></span>
&#160;
  <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'active'</span> <span class="re0">type</span>=<span class="st0">'empty'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'composing'</span> <span class="re0">type</span>=<span class="st0">'empty'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'gone'</span> <span class="re0">type</span>=<span class="st0">'empty'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'inactive'</span> <span class="re0">type</span>=<span class="st0">'empty'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'paused'</span> <span class="re0">type</span>=<span class="st0">'empty'</span><span class="re2">/&gt;</span>
&#160;
  <span class="re1">&lt;xs:simpleType</span> <span class="re0">name</span>=<span class="st0">'empty'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;xs:restriction</span> <span class="re0">base</span>=<span class="st0">'xs:string'</span><span class="re2">&gt;</span>
      <span class="re1">&lt;xs:enumeration</span> <span class="re0">value</span>=<span class="st0">''</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;/xs:restriction<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/xs:simpleType<span class="re2">&gt;</span></span>
&#160;
<span class="re1">&lt;/xs:schema<span class="re2">&gt;</span></span></pre></div></div>
<h2> <span class="mw-headline" id=".E5.A4.87.E6.B3.A8">备注</span></h2>
<ol><li> XEP-0022: Message Events &lt;<a rel="nofollow" class="external free" href="http://www.xmpp.org/extensions/xep-0022.html">http://www.xmpp.org/extensions/xep-0022.html</a>&gt;.
</li><li> These states do not necessarily refer to the state of the client interface and certainly not to the disposition of a particular message. However, the user's involvement with the system, device, chat interface, or input interface can provide important clues regarding the user's involvement with the chat session, which should be used by the client in determining when to generate chat state notifications.
</li><li> <a class="external mw-magiclink-rfc" href="//tools.ietf.org/html/rfc3921">RFC 3921</a>: Extensible Messaging and Presence Protocol (XMPP): Instant Messaging and Presence &lt;<a rel="nofollow" class="external free" href="http://tools.ietf.org/html/rfc3921">http://tools.ietf.org/html/rfc3921</a>&gt;.
</li><li> An implementation may also "guess" that composing has been paused based on a change in the user's interaction with the message input interface, e.g. if the user switches window or application focus.
</li><li> XEP-0030: Service Discovery &lt;<a rel="nofollow" class="external free" href="http://www.xmpp.org/extensions/xep-0030.html">http://www.xmpp.org/extensions/xep-0030.html</a>&gt;.
</li><li> XEP-0115: Entity Capabilities &lt;<a rel="nofollow" class="external free" href="http://www.xmpp.org/extensions/xep-0115.html">http://www.xmpp.org/extensions/xep-0115.html</a>&gt;.
</li><li> XEP-0155: Stanza Session Negotiation &lt;<a rel="nofollow" class="external free" href="http://www.xmpp.org/extensions/xep-0155.html">http://www.xmpp.org/extensions/xep-0155.html</a>&gt;.
</li><li> XEP-0045: Multi-User Chat &lt;<a rel="nofollow" class="external free" href="http://www.xmpp.org/extensions/xep-0045.html">http://www.xmpp.org/extensions/xep-0045.html</a>&gt;.
</li><li> <a class="external mw-magiclink-rfc" href="//tools.ietf.org/html/rfc3921">RFC 3921</a>: Extensible Messaging and Presence Protocol (XMPP): Instant Messaging and Presence &lt;<a rel="nofollow" class="external free" href="http://tools.ietf.org/html/rfc3921">http://tools.ietf.org/html/rfc3921</a>&gt;.
</li><li> XEP-0025: Jabber HTTP Polling &lt;<a rel="nofollow" class="external free" href="http://www.xmpp.org/extensions/xep-0025.html">http://www.xmpp.org/extensions/xep-0025.html</a>&gt;.
</li><li> XEP-0124: Bidirectional-streams Over Synchronous HTTP &lt;<a rel="nofollow" class="external free" href="http://www.xmpp.org/extensions/xep-0124.html">http://www.xmpp.org/extensions/xep-0124.html</a>&gt;.
</li><li> The Internet Assigned Numbers Authority (IANA) is the central coordinator for the assignment of unique parameter values for Internet protocols, such as port numbers and URI schemes. For further information, see &lt;<a rel="nofollow" class="external free" href="http://www.iana.org/">http://www.iana.org/</a>&gt;.
</li><li> The XMPP Registrar maintains a list of reserved protocol namespaces as well as registries of parameters used in the context of XMPP extension protocols approved by the XMPP Standards Foundation. For further information, see &lt;<a rel="nofollow" class="external free" href="http://www.xmpp.org/registrar/">http://www.xmpp.org/registrar/</a>&gt;.
</li></ol>
<h2> <span class="mw-headline" id=".E4.BF.AE.E8.AE.A2.E5.8E.86.E5.8F.B2">修订历史</span></h2>
<p>Version 1.2 (2006-07-12)
</p><p>Added service discovery use case.
</p><p>(psa) 
</p><p>Version 1.1 (2005-10-05)
</p><p>Clarified suggested triggers to discourage prospective notifications.
</p><p>(psa) 
</p><p>Version 1.0 (2005-08-26)
</p><p>Per a vote of the Jabber Council, advanced status to Draft.
</p><p>(psa) 
</p><p>Version 0.14 (2005-07-20)
</p><p>Clarified terminology; specified suggested state changes; removed section on superseding XEP-0022.
</p><p>(psa) 
</p><p>Version 0.13 (2005-07-19)
</p><p>Further clarified business rules regarding generation of notifications.
</p><p>(psa) 
</p><p>Version 0.12 (2005-07-15)
</p><p>Clarified business rules regarding generation of notifications; added reference to XEP-0155; rewrote introduction; moved previous introductory text to section on superseding XEP-0022.
</p><p>(psa) 
</p><p>Version 0.11 (2005-07-05)
</p><p>Removed &lt;initial/&gt; state.
</p><p>(psa) 
</p><p>Version 0.10 (2005-06-28)
</p><p>Added optional &lt;initial/&gt; state; added business rule on repetition of notifications; added implementation note.
</p><p>(psa) 
</p><p>Version 0.9 (2004-10-28)
</p><p>Made &lt;inactive/&gt; state definition consistent with &lt;paused/&gt; per list discussion; made slight adjustments to wording throughout.
</p><p>(psa) 
</p><p>Version 0.8 (2004-10-28)
</p><p>Further clarified state definitions and adjusted suggested event timing.
</p><p>(psa) 
</p><p>Version 0.7 (2004-10-27)
</p><p>Clarified the meaning of the &lt;gone/&gt; state; adjusted suggested timing for events.
</p><p>(psa) 
</p><p>Version 0.6 (2004-02-19)
</p><p>Added &lt;paused/&gt; state; defined the chat states; clarified the state chart; simplified the business rules.
</p><p>(psa) 
</p><p>Version 0.5 (2003-09-18)
</p><p>Clarified that 'type' must be "chat" or "groupchat" for chat state notification messages.
</p><p>(psa) 
</p><p>Version 0.4 (2003-05-22)
</p><p>Made Thread IDs optional; made &lt;inactive/&gt; and &lt;gone/&gt; states optional if Thread IDs are not used; removed requirement for explicit service discovery in favor of implicit discovery.
</p><p>(psa) 
</p><p>Version 0.3 (2003-05-20)
</p><p>Clarified terminology; added support for groupchat; added several implementation notes.
</p><p>(psa) 
</p><p>Version 0.2 (2003-05-19)
</p><p>General cleanup; added schema.
</p><p>(psa) 
</p><p>Version 0.1 (2003-05-19)
</p><p>Initial version.
</p><p>(dss/psa) 
</p><p>结束
</p>
<!-- 
NewPP limit report
Preprocessor node count: 271/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key mediawiki:pcache:idhash:13-0!*!0!!zh-cn!*!* and timestamp 20160221181850 -->
</div><div class="printfooter">
来自“<a href="http://wiki.jabbercn.org/index.php?title=XEP-0085&amp;oldid=15">http://wiki.jabbercn.org/index.php?title=XEP-0085&amp;oldid=15</a>”</div>
		<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks"><a href="/%E7%89%B9%E6%AE%8A:%E9%A1%B5%E9%9D%A2%E5%88%86%E7%B1%BB" title="特殊:页面分类">2个分类</a>: <ul><li><a href="/%E5%88%86%E7%B1%BB:XMPP%E6%89%A9%E5%B1%95" title="分类:XMPP扩展">XMPP扩展</a></li><li><a href="/%E5%88%86%E7%B1%BB:%E5%B7%B2%E7%BF%BB%E8%AF%91" title="分类:已翻译">已翻译</a></li></ul></div></div>		<!-- end content -->
				<div class="visualClear"></div>
	</div>
</div></div>
<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>查看</h5>
		<div class="pBody">
			<ul>
				<li id="ca-nstab-main" class="selected"><a href="/XEP-0085" title="查看内容页面 [c]" accesskey="c">页面</a></li>
				<li id="ca-talk" class="new"><a href="/index.php?title=%E8%AE%A8%E8%AE%BA:XEP-0085&amp;action=edit&amp;redlink=1" title="关于内容页面的讨论 [t]" accesskey="t">讨论</a></li>
				<li id="ca-viewsource"><a href="/index.php?title=XEP-0085&amp;action=edit" title="本页面已被保护。你可以查看其源代码。 [e]" accesskey="e">查看源代码</a></li>
				<li id="ca-history"><a href="/index.php?title=XEP-0085&amp;action=history" title="本页面的早前修订版本 [h]" accesskey="h">历史</a></li>
			</ul>
		</div>
	</div>

	<div class="portlet" id="p-personal">
		<h5>个人工具</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="/index.php?title=%E7%89%B9%E6%AE%8A:%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95&amp;returnto=XEP-0085" title="我们希望您可以登入，但不强求 [o]" accesskey="o">登录/创建账户</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a title="访问首页" style="background-image: url(/skins/common/images/xmppcn.png);" href="/%E9%A6%96%E9%A1%B5"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div class="generated-sidebar portlet" id="p-navigation">
		<h5>导航</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage-description"><a href="/%E9%A6%96%E9%A1%B5" title="访问首页 [z]" accesskey="z">首页</a></li>
				<li id="n-portal"><a href="/Jabber/XMPP%E4%B8%AD%E6%96%87%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92:%E7%A4%BE%E5%8C%BA%E4%B8%93%E9%A1%B5" title="关于本项目，你可以做什么，在哪里找到你需要的事物">社区专页</a></li>
				<li id="n-currentevents"><a href="/Jabber/XMPP%E4%B8%AD%E6%96%87%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92:%E6%96%B0%E9%97%BB%E5%8A%A8%E6%80%81" title="查看当前事件的背景信息">新闻动态</a></li>
				<li id="n-recentchanges"><a href="/%E7%89%B9%E6%AE%8A:%E6%9C%80%E8%BF%91%E6%9B%B4%E6%94%B9" title="本wiki的最近更改列表 [r]" accesskey="r">最近更改</a></li>
				<li id="n-randompage"><a href="/%E7%89%B9%E6%AE%8A:%E9%9A%8F%E6%9C%BA%E9%A1%B5%E9%9D%A2" title="随机进入一个页面 [x]" accesskey="x">随机页面</a></li>
				<li id="n-help"><a href="/%E5%B8%AE%E5%8A%A9:%E7%9B%AE%E5%BD%95" title="寻求帮助的地方">帮助</a></li>
			</ul>
		</div>
	</div>
	<div class="generated-sidebar portlet" id="p-XMPP.E8.B5.84.E6.BA.90">
		<h5>XMPP资源</h5>
		<div class='pBody'>
			<ul>
				<li id="n-XMPP.E5.85.AC.E5.85.B1.E6.9C.8D.E5.8A.A1"><a href="/XMPP%E5%85%AC%E5%85%B1%E6%9C%8D%E5%8A%A1">XMPP公共服务</a></li>
				<li id="n-XMPP.E5.AE.A2.E6.88.B7.E7.AB.AF.E8.BD.AF.E4.BB.B6"><a href="/XMPP%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%BD%AF%E4%BB%B6">XMPP客户端软件</a></li>
				<li id="n-XMPP.E6.9C.8D.E5.8A.A1.E5.99.A8.E8.BD.AF.E4.BB.B6"><a href="/XMPP%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BD%AF%E4%BB%B6">XMPP服务器软件</a></li>
				<li id="n-.E5.8F.8B.E6.83.85.E9.93.BE.E6.8E.A5"><a href="/%E5%8F%8B%E6%83%85%E9%93%BE%E6%8E%A5">友情链接</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		<h5><label for="searchInput">搜索</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/index.php" id="searchform">
				<input type='hidden' name="title" value="特殊:搜索"/>
				<input type="search" name="search" title="在Jabber/XMPP中文翻译计划中搜索 [f]" accesskey="f" id="searchInput" />
				<input type="submit" name="go" value="提交" title="如果相同的标题存在的话便直接前往该页面" id="searchGoButton" class="searchButton" />&#160;
				<input type="submit" name="fulltext" value="搜索" title="搜索含这些文字的页面" id="mw-searchButton" class="searchButton" />
			</form>
		</div>
	</div>




<script src="http://yacy.jabbercn.org:8090/yacy/ui/js/jquery-1.3.2.min.js" type="text/javascript"></script>
<script>
   $(document).ready(function() {
      yconf = {
         url : 'http://yacy.jabbercn.org:8090/',
         theme : 'smoothness',
         title : 'XMPP搜索大全',
         logo     : 'http://yacy.jabbercn.org:8090/env/grafics/50-xmpp_logo.jpg',
         link     : 'http://wiki.jabbercn.org',
         urlmaskfilter : '.*',
         width : 500,
         height : 500
      };
      $.getScript(yconf.url+'/yacy/ui/js/yacyui-portalsearch.js', function(){});
   });
</script>
        <div id="p-search" class="portlet">
<h5>站外搜索</h5>
<div id="yacylivesearch" class="pBody">
   <form id="ysearch" method="get" accept-charset="UTF-8" action="http://yacy.jabbercn.org:8090/yacysearch.html">
      <input name="search" id="yquery" type="text" size="8" maxlength="80" value=""/>
      <input type="hidden" name="verify" value="false" />
      <input type="hidden" name="maximumRecords" value="10" />
      <input type="hidden" name="resource" value="local" />
      <input type="hidden" name="urlmaskfilter" value=".*" />
      <input type="hidden" name="prefermaskfilter" value="" />
      <input type="hidden" name="former" value="" />
      <input type="hidden" name="display" value="2" />
      <input type="hidden" name="nav" value="all" />
      <input type="submit" name="Enter" value="搜索" class="searchButton" />
   </form>
</div>
</div>



	<div class="portlet" id="p-tb">
		<h5>工具箱</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="/%E7%89%B9%E6%AE%8A:%E9%93%BE%E5%85%A5%E9%A1%B5%E9%9D%A2/XEP-0085" title="所有链入本页的wiki页面列表 [j]" accesskey="j">链入页面</a></li>
				<li id="t-recentchangeslinked"><a href="/%E7%89%B9%E6%AE%8A:%E9%93%BE%E5%87%BA%E6%9B%B4%E6%94%B9/XEP-0085" title="本页链入的页面的最近更改 [k]" accesskey="k">链出更改</a></li>
				<li id="t-specialpages"><a href="/%E7%89%B9%E6%AE%8A:%E7%89%B9%E6%AE%8A%E9%A1%B5%E9%9D%A2" title="所有特殊页面列表 [q]" accesskey="q">特殊页面</a></li>
				<li><a href="/index.php?title=XEP-0085&amp;printable=yes" rel="alternate">可打印版</a></li>
				<li id="t-permalink"><a href="/index.php?title=XEP-0085&amp;oldid=15" title="本页面该修订版本的永久链接">永久链接</a></li>
			</ul>
		</div>
	</div>
</div><!-- end of the left (by default at least) column -->
<div class="visualClear"></div>
<div id="footer">
	<div id="f-copyrightico">
		<a href="http://creativecommons.org/licenses/by-nc-sa/3.0/"><img src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" alt="Attribution-Noncommercial-Share Alike 3.0 Unported" width="88" height="31" /></a>
	</div>
	<div id="f-poweredbyico">
		<a href="http://www.mediawiki.org/"><img src="/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
	</div>
	<ul id="f-list">
		<li id="lastmod"> 本页面最后修订于2009年3月30日 (星期一) 16:53。</li>
		<li id="viewcount">此页面已被浏览过9,865次。</li>
		<li id="copyright">本站全部文字内容使用<a class="external" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Attribution-Noncommercial-Share Alike 3.0 Unported</a>授权。</li>
		<li id="privacy"><a href="/Jabber/XMPP%E4%B8%AD%E6%96%87%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92:%E9%9A%90%E7%A7%81%E6%9D%83%E6%94%BF%E7%AD%96" title="Jabber/XMPP中文翻译计划:隐私权政策">隐私权政策</a></li>
		<li id="about"><a href="/Jabber/XMPP%E4%B8%AD%E6%96%87%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92:%E5%85%B3%E4%BA%8E" title="Jabber/XMPP中文翻译计划:关于">关于Jabber/XMPP中文翻译计划</a></li>
		<li id="disclaimer"><a href="/Jabber/XMPP%E4%B8%AD%E6%96%87%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92:%E5%85%8D%E8%B4%A3%E5%A3%B0%E6%98%8E" title="Jabber/XMPP中文翻译计划:免责声明">免责声明</a></li>
	</ul>
</div>
</div>
<script>if(window.mw){
	mw.loader.load(["mediawiki.user", "mediawiki.util", "mediawiki.page.ready", "mediawiki.legacy.wikibits", "mediawiki.legacy.ajax", "mediawiki.legacy.mwsuggest"]);
}
</script>
<script>if(window.mw){
	mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"externaldiff":0,"externaleditor":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"highlightbroken":1,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"quickbar":5,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"showjumplinks":1,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"monobook","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,
	"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"variant":"zh-cn","language":"zh-cn","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false});;mw.user.tokens.set({"editToken":"+\\","watchToken":false});;mw.loader.state({"user.options":"ready","user.tokens":"ready"});
	
	/* cache key: mediawiki:resourceloader:filter:minify-js:4:42c4e9caefe8ca663d220ee0c286ac74 */
}
</script><!-- Piwik -->
<script type="text/javascript">
/* <![CDATA[ */
var pkBaseURL = (("https:" == document.location.protocol) ? "https://rtp.rooyee.im/piwik/" : "http://rtp.rooyee.im/piwik/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
/* ]]> */
</script>
<script type="text/javascript">
/* <![CDATA[ */
try {
var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 5);
piwikTracker.setDocumentTitle("XEP-0085");
piwikTracker.setIgnoreClasses("image");

piwikTracker.trackPageView();
piwikTracker.enableLinkTracking();
} catch( err ) {}
/* ]]> */
</script><noscript><p><img src="http://rtp.rooyee.im/piwik/piwik.php?idsite=5" style="border:0" alt=""/></p></noscript>
<!-- /Piwik --><!-- Served in 0.039 secs. --></body></html>