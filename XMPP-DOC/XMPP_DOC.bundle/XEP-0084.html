<!DOCTYPE html>
<html lang="zh-cn" dir="ltr" class="client-nojs">
<head>
<title>XEP-0084 - Jabber/XMPP中文翻译计划</title>
<meta charset="UTF-8" />
<meta name="generator" content="MediaWiki 1.18.2" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="Jabber/XMPP中文翻译计划 (zh-cn)" />
<link rel="EditURI" type="application/rsd+xml" href="http://wiki.jabbercn.org/api.php?action=rsd" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" />
<link rel="alternate" type="application/atom+xml" title="Jabber/XMPP中文翻译计划的Atom" href="/index.php?title=%E7%89%B9%E6%AE%8A:%E6%9C%80%E8%BF%91%E6%9B%B4%E6%94%B9&amp;feed=atom" />
<link rel="stylesheet" href="/load.php?debug=false&amp;lang=zh-cn&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cskins.monobook&amp;only=styles&amp;skin=monobook&amp;*" />
<!--[if lt IE 5.5000]><link rel="stylesheet" href="/skins/monobook/IE50Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 5.5000]><link rel="stylesheet" href="/skins/monobook/IE55Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 6]><link rel="stylesheet" href="/skins/monobook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/skins/monobook/IE70Fixes.css?303" media="screen" /><![endif]--><meta name="ResourceLoaderDynamicStyles" content="" />
<style>a:lang(ar),a:lang(ckb),a:lang(fa),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}a.new,#quickbar a.new{color:#ba0000}

/* cache key: mediawiki:resourceloader:filter:minify-css:4:c88e2bcd56513749bec09a7e29cb3ffa */</style>
<script src="/load.php?debug=false&amp;lang=zh-cn&amp;modules=startup&amp;only=scripts&amp;skin=monobook&amp;*"></script>
<script>if(window.mw){
	mw.config.set({"wgCanonicalNamespace": "", "wgCanonicalSpecialPageName": false, "wgNamespaceNumber": 0, "wgPageName": "XEP-0084", "wgTitle": "XEP-0084", "wgCurRevisionId": 3228, "wgArticleId": 62, "wgIsArticle": true, "wgAction": "view", "wgUserName": null, "wgUserGroups": ["*"], "wgCategories": ["XMPP扩展", "已翻译"], "wgBreakFrames": false, "wgRestrictionEdit": [], "wgRestrictionMove": [], "wgSearchNamespaces": [0]});
}
</script><script>if(window.mw){
	mw.loader.load(["mediawiki.page.startup"]);
}
</script>
<style type="text/css">/*<![CDATA[*/
.source-xml {border: 1px dashed #2f6fab; color: black; background-color: #f9f9f9;}
.source-xml li, .source-xml pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for xml
 * CSS class: source-xml, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.source-xml .de1, .source-xml .de2 {font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;}
.source-xml  {font-family: monospace;}
.source-xml .imp {font-weight: bold; color: red;}
.source-xml li, .source-xml li.li1 {font-weight: normal;}
.source-xml li.li2 {font-weight: bold;}
.source-xml .co1 {color: #808080; font-style: italic;}
.source-xml .co2 {color: #404040; font-style: italic;}
.source-xml .co3 {color: #000000;}
.source-xml .co4 {color: #400000; font-weight: bold;}
.source-xml .es0 {color: #000099; font-weight: bold;}
.source-xml .br0 {color: #66cc66;}
.source-xml .sy0 {color: #66cc66;}
.source-xml .st0 {color: #ff0000;}
.source-xml .nu0 {color: #cc66cc;}
.source-xml .re0 {color: #000066;}
.source-xml .re1 {color: #000000; font-weight: bold;}
.source-xml .re2 {color: #000000; font-weight: bold;}
.source-xml .ln-xtra, .source-xml li.ln-xtra, .source-xml div.ln-xtra {background-color: #ffc;}
.source-xml span.xtra { display:block; }

/*]]>*/
</style>
<style type="text/css">/*<![CDATA[*/
@import "/index.php?title=MediaWiki:Geshi.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
/*]]>*/
</style></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-XEP-0084 action-view skin-monobook">
<div id="globalWrapper">
<div id="column-content"><div id="content">
	<a id="top"></a>
	
	<h1 id="firstHeading" class="firstHeading">XEP-0084</h1>
	<div id="bodyContent">
		<div id="siteSub">来自Jabber/XMPP中文翻译计划</div>
		<div id="contentSub"></div>
		<div id="jump-to-nav">跳转到： <a href="#column-one">导航</a>, <a href="#searchInput">搜索</a></div>
		<!-- start content -->
<div lang="zh-cn" dir="ltr" class="mw-content-ltr"><p><br />
<b>本文的英文原文来自<a rel="nofollow" class="external text" href="http://www.xmpp.org/extensions/xep-0084.html">XEP-0084</a></b>
</p><p><b>XEP-0084: 用户头像</b>
</p><p>摘要: 本文定义了一个XMPP协议扩展，用于交换用户头像,一个小的和自然人用户相关的图像或图标. 该协议定义了头像元数据和图像数据本身的承载格式. 承载格式典型地使用定义于XEP-0163的 XMPP发布-订阅个人事件脚本 协议来传输
</p><p>作者: Peter Saint-Andre, Peter Millard, Thomas Muldowney, Julian Missig
</p><p>版权: © 1999 - 2010 XMPP标准化基金会(XSF). 参见<a href="/XEP-0084#.E9.99.84.E5.BD.95C:.E6.B3.95.E5.BE.8B.E9.80.9A.E5.91.8A" title="XEP-0084">法律通告</a>.
</p><p>状态: 草案
</p><p>类型: 标准跟踪
</p><p>版本: 1.1
</p><p>最后更新日期: 2008-11-05
</p>
<hr />
<p>注意: 这里定义的协议是XMPP标准化基金会的一个<b>草案标准</b>.对本协议的执行是被鼓励的,也适于布署到生产系统,但是在它成为最终标准之前可能还会有一些变动.
</p>
<hr />
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>目录</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#.E7.BB.AA.E8.AE.BA"><span class="tocnumber">1</span> <span class="toctext">绪论</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#.E9.9C.80.E6.B1.82"><span class="tocnumber">2</span> <span class="toctext">需求</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#.E5.9F.BA.E6.9C.AC.E5.A4.84.E7.90.86.E6.B5.81.E7.A8.8B"><span class="tocnumber">3</span> <span class="toctext">基本处理流程</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#.E7.94.A8.E6.88.B7.E5.8F.91.E5.B8.83.E6.95.B0.E6.8D.AE"><span class="tocnumber">3.1</span> <span class="toctext">用户发布数据</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#.E7.94.A8.E6.88.B7.E5.8F.91.E5.B8.83.E5.85.83.E6.95.B0.E6.8D.AE.E9.80.9A.E7.9F.A5"><span class="tocnumber">3.2</span> <span class="toctext">用户发布元数据通知</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#.E8.AE.A2.E9.98.85.E8.80.85.E6.8E.A5.E6.94.B6.E5.85.83.E6.95.B0.E6.8D.AE.E9.80.9A.E7.9F.A5"><span class="tocnumber">3.3</span> <span class="toctext">订阅者接收元数据通知</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#.E8.AE.A2.E9.98.85.E8.80.85.E8.8E.B7.E5.8F.96.E6.95.B0.E6.8D.AE"><span class="tocnumber">3.4</span> <span class="toctext">订阅者获取数据</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#.E5.8F.91.E5.B8.83.E8.80.85.E7.A6.81.E6.AD.A2.E5.A4.B4.E5.83.8F.E5.8F.91.E5.B8.83"><span class="tocnumber">3.5</span> <span class="toctext">发布者禁止头像发布</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#.E5.8D.8F.E8.AE.AE.E8.AF.AD.E6.B3.95"><span class="tocnumber">4</span> <span class="toctext">协议语法</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#Data.E5.85.83.E7.B4.A0"><span class="tocnumber">4.1</span> <span class="toctext">Data元素</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Metadata.E5.85.83.E7.B4.A0"><span class="tocnumber">4.2</span> <span class="toctext">Metadata元素</span></a>
<ul>
<li class="toclevel-3 tocsection-12"><a href="#Info.E5.85.83.E7.B4.A0"><span class="tocnumber">4.2.1</span> <span class="toctext">Info元素</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#Pointer.E5.85.83.E7.B4.A0"><span class="tocnumber">4.2.2</span> <span class="toctext">Pointer元素</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-14"><a href="#.E5.8F.A6.E5.A4.96.E7.9A.84.E4.BE.8B.E5.AD.90"><span class="tocnumber">5</span> <span class="toctext">另外的例子</span></a>
<ul>
<li class="toclevel-2 tocsection-15"><a href="#.E5.B8.A6.E5.A4.9A.E5.86.85.E5.AE.B9.E7.B1.BB.E5.9E.8B.E7.9A.84Metadata"><span class="tocnumber">5.1</span> <span class="toctext">带多内容类型的Metadata</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#.E5.B8.A6Pointer.E7.9A.84Metadata"><span class="tocnumber">5.2</span> <span class="toctext">带Pointer的Metadata</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-17"><a href="#.E6.9C.8D.E5.8A.A1.E6.9F.A5.E8.AF.A2"><span class="tocnumber">6</span> <span class="toctext">服务查询</span></a>
<ul>
<li class="toclevel-2 tocsection-18"><a href="#.E6.9F.A5.E8.AF.A2.E5.A4.B4.E5.83.8F.E5.8F.AF.E7.94.A8.E6.80.A7"><span class="tocnumber">6.1</span> <span class="toctext">查询头像可用性</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-19"><a href="#.E5.AE.9E.E7.8E.B0.E5.A4.87.E6.B3.A8"><span class="tocnumber">7</span> <span class="toctext">实现备注</span></a>
<ul>
<li class="toclevel-2 tocsection-20"><a href="#.E5.A4.9A.E8.B5.84.E6.BA.90"><span class="tocnumber">7.1</span> <span class="toctext">多资源</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#.E5.A4.B4.E5.83.8F.E5.90.8C.E6.AD.A5"><span class="tocnumber">7.2</span> <span class="toctext">头像同步</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#.E5.9B.BE.E7.89.87.E5.A4.84.E7.90.86"><span class="tocnumber">7.3</span> <span class="toctext">图片处理</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-23"><a href="#.E5.AE.89.E5.85.A8.E4.BA.8B.E9.A1.B9"><span class="tocnumber">8</span> <span class="toctext">安全事项</span></a></li>
<li class="toclevel-1 tocsection-24"><a href="#IANA.E4.BA.8B.E9.A1.B9"><span class="tocnumber">9</span> <span class="toctext">IANA事项</span></a></li>
<li class="toclevel-1 tocsection-25"><a href="#XMPP.E6.B3.A8.E5.86.8C.E5.A4.84.E4.BA.8B.E9.A1.B9"><span class="tocnumber">10</span> <span class="toctext">XMPP注册处事项</span></a>
<ul>
<li class="toclevel-2 tocsection-26"><a href="#.E5.8D.8F.E8.AE.AE.E5.91.BD.E5.90.8D.E7.A9.BA.E9.97.B4"><span class="tocnumber">10.1</span> <span class="toctext">协议命名空间</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-27"><a href="#XML_Schema"><span class="tocnumber">11</span> <span class="toctext">XML Schema</span></a>
<ul>
<li class="toclevel-2 tocsection-28"><a href="#Data.E5.91.BD.E5.90.8D.E7.A9.BA.E9.97.B4"><span class="tocnumber">11.1</span> <span class="toctext">Data命名空间</span></a></li>
<li class="toclevel-2 tocsection-29"><a href="#Metadata.E5.91.BD.E5.90.8D.E7.A9.BA.E9.97.B4"><span class="tocnumber">11.2</span> <span class="toctext">Metadata命名空间</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-30"><a href="#.E4.BD.9C.E8.80.85.E5.A4.87.E6.B3.A8"><span class="tocnumber">12</span> <span class="toctext">作者备注</span></a></li>
<li class="toclevel-1 tocsection-31"><a href="#.E9.99.84.E5.BD.95"><span class="tocnumber">13</span> <span class="toctext">附录</span></a>
<ul>
<li class="toclevel-2 tocsection-32"><a href="#.E9.99.84.E5.BD.95A:.E6.96.87.E6.A1.A3.E4.BF.A1.E6.81.AF"><span class="tocnumber">13.1</span> <span class="toctext">附录A:文档信息</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="#.E9.99.84.E5.BD.95B:.E4.BD.9C.E8.80.85.E4.BF.A1.E6.81.AF"><span class="tocnumber">13.2</span> <span class="toctext">附录B:作者信息</span></a></li>
<li class="toclevel-2"><a href="#.E9.99.84.E5.BD.95C:.E6.B3.95.E5.BE.8B.E9.80.9A.E5.91.8A"><span class="tocnumber">13.3</span> <span class="toctext">附录C:法律通告</span></a></li>
<li class="toclevel-2"><a href="#.E9.99.84.E5.BD.95D:.E5.92.8CXMPP.E7.9A.84.E5.85.B3.E7.B3.BB"><span class="tocnumber">13.4</span> <span class="toctext">附录D:和XMPP的关系</span></a></li>
<li class="toclevel-2"><a href="#.E9.99.84.E5.BD.95E:.E8.AE.A8.E8.AE.BA.E5.9C.B0.E7.82.B9"><span class="tocnumber">13.5</span> <span class="toctext">附录E:讨论地点</span></a></li>
<li class="toclevel-2"><a href="#.E9.99.84.E5.BD.95F:.E9.9C.80.E6.B1.82.E4.B8.80.E8.87.B4.E6.80.A7"><span class="tocnumber">13.6</span> <span class="toctext">附录F:需求一致性</span></a></li>
<li class="toclevel-2 tocsection-34"><a href="#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8"><span class="tocnumber">13.7</span> <span class="toctext">附录G:备注</span></a></li>
<li class="toclevel-2 tocsection-35"><a href="#.E9.99.84.E5.BD.95H:.E4.BF.AE.E8.AE.A2.E5.8E.86.E5.8F.B2"><span class="tocnumber">13.8</span> <span class="toctext">附录H:修订历史</span></a></li>
</ul>
</li>
</ul>
</td></tr></table>
<h2> <span class="mw-headline" id=".E7.BB.AA.E8.AE.BA">绪论</span></h2>
<p>很多通讯应用允许那个应用的用户拥有一个相关的小图片或图标. 通常, 这样一个 "avatar" 不一定是一个用户的真正长相的图片, 而可能是一个用户期望的自己的图像 (经常很怪诞) 或该用户暂时的状态 (例如心情或活动). 本文定义一个方法来把头像合并到目前的 Jabber/XMPP 系统，即把该功能架在 <a href="/XEP-0060" title="XEP-0060">XMPP发布-订阅</a> <a href="/XEP-0084#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0084">1</a> 扩展 ("pubsub")之上, 特别是 <a href="/XEP-0163" title="XEP-0163">个人事件协议</a> <a href="/XEP-0084#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0084">2</a> 子集 ("PEP"), 它被定义用于符合 <a href="/RFC3921" title="RFC3921">RFC 3921</a> <a href="/XEP-0084#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0084">3</a>的 XMPP 即时消息和出席信息系统的场景.
</p><p>本协议在这里定义使用两种 pubsub 节点(nodes): 一个 node 用于元数据 "metadata"，关于头像状态的 (称为 元数据节点 "metadata node") ；另一个是用于头像数据本身 (称为 数据节点 "data node"). 这个从数据中分离出来的元数据 metadata 节省了带宽，并且使发布者和订阅者能够缓存头像数据. (例如, 一个用户可能在两个或三个头像之间切换, 这种情况下用户的联系人们可以显示这些图片的一个本地缓存版本而不用每次检索或接收完整的图片.)
</p><p>这个协议也允许头像数据存储在一个可通过HTTP (见 <a rel="nofollow" class="external text" href="http://tools.ietf.org/html/rfc2616">RFC 2616</a> <a href="/XEP-0084#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0084">4</a>) 访问的 URL 上. <a href="/XEP-0084#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0084">5</a> 如果一个 pubsub-aware 数据仓库不可用，作为一个回退机制这是有帮助的. 它也使头像图片能被托管在公共的网站上 (例如, 一个面向终端用户的社区网站) 并从那个网站检索到而不是直接由发布的客户端以任何方式来处理.
</p><p>最后, 本协议也使 XMPP 应用能选择性地和托管了用户头像的第三方服务(例如, 在线游戏系统和虚拟世界)集成.
</p><p>一旦  XMPP 发布-订阅 的 PEP子集被足够广泛地实现和布署，本协议准备将来取代 <a rel="nofollow" class="external text" href="http://xmpp.org/extensions/xep-0008.html">基于IQ的头像</a> <a href="/XEP-0084#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0084">6</a> 和 <a href="/XEP-0153" title="XEP-0153">基于vCard的头像</a> <a href="/XEP-0084#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0084">7</a>.
</p>
<h2> <span class="mw-headline" id=".E9.9C.80.E6.B1.82">需求</span></h2>
<p>本文涉及以下的头像发布的用例:
</p>
<ol><li> 发布头像数据
</li><li> 更新当前头像的元数据
</li><li> 禁止头像
</li></ol>
<p>本文涉及以下头像订阅的用例:
</p>
<ol><li> 发现头像可用性
</li><li> 接收头像变更通知
</li><li> 通过pubsub获取头像数据
</li><li> 通过HTTP获取头像数据
</li></ol>
<h2> <span class="mw-headline" id=".E5.9F.BA.E6.9C.AC.E5.A4.84.E7.90.86.E6.B5.81.E7.A8.8B">基本处理流程</span></h2>
<p>发布和更新用户头像的流程如下:
</p>
<ol><li> 用户用 "image/png" content-type 格式发布头像数据到数据节点 data node，并可选的地发布其他格式 content-types 到 HTTP URLs.
</li><li> 用户发布已更新头像通知到元数据节点 metadata node, 伴随 ItemID ，它是"image/png" content-type 的图像数据的 SHA-1 哈希值 (注意: 这是该图像数据本身的一个哈希, 而不是base64编码过的那个版本).
</li><li> 订阅者接收通知.
</li><li> 可选的 (且如果必要), 订阅者使用 pubsub retrieve-items 特性 (或通过 HTTP)从数据节点 data node 获取由 ItemID 标识的头像数据.
</li><li> 可选的, 用户禁止头像显示.
</li></ol>
<p>这个处理流程在随后的章节描述得更加完整.
</p><p>注意: 在发布头像数据和元数据之前, 用户必须 MUST 根据定义于 <b>XEP-0163</b> 的流程确定是否他或她的服务器支持pubsub的PEP子集，因为这个支持简化了头像发布. 以下例子假定PEP服务可用.
</p>
<h3> <span class="mw-headline" id=".E7.94.A8.E6.88.B7.E5.8F.91.E5.B8.83.E6.95.B0.E6.8D.AE">用户发布数据</span></h3>
<p>在更新头像元数据节点之前, 发布者必须 MUST m确保头像数据在数据节点或URL是可用的. 当发布头像数据到数据节点时, 发布者必须 MUST 确保 pubsub ItemID 是该"image/png" 格式数据的 SHA-1 哈希值 (这被订阅者用于决定是否可以使用本地缓存副本来显示).
</p><p>以下例子展示发布头像数据到数据节点时发送的 XML 结构.
</p><p><b>例子 1. 发布头像数据到数据节点</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'set'</span> <span class="re0">from</span>=<span class="st0">'juliet@capulet.lit/chamber'</span> <span class="re0">id</span>=<span class="st0">'publish1'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;pubsub</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/pubsub'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;publish</span> <span class="re0">node</span>=<span class="st0">'urn:xmpp:avatar:data'</span><span class="re2">&gt;</span>
      <span class="re1">&lt;item</span> <span class="re0">id</span>=<span class="st0">'111f4b3c50d7b0df729d299bc6f8e9ef9066971f'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;data</span> <span class="re0">xmlns</span>=<span class="st0">'urn:xmpp:avatar:data'</span><span class="re2">&gt;</span><span class="co3">
          qANQR1DBwU4DX7jmYZnncm...
        </span><span class="re1">&lt;/data<span class="re2">&gt;</span></span>
      <span class="re1">&lt;/item<span class="re2">&gt;</span></span>
    <span class="re1">&lt;/publish<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/pubsub<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p><b>例子 2. Pubsub服务应答成功</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'result'</span> <span class="re0">to</span>=<span class="st0">'juliet@capulet.lit/chamber'</span> <span class="re0">id</span>=<span class="st0">'publish1'</span><span class="re2">/&gt;</span></pre></div></div>
<p>如果头像将通过 HTTP 而不是 pubsub 数据节点可用, 发布者必须 MUST 要么检查这个 HTTP URL 是否存在头像数据，要么通过标准的 HTTP 方法发布它 (这些方法超出了本协议的范围; 反考 <b><a class="external mw-magiclink-rfc" href="//tools.ietf.org/html/rfc2616">RFC 2616</a></b>).
</p>
<h3> <span class="mw-headline" id=".E7.94.A8.E6.88.B7.E5.8F.91.E5.B8.83.E5.85.83.E6.95.B0.E6.8D.AE.E9.80.9A.E7.9F.A5">用户发布元数据通知</span></h3>
<p>任何时候发布者希望修改当前头像, 它必须 MUST 更新元数据节点.
</p><p>以下例子显示的指定可用头像数据的元数据，仅针对一个格式 ("image/png") 并且只可在数据节点访问.
</p><p><b>例子 3. 发布头像元数据</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'set'</span> <span class="re0">from</span>=<span class="st0">'juliet@capulet.lit/chamber'</span> <span class="re0">id</span>=<span class="st0">'publish2'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;pubsub</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/pubsub'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;publish</span> <span class="re0">node</span>=<span class="st0">'urn:xmpp:avatar:metadata'</span><span class="re2">&gt;</span>
      <span class="re1">&lt;item</span> <span class="re0">id</span>=<span class="st0">'111f4b3c50d7b0df729d299bc6f8e9ef9066971f'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;metadata</span> <span class="re0">xmlns</span>=<span class="st0">'urn:xmpp:avatar:metadata'</span><span class="re2">&gt;</span>
          <span class="re1">&lt;info</span> <span class="re0">bytes</span>=<span class="st0">'12345'</span>
                <span class="re0">id</span>=<span class="st0">'111f4b3c50d7b0df729d299bc6f8e9ef9066971f'</span>
                <span class="re0">height</span>=<span class="st0">'64'</span>
                <span class="re0">type</span>=<span class="st0">'image/png'</span>
                <span class="re0">width</span>=<span class="st0">'64'</span><span class="re2">/&gt;</span>
        <span class="re1">&lt;/metadata<span class="re2">&gt;</span></span>
      <span class="re1">&lt;/item<span class="re2">&gt;</span></span>
    <span class="re1">&lt;/publish<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/pubsub<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>以下例子显示的指定可用头像数据的元数据，对一个 HTTP URL 可用.
</p><p><b>例子 4. 发布头像元数据</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'set'</span> <span class="re0">from</span>=<span class="st0">'juliet@capulet.lit/chamber'</span> <span class="re0">id</span>=<span class="st0">'publish2'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;pubsub</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/pubsub'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;publish</span> <span class="re0">node</span>=<span class="st0">'urn:xmpp:avatar:metadata'</span><span class="re2">&gt;</span>
      <span class="re1">&lt;item</span> <span class="re0">id</span>=<span class="st0">'111f4b3c50d7b0df729d299bc6f8e9ef9066971f'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;metadata</span> <span class="re0">xmlns</span>=<span class="st0">'urn:xmpp:avatar:metadata'</span><span class="re2">&gt;</span>
          <span class="re1">&lt;info</span> <span class="re0">bytes</span>=<span class="st0">'23456'</span>
                <span class="re0">height</span>=<span class="st0">'64'</span>
                <span class="re0">id</span>=<span class="st0">'222f4b3c50d7b0df729d299bc6f8e9ef9066971f'</span>
                <span class="re0">type</span>=<span class="st0">'image/gif'</span>
                <span class="re0">url</span>=<span class="st0">'http://avatars.example.org/happy.gif'</span>
                <span class="re0">width</span>=<span class="st0">'64'</span><span class="re2">/&gt;</span>
        <span class="re1">&lt;/metadata<span class="re2">&gt;</span></span>
      <span class="re1">&lt;/item<span class="re2">&gt;</span></span>
    <span class="re1">&lt;/publish<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/pubsub<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<h3> <span class="mw-headline" id=".E8.AE.A2.E9.98.85.E8.80.85.E6.8E.A5.E6.94.B6.E5.85.83.E6.95.B0.E6.8D.AE.E9.80.9A.E7.9F.A5">订阅者接收元数据通知</span></h3>
<p>接着用户的虚拟 virtual pubsub 服务将发送元数据通知给那些订阅了该用户的元数据节点的实体或那些声明拥有接收头像元数据能力的联系人(通过在 <a href="/XEP-0115" title="XEP-0115">实体能力</a> <a href="/XEP-0084#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0084">8</a> 中包含一个"urn:xmpp:avatar:metadata+notify"特性).
</p><p><b>例子 5. 订阅者接收头像元数据通知</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;message</span> <span class="re0">to</span>=<span class="st0">'romeo@montague.lit'</span> <span class="re0">from</span>=<span class="st0">'juliet@capulet.lit'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;event</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/pubsub#event'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;items</span> <span class="re0">node</span>=<span class="st0">'urn:xmpp:avatar:metadata'</span><span class="re2">&gt;</span>
      <span class="re1">&lt;item</span> <span class="re0">id</span>=<span class="st0">'111f4b3c50d7b0df729d299bc6f8e9ef9066971f'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;metadata</span> <span class="re0">xmlns</span>=<span class="st0">'urn:xmpp:avatar:metadata'</span><span class="re2">&gt;</span>
          <span class="re1">&lt;info</span> <span class="re0">bytes</span>=<span class="st0">'12345'</span>
                <span class="re0">height</span>=<span class="st0">'64'</span>
                <span class="re0">id</span>=<span class="st0">'111f4b3c50d7b0df729d299bc6f8e9ef9066971f'</span>
                <span class="re0">type</span>=<span class="st0">'image/png'</span>
                <span class="re0">width</span>=<span class="st0">'64'</span><span class="re2">/&gt;</span>
        <span class="re1">&lt;/metadata<span class="re2">&gt;</span></span>
      <span class="re1">&lt;/item<span class="re2">&gt;</span></span>
    <span class="re1">&lt;/items<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/event<span class="re2">&gt;</span></span>
  <span class="re1">&lt;addresses</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/address'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;address</span> <span class="re0">type</span>=<span class="st0">'replyto'</span> <span class="re0">jid</span>=<span class="st0">'juliet@capulet.lit/chamber'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;/addresses<span class="re2">&gt;</span></span>
<span class="re1">&lt;/message<span class="re2">&gt;</span></span></pre></div></div>
<p>如上所示, 取决于节点配置, 这个条目可以包含关于该发布资源的 <a rel="nofollow" class="external text" href="http://xmpp.org/extensions/xep-0033.html">扩展的节地址</a> <a href="/XEP-0084#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0084">9</a> 信息(详见 <b>XEP-0060</b> ).
</p>
<h3> <span class="mw-headline" id=".E8.AE.A2.E9.98.85.E8.80.85.E8.8E.B7.E5.8F.96.E6.95.B0.E6.8D.AE">订阅者获取数据</span></h3>
<p>在接收到该通知后, 每个订阅者应该决定是否有一个该头像的本地缓存副本(它可以通过ItemID搜索一个图像标识符). 如果该订阅者已经有一个该头像的本地缓存副本, 它不能(MUST NOT)获取该图像数据.
</p><p>如果该订阅者没有该头像图片的本地缓存副本, 它应该获取该数据. 它可以发送一个pubsub的 获取条目 请求给该数据节点, 指定适当的ItemID.
</p><p><b>例子 6. 订阅者通过ItemID请求最后的条目</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'get'</span>
    <span class="re0">from</span>=<span class="st0">'romeo@montague.lit/home'</span>
    <span class="re0">to</span>=<span class="st0">'juliet@capulet.lit'</span>
    <span class="re0">id</span>=<span class="st0">'retrieve1'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;pubsub</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/pubsub'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;items</span> <span class="re0">node</span>=<span class="st0">'urn:xmpp:avatar:data'</span><span class="re2">&gt;</span>
      <span class="re1">&lt;item</span> <span class="re0">id</span>=<span class="st0">'111f4b3c50d7b0df729d299bc6f8e9ef9066971f'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;/items<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/pubsub<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>    
<p>运行在该用户的服务器上的PEP服务接着应该返回头像数据.
</p><p><b>例子 7. PEP服务返回头像数据</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'result'</span> 
    <span class="re0">from</span>=<span class="st0">'juliet@capulet.lit'</span> 
    <span class="re0">to</span>=<span class="st0">'romeo@montague.lit/home'</span> 
    <span class="re0">id</span>=<span class="st0">'retrieve1'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;pubsub</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/pubsub'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;items</span> <span class="re0">node</span>=<span class="st0">'urn:xmpp:avatar:data'</span><span class="re2">&gt;</span>
      <span class="re1">&lt;item</span> <span class="re0">id</span>=<span class="st0">'111f4b3c50d7b0df729d299bc6f8e9ef9066971f'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;data</span> <span class="re0">xmlns</span>=<span class="st0">'urn:xmpp:avatar:data'</span><span class="re2">&gt;</span><span class="co3">
          qANQR1DBwU4DX7jmYZnncm...
        </span><span class="re1">&lt;/data<span class="re2">&gt;</span></span>
      <span class="re1">&lt;/item<span class="re2">&gt;</span></span>
    <span class="re1">&lt;/items<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/pubsub<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>    
<p>如果被发送给元数据节点的&lt;info/&gt;元素拥有一个'url'属性, 该头像数据位于一个URL. 所以, 为了获取那一内容类型的头像图片数据, 该请求实体必须发送一个HTTP请求给指定的URL. 干这事的方法超出了本协议的范围(见 <b><a class="external mw-magiclink-rfc" href="//tools.ietf.org/html/rfc2616">RFC 2616</a></b> ).
</p>
<h3> <span class="mw-headline" id=".E5.8F.91.E5.B8.83.E8.80.85.E7.A6.81.E6.AD.A2.E5.A4.B4.E5.83.8F.E5.8F.91.E5.B8.83">发布者禁止头像发布</span></h3>
<p>为了临时禁止头像发布, 该用户发布一个空的&lt;metadata/&gt;元素给该元数据节点.
</p><p><b>例子 8. 临时禁止头像发布</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'set'</span> <span class="re0">from</span>=<span class="st0">'juliet@capulet.lit/chamber'</span> <span class="re0">id</span>=<span class="st0">'publish3'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;pubsub</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/pubsub'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;publish</span> <span class="re0">node</span>=<span class="st0">'urn:xmpp:avatar:data'</span><span class="re2">&gt;</span>
      <span class="re1">&lt;item<span class="re2">&gt;</span></span>
        <span class="re1">&lt;metadata</span> <span class="re0">xmlns</span>=<span class="st0">'urn:xmpp:avatar:metadata'</span><span class="re2">/&gt;</span>
      <span class="re1">&lt;/item<span class="re2">&gt;</span></span>
    <span class="re1">&lt;/publish<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/pubsub<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>    
<p>照旧, 该元数据的订阅者将接着收到该通知.
</p><p><b>例子 9. 订阅者获取头像元数据通知</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;message</span> <span class="re0">to</span>=<span class="st0">'romeo@montague.lit/home'</span> <span class="re0">from</span>=<span class="st0">'juliet@capulet.lit'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;event</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/pubsub#event'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;items</span> <span class="re0">node</span>=<span class="st0">'urn:xmpp:avatar:metadata'</span><span class="re2">&gt;</span>
      <span class="re1">&lt;item<span class="re2">&gt;</span></span>
        <span class="re1">&lt;metadata</span> <span class="re0">xmlns</span>=<span class="st0">'urn:xmpp:avatar:metadata'</span><span class="re2">/&gt;</span>
      <span class="re1">&lt;/item<span class="re2">&gt;</span></span>
    <span class="re1">&lt;/items<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/event<span class="re2">&gt;</span></span>
<span class="re1">&lt;/message<span class="re2">&gt;</span></span></pre></div></div>    
<p>注意: 在本协议的一个早期版本中, 用户通过发送包含一个&lt;stop/&gt;子元素的&lt;metadata/&gt;元素来表明它想禁止发布. 为了保持和其他PEP载荷格式的一致性, 对&lt;stop/&gt;元素的支持被废弃了.
</p>
<h2> <span class="mw-headline" id=".E5.8D.8F.E8.AE.AE.E8.AF.AD.E6.B3.95">协议语法</span></h2>
<p>pubsub的PEP子集要求在命名空间和节点之间将存在一对一的关系. 因为在这里定义的协议规定了两种节点的使用(一个用于头像数据一个用于头像元数据), 我们定义了两个命名空间, 每个都有一个相应的根元素:
</p>
<dl><dd><ul><li> &lt;data xmlns='urn:xmpp:avatar:data'/&gt;
</li><li> &lt;metadata xmlns='urn:xmpp:avatar:metadata'/&gt;
</li></ul>
</dd></dl>
<p>更多定义如下.
</p>
<h3> <span class="mw-headline" id="Data.E5.85.83.E7.B4.A0">Data元素</span></h3>
<p>&lt;data/&gt;元素被用于通讯头像数据本身, 并只用于"image/png"内容类型(支持这个是必需的).
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;data</span> <span class="re0">xmlns</span>=<span class="st0">'urn:xmpp:avatar:data'</span><span class="re2">&gt;</span><span class="co3">
  IMAGE DATA
</span><span class="re1">&lt;/data<span class="re2">&gt;</span></span></pre></div></div>    
<p>XML字符数据必须展示内容类型为"image/png"的头像的图片, 遵循<a rel="nofollow" class="external text" href="http://tools.ietf.org/html/rfc4648">RFC 4648</a><a href="/XEP-0084#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0084">10</a>的第4章做Base64编码. (注意: Line feeds不应该(SHOULD NOT)被添加但是应该被接受.)
</p><p>&lt;data/&gt;元素不能(MUST NOT)拥有任何属性.
</p><p>对&lt;data/&gt;元素的支持是必需的.
</p>
<h3> <span class="mw-headline" id="Metadata.E5.85.83.E7.B4.A0">Metadata元素</span></h3>
<p>&lt;metadata/&gt;元素被用于通讯关于该头像的信息. &lt;metadata/&gt;元素有两个允许的子元素:
</p>
<dl><dd><ul><li> &lt;info/&gt;
</li><li> &lt;pointer/&gt;
</li></ul>
</dd></dl>
<p>更多定义如下.
</p><p>另外, &lt;metadata/&gt;元素可以是空的(即, 不包含子元素); 这个格式被用于禁止头像发布.
</p>
<h4> <span class="mw-headline" id="Info.E5.85.83.E7.B4.A0">Info元素</span></h4>
<p>&lt;info/&gt;子元素被用于通讯头像元数据. 对&lt;info/&gt;元素的支持是必需的.
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;metadata</span> <span class="re0">xmlns</span>=<span class="st0">'urn:xmpp:avatar:metadata'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;info</span> <span class="re0">bytes</span>=<span class="st0">'size-of-image-data-in-bytes'</span>
        <span class="re0">height</span>=<span class="st0">'image-height-in-pixels'</span>
        <span class="re0">id</span>=<span class="st0">'SHA-1-hash-of-image-data'</span>
        <span class="re0">type</span>=<span class="st0">'content-type-of-image-data'</span>
        <span class="re0">url</span>=<span class="st0">'HTTP-URL-for-image-data'</span>
        <span class="re0">width</span>=<span class="st0">'image-width-in-pixels'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/metadata<span class="re2">&gt;</span></span></pre></div></div>      
<p>&lt;info/&gt;子元素必须是空的.
</p><p>&lt;info/&gt;元素的已定义属性见下表.
</p><p><b>表1: Info Attributes</b>
</p>
<table border="1" cellspacing="0">
<tr>
<th>名称 </th>
<th>定义 </th>
<th>包含
</th></tr>
<tr>
<td>bytes </td>
<td>图片数据的大小(以字节数计). </td>
<td>必需
</td></tr>
<tr>
<td>height </td>
<td>图片的高度(以像素计). </td>
<td>推荐
</td></tr>
<tr>
<td>id </td>
<td>对于指定的内容类型的图片数据的哈希值, 这里的哈希值的生成遵循<a rel="nofollow" class="external text" href="http://tools.ietf.org/html/rfc3174">RFC 3174</a> <a href="/XEP-0084#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0084">11</a>定义的SHA-1机制(以二进制输出). </td>
<td>必需
</td></tr>
<tr>
<td>type </td>
<td>该图片数据的在IANA注册了的内容类型. </td>
<td>必需
</td></tr>
<tr>
<td>url </td>
<td>图片数据文件所在的 http: 或 https: URL&#160;; 除非该图片数据文件能从HTTP获取，不能(MUST NOT)包含该属性. </td>
<td>可选
</td></tr>
<tr>
<td>width </td>
<td>该图片的宽度(以像素计) </td>
<td>推荐
</td></tr></table>
<p>&lt;metadata/&gt;根元素可以包含多个&lt;info/&gt;元素. 每个&lt;info/&gt;元素必须为相同的头像图片指定元数据但是要以替代的内容类型(例如, "image/png", "image/gif", 和 "image/jpeg"), 并且格式之一必须是"image/png"以确保互操作性. 'type'属性的值必须是一个在IANA注册了的内容类型"image"或"video". <a href="/XEP-0084#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0084">12</a> 对"image/png"内容类型的支持是必需的. 对"image/gif"和"image/jpeg"内容类型的支持是推荐的. 岁任何其他内容类型的支持是可选的.
</p>
<h4> <span class="mw-headline" id="Pointer.E5.85.83.E7.B4.A0">Pointer元素</span></h4>
<p>&lt;pointer/&gt;子元素被用于指向一个未通过pubsub或HTTP发布的头像, 但是相反由类似在线游戏系统或虚拟世界的第三方服务提供.
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;metadata</span> <span class="re0">xmlns</span>=<span class="st0">'urn:xmpp:avatar:metadata'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;pointer<span class="re2">&gt;</span></span><span class="co3">
    ... APPLICATION-SPECIFIC DATA ...
  </span><span class="re1">&lt;/pointer<span class="re2">&gt;</span></span>
<span class="re1">&lt;/metadata<span class="re2">&gt;</span></span></pre></div></div>      
<p>如果发布的应用有相关的信息,&lt;pointer/&gt;元素可以拥有以下属性:
</p>
<dl><dd><ul><li> <i>bytes</i> -- 该图片数据的大小(以字节计).
</li><li> <i>height</i> -- 该图片的高度(以像素计).
</li><li> <i>id</i> -- 该图片数据用于指定内容类型的SHA-1哈希.
</li><li> <i>type</i> -- 该图片数据的在IANA注册了的内容类型.
</li><li> <i>width</i> -- 该图片的宽度(以像素计).
</li></ul>
</dd></dl>
<p>&lt;pointer/&gt;元素的内容必须是一个正确使用命名空间的子元素以指定如何从第三方服务获取该头像的信息. 任何子元素的结构超出了本文的范围.
</p><p>即使包含了&lt;pointer&gt;元素, 至少必须有一个&lt;info/&gt;元素的实例发生在它之前，这样不支持&lt;pointer/&gt;元素的实现能显示该头像的"后备"格式(最低限度, "image/png").
</p><p>对&lt;pointer/&gt;元素的支持是可选的.
</p>
<h2> <span class="mw-headline" id=".E5.8F.A6.E5.A4.96.E7.9A.84.E4.BE.8B.E5.AD.90">另外的例子</span></h2>
<h3> <span class="mw-headline" id=".E5.B8.A6.E5.A4.9A.E5.86.85.E5.AE.B9.E7.B1.BB.E5.9E.8B.E7.9A.84Metadata">带多内容类型的Metadata</span></h3>
<p>以下例子展示指定头像数据的元数据可用的多种格式("image/png", "image/gif", 和 "image/mng"), 这里"image/png"内容类型只可用在数据节点而其他内容类型可用于 HTTP URLs.
</p><p><b>例子 10. 发布头像元数据(多格式)</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'set'</span> <span class="re0">from</span>=<span class="st0">'juliet@capulet.lit/chamber'</span> <span class="re0">id</span>=<span class="st0">'publish3'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;pubsub</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/pubsub'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;publish</span> <span class="re0">node</span>=<span class="st0">'urn:xmpp:avatar:metadata'</span><span class="re2">&gt;</span>
      <span class="re1">&lt;item</span> <span class="re0">id</span>=<span class="st0">'111f4b3c50d7b0df729d299bc6f8e9ef9066971f'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;metadata</span> <span class="re0">xmlns</span>=<span class="st0">'urn:xmpp:avatar:metadata'</span><span class="re2">&gt;</span>
          <span class="re1">&lt;info</span> <span class="re0">bytes</span>=<span class="st0">'12345'</span>
                <span class="re0">height</span>=<span class="st0">'64'</span>
                <span class="re0">id</span>=<span class="st0">'111f4b3c50d7b0df729d299bc6f8e9ef9066971f'</span>
                <span class="re0">type</span>=<span class="st0">'image/png'</span>
                <span class="re0">width</span>=<span class="st0">'64'</span><span class="re2">/&gt;</span>
          <span class="re1">&lt;info</span> <span class="re0">bytes</span>=<span class="st0">'12345'</span>
                <span class="re0">height</span>=<span class="st0">'64'</span>
                <span class="re0">id</span>=<span class="st0">'e279f80c38f99c1e7e53e262b440993b2f7eea57'</span>
                <span class="re0">type</span>=<span class="st0">'image/png'</span>
                <span class="re0">url</span>=<span class="st0">'http://avatars.example.org/happy.png'</span>
                <span class="re0">width</span>=<span class="st0">'64'</span><span class="re2">/&gt;</span>
          <span class="re1">&lt;info</span> <span class="re0">bytes</span>=<span class="st0">'23456'</span>
                <span class="re0">height</span>=<span class="st0">'64'</span>
                <span class="re0">id</span>=<span class="st0">'357a8123a30844a3aa99861b6349264ba67a5694'</span>
                <span class="re0">type</span>=<span class="st0">'image/gif'</span>
                <span class="re0">url</span>=<span class="st0">'http://avatars.example.org/happy.gif'</span>
                <span class="re0">width</span>=<span class="st0">'64'</span><span class="re2">/&gt;</span>
          <span class="re1">&lt;info</span> <span class="re0">bytes</span>=<span class="st0">'78912'</span>
                <span class="re0">height</span>=<span class="st0">'64'</span>
                <span class="re0">id</span>=<span class="st0">'03a179fe37bd5d6bf9c2e1e592a14ae7814e31da'</span>
                <span class="re0">type</span>=<span class="st0">'image/mng'</span>
                <span class="re0">url</span>=<span class="st0">'http://avatars.example.org/happy.mng'</span>
                <span class="re0">width</span>=<span class="st0">'64'</span><span class="re2">/&gt;</span>
        <span class="re1">&lt;/metadata<span class="re2">&gt;</span></span>
      <span class="re1">&lt;/item<span class="re2">&gt;</span></span>
    <span class="re1">&lt;/publish<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/pubsub<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>    
<p>在前述的例子中, 以"image/png"内容类型封装的图片同时可用于一个pubsub数据节点和一个HTTP URL; 所以它被包含了两次(第二次带了一个'url'属性).
</p>
<h3> <span class="mw-headline" id=".E5.B8.A6Pointer.E7.9A.84Metadata">带Pointer的Metadata</span></h3>
<p>以下例子展示元数据指定在数据节点可用的"image/png"头像数据，同时也带有一个指针指向外部服务.
</p><p><b>例子 11. 发布头像元数据(带指针)</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'set'</span> <span class="re0">from</span>=<span class="st0">'juliet@capulet.lit/chamber'</span> <span class="re0">id</span>=<span class="st0">'publish4'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;pubsub</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/pubsub'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;publish</span> <span class="re0">node</span>=<span class="st0">'urn:xmpp:avatar:metadata'</span><span class="re2">&gt;</span>
      <span class="re1">&lt;item</span> <span class="re0">id</span>=<span class="st0">'111f4b3c50d7b0df729d299bc6f8e9ef9066971f'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;metadata</span> <span class="re0">xmlns</span>=<span class="st0">'urn:xmpp:avatar:metadata'</span><span class="re2">&gt;</span>
          <span class="re1">&lt;info</span> <span class="re0">bytes</span>=<span class="st0">'12345'</span>
                <span class="re0">height</span>=<span class="st0">'64'</span>
                <span class="re0">id</span>=<span class="st0">'111f4b3c50d7b0df729d299bc6f8e9ef9066971f'</span>
                <span class="re0">type</span>=<span class="st0">'image/png'</span>
                <span class="re0">width</span>=<span class="st0">'64'</span><span class="re2">/&gt;</span>
          <span class="re1">&lt;pointer<span class="re2">&gt;</span></span>
            <span class="re1">&lt;x</span> <span class="re0">xmlns</span>=<span class="st0">'http://example.com/virtualworlds'</span><span class="re2">&gt;</span>
              <span class="re1">&lt;game<span class="re2">&gt;</span></span><span class="co3">Ancapistan</span><span class="re1">&lt;/game<span class="re2">&gt;</span></span>
              <span class="re1">&lt;character<span class="re2">&gt;</span></span><span class="co3">Kropotkin</span><span class="re1">&lt;/character<span class="re2">&gt;</span></span>
            <span class="re1">&lt;/x<span class="re2">&gt;</span></span>
          <span class="re1">&lt;/pointer<span class="re2">&gt;</span></span>
        <span class="re1">&lt;/metadata<span class="re2">&gt;</span></span>
      <span class="re1">&lt;/item<span class="re2">&gt;</span></span>
    <span class="re1">&lt;/publish<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/pubsub<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<h2> <span class="mw-headline" id=".E6.9C.8D.E5.8A.A1.E6.9F.A5.E8.AF.A2">服务查询</span></h2>
<h3> <span class="mw-headline" id=".E6.9F.A5.E8.AF.A2.E5.A4.B4.E5.83.8F.E5.8F.AF.E7.94.A8.E6.80.A7">查询头像可用性</span></h3>
<p>pubsub "auto-subscribe" 和 "filtered-notifications" 特性允许一个联系人自动订阅一个用户的头像. 无论如何, 一个联系人也能显式地决定是否另一个用户使用本协议发布头像，通过发送一个<a href="/XEP-0030" title="XEP-0030">服务查询</a> <a href="/XEP-0084#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0084">13</a> 条目 ("disco#items") 请求给该用户的春JID &lt;localpart@domain.tld&gt;.
</p><p><b>例子 12. 查询条目请求</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'get'</span>
    <span class="re0">from</span>=<span class="st0">'romeo@montague.lit/orchard'</span>
    <span class="re0">to</span>=<span class="st0">'juliet@capulet.lit'</span>
    <span class="re0">id</span>=<span class="st0">'items1'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/disco#items'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>    
<p>如果该用户发布头像数据到一个PEP节点, 结果必须包含适当的条目.
</p><p><b>例子 13. 查询条目结果</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'result'</span>
    <span class="re0">from</span>=<span class="st0">'juliet@capulet.lit'</span>
    <span class="re0">to</span>=<span class="st0">'romeo@montague.lit/orchard'</span>
    <span class="re0">id</span>=<span class="st0">'items1'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/disco#items'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;item</span> <span class="re0">jid</span>=<span class="st0">'juliet@capulet.lit'</span> <span class="re0">node</span>=<span class="st0">'urn:xmpp:avatar:data'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;item</span> <span class="re0">jid</span>=<span class="st0">'juliet@capulet.lit'</span> <span class="re0">node</span>=<span class="st0">'urn:xmpp:avatar:metadata'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;/query<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>    
<p>该联系人接着可以根据<b>XEP-0060</b>中定义的协议订阅该元数据节点. 无论如何, 该联系人不应该(SHOULD NOT)订阅该数据节点(反之, 它应该简单地在需要的时候从那个节点获取条目, 如上所述).
</p>
<h2> <span class="mw-headline" id=".E5.AE.9E.E7.8E.B0.E5.A4.87.E6.B3.A8">实现备注</span></h2>
<h3> <span class="mw-headline" id=".E5.A4.9A.E8.B5.84.E6.BA.90">多资源</span></h3>
<p>如果一个用户同一时间有多个资源, 每个资源可以发布一个不同的头像. PEP服务应该包含上述的正在发布的资源的"replyto"地址，这样易于区分这个头像和前一个资源的头像.
</p>
<h3> <span class="mw-headline" id=".E5.A4.B4.E5.83.8F.E5.90.8C.E6.AD.A5">头像同步</span></h3>
<p>当一个用户以一个新的资源登陆并且之前发布了一个头像, 它的客户端应该获取它最近发布的头像, 要么通过自动发送带有合适的实体可用性信息的出席信息(见 <b>XEP-0115</b>)要么使用<b>XEP-0060</b>所述的"retrieve-items"方法.
</p>
<h3> <span class="mw-headline" id=".E5.9B.BE.E7.89.87.E5.A4.84.E7.90.86">图片处理</span></h3>
<p>决定获取哪个头像格式(例如, "image/gif"而不是"image/png")和决定获取的适当方法(例如, HTTP而不是pubsub)是接收的应用的责任.
</p><p>接收的应用显示一个图片的时候不应该(SHOULD NOT)拉伸它.
</p><p>如果一个头像对一个联系人不可用, 接收应用可以显示该联系人的相片, 例如, 在联系人的vCard中提供的(见<a href="/XEP-0054" title="XEP-0054">vcard-temp</a> <a href="/XEP-0084#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0084">14</a>) 或其他个人信息.
</p>
<h2> <span class="mw-headline" id=".E5.AE.89.E5.85.A8.E4.BA.8B.E9.A1.B9">安全事项</span></h2>
<p>关于和基础的传输协议相关的安全事项见<b>XEP-0060</b>和<b>XEP-0163</b>.
</p><p>有可能SHA-1哈希机制的输出会导致冲突; 无论如何, 使用SHA-1生成头像数据的哈希不是安全的关键.
</p>
<h2> <span class="mw-headline" id="IANA.E4.BA.8B.E9.A1.B9">IANA事项</span></h2>
<p>本文使用了IANA注册的内容类型, 但是不要求和<a rel="nofollow" class="external text" href="http://www.iana.org/">互联网编号分配授权机构(IANA)</a> <a href="/XEP-0084#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0084">15</a>交互.
</p>
<h2> <span class="mw-headline" id="XMPP.E6.B3.A8.E5.86.8C.E5.A4.84.E4.BA.8B.E9.A1.B9">XMPP注册处事项</span></h2>
<h3> <span class="mw-headline" id=".E5.8D.8F.E8.AE.AE.E5.91.BD.E5.90.8D.E7.A9.BA.E9.97.B4">协议命名空间</span></h3>
<p><a rel="nofollow" class="external text" href="http://xmpp.org/registrar/">XMPP注册处</a> <a href="/XEP-0084#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0084">16</a> 已经把"urn:xmpp:avatar:data"和"urn:xmpp:avatar:metadata"包含在它的协议命名空间的注册项中(见 &lt;<a rel="nofollow" class="external free" href="http://xmpp.org/registrar/namespaces.html">http://xmpp.org/registrar/namespaces.html</a>&gt;).
</p>
<h2> <span class="mw-headline" id="XML_Schema">XML Schema</span></h2>
<h3> <span class="mw-headline" id="Data.E5.91.BD.E5.90.8D.E7.A9.BA.E9.97.B4">Data命名空间</span></h3>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;?xml</span> <span class="re0">version</span>=<span class="st0">'1.0'</span> <span class="re0">encoding</span>=<span class="st0">'UTF-8'</span><span class="re2">?&gt;</span>
&#160;
<span class="re1">&lt;xs:schema</span>
    <span class="re0">xmlns:xs</span>=<span class="st0">'http://www.w3.org/2001/XMLSchema'</span>
    <span class="re0">targetNamespace</span>=<span class="st0">'urn:xmpp:avatar:data'</span>
    <span class="re0">xmlns</span>=<span class="st0">'urn:xmpp:avatar:data'</span>
    <span class="re0">elementFormDefault</span>=<span class="st0">'qualified'</span><span class="re2">&gt;</span>
&#160;
  <span class="re1">&lt;xs:annotation<span class="re2">&gt;</span></span>
    <span class="re1">&lt;xs:documentation<span class="re2">&gt;</span></span><span class="co3">
      The protocol documented by this schema is defined in
      XEP-0084: http://www.xmpp.org/extensions/xep-0084.html
    </span><span class="re1">&lt;/xs:documentation<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/xs:annotation<span class="re2">&gt;</span></span>
&#160;
  <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'data'</span> <span class="re0">type</span>=<span class="st0">'xs:base64Binary'</span><span class="re2">/&gt;</span>
&#160;
<span class="re1">&lt;/xs:schema<span class="re2">&gt;</span></span></pre></div></div>
<h3> <span class="mw-headline" id="Metadata.E5.91.BD.E5.90.8D.E7.A9.BA.E9.97.B4">Metadata命名空间</span></h3>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;?xml</span> <span class="re0">version</span>=<span class="st0">'1.0'</span> <span class="re0">encoding</span>=<span class="st0">'UTF-8'</span><span class="re2">?&gt;</span>
&#160;
<span class="re1">&lt;xs:schema</span>
    <span class="re0">xmlns:xs</span>=<span class="st0">'http://www.w3.org/2001/XMLSchema'</span>
    <span class="re0">targetNamespace</span>=<span class="st0">'urn:xmpp:avatar:metadata'</span>
    <span class="re0">xmlns</span>=<span class="st0">'urn:xmpp:avatar:metadata'</span>
    <span class="re0">elementFormDefault</span>=<span class="st0">'qualified'</span><span class="re2">&gt;</span>
&#160;
  <span class="re1">&lt;xs:annotation<span class="re2">&gt;</span></span>
    <span class="re1">&lt;xs:documentation<span class="re2">&gt;</span></span><span class="co3">
      The protocol documented by this schema is defined in
      XEP-0084: http://www.xmpp.org/extensions/xep-0084.html
    </span><span class="re1">&lt;/xs:documentation<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/xs:annotation<span class="re2">&gt;</span></span>
&#160;
  <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'metadata'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;xs:complexType<span class="re2">&gt;</span></span>
      <span class="re1">&lt;xs:choice<span class="re2">&gt;</span></span>
        <span class="re1">&lt;xs:sequence</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span> <span class="re0">maxOccurs</span>=<span class="st0">'1'</span><span class="re2">&gt;</span>
          <span class="re1">&lt;xs:element</span> <span class="re0">ref</span>=<span class="st0">'info'</span> <span class="re0">minOccurs</span>=<span class="st0">'1'</span> <span class="re0">maxOccurs</span>=<span class="st0">'unbounded'</span><span class="re2">/&gt;</span>
          <span class="re1">&lt;xs:element</span> <span class="re0">ref</span>=<span class="st0">'pointer'</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span> <span class="re0">maxOccurs</span>=<span class="st0">'unbounded'</span><span class="re2">/&gt;</span>
        <span class="re1">&lt;/xs:sequence<span class="re2">&gt;</span></span>
      <span class="re1">&lt;/xs:choice<span class="re2">&gt;</span></span>
    <span class="re1">&lt;/xs:complexType<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span>
&#160;
  <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'info'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;xs:complexType<span class="re2">&gt;</span></span>
      <span class="re1">&lt;xs:simpleContent<span class="re2">&gt;</span></span>
        <span class="re1">&lt;xs:extension</span> <span class="re0">base</span>=<span class="st0">'empty'</span><span class="re2">&gt;</span>
          <span class="re1">&lt;xs:attribute</span> <span class="re0">name</span>=<span class="st0">'bytes'</span> <span class="re0">type</span>=<span class="st0">'xs:unsignedShort'</span> <span class="re0">use</span>=<span class="st0">'required'</span><span class="re2">/&gt;</span>
          <span class="re1">&lt;xs:attribute</span> <span class="re0">name</span>=<span class="st0">'height'</span> <span class="re0">type</span>=<span class="st0">'xs:unsignedByte'</span> <span class="re0">use</span>=<span class="st0">'optional'</span><span class="re2">/&gt;</span>
          <span class="re1">&lt;xs:attribute</span> <span class="re0">name</span>=<span class="st0">'id'</span> <span class="re0">type</span>=<span class="st0">'xs:string'</span> <span class="re0">use</span>=<span class="st0">'required'</span><span class="re2">/&gt;</span>
          <span class="re1">&lt;xs:attribute</span> <span class="re0">name</span>=<span class="st0">'type'</span> <span class="re0">type</span>=<span class="st0">'xs:string'</span> <span class="re0">use</span>=<span class="st0">'required'</span><span class="re2">/&gt;</span>
          <span class="re1">&lt;xs:attribute</span> <span class="re0">name</span>=<span class="st0">'url'</span> <span class="re0">type</span>=<span class="st0">'xs:anyURI'</span> <span class="re0">use</span>=<span class="st0">'optional'</span><span class="re2">/&gt;</span>
          <span class="re1">&lt;xs:attribute</span> <span class="re0">name</span>=<span class="st0">'width'</span> <span class="re0">type</span>=<span class="st0">'xs:unsignedByte'</span> <span class="re0">use</span>=<span class="st0">'optional'</span><span class="re2">/&gt;</span>
        <span class="re1">&lt;/xs:extension<span class="re2">&gt;</span></span>
      <span class="re1">&lt;/xs:simpleContent<span class="re2">&gt;</span></span>
    <span class="re1">&lt;/xs:complexType<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span>
&#160;
  <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'pointer'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;xs:complexType<span class="re2">&gt;</span></span>
      <span class="re1">&lt;xs:sequence<span class="re2">&gt;</span></span>
        <span class="re1">&lt;xs:any</span> <span class="re0">namespace</span>=<span class="st0">'##other'</span><span class="re2">/&gt;</span>
      <span class="re1">&lt;/xs:sequence<span class="re2">&gt;</span></span>
    <span class="re1">&lt;/xs:complexType<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span>
&#160;
  <span class="re1">&lt;xs:simpleType</span> <span class="re0">name</span>=<span class="st0">'empty'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;xs:restriction</span> <span class="re0">base</span>=<span class="st0">'xs:string'</span><span class="re2">&gt;</span>
      <span class="re1">&lt;xs:enumeration</span> <span class="re0">value</span>=<span class="st0">''</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;/xs:restriction<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/xs:simpleType<span class="re2">&gt;</span></span>
&#160;
<span class="re1">&lt;/xs:schema<span class="re2">&gt;</span></span></pre></div></div>
<h2> <span class="mw-headline" id=".E4.BD.9C.E8.80.85.E5.A4.87.E6.B3.A8">作者备注</span></h2>
<p>Peter Millard, 本协议从版本0.1到版本0.7的作者, 去世于 April 26, 2006. 剩下的作者们感谢他在用户头像方面的工作.
</p>
<h2> <span class="mw-headline" id=".E9.99.84.E5.BD.95">附录</span></h2>
<h3> <span class="mw-headline" id=".E9.99.84.E5.BD.95A:.E6.96.87.E6.A1.A3.E4.BF.A1.E6.81.AF">附录A:文档信息</span></h3>
<p>系列：<a rel="nofollow" class="external text" href="http://xmpp.org/extensions/">XEP</a>
</p><p>序号：0084
</p><p>发布者：<a rel="nofollow" class="external text" href="http://xmpp.org/xsf/">XMPP标准基金会</a>
</p><p>状态：<a rel="nofollow" class="external text" href="http://xmpp.org/extensions/xep-0001.html#states-Draft">草案</a>
</p><p>类型：<a rel="nofollow" class="external text" href="http://www.xmpp.org/extensions/xep-0001.html#types-Standards%20Track">标准跟踪</a>
</p><p>版本：1.1
</p><p>最后更新：2008-11-05
</p><p>批准机构：<a rel="nofollow" class="external text" href="http://xmpp.org/council/">XMPP理事会</a>
</p><p>依赖标准：XMPP Core, XEP-0030, XEP-0060, XEP-0163
</p><p>替代标准：XEP-0008, XEP-0153
</p><p>被替代标准：无
</p><p>缩略名：avatar
</p><p>data命名空间的XML Schema: &lt;<a rel="nofollow" class="external free" href="http://www.xmpp.org/schemas/avatar-data.xsd">http://www.xmpp.org/schemas/avatar-data.xsd</a>&gt;
</p><p>metadata命名空间的XML Schema: &lt;<a rel="nofollow" class="external free" href="http://www.xmpp.org/schemas/avatar-metadata.xsd">http://www.xmpp.org/schemas/avatar-metadata.xsd</a>&gt;
</p><p>原文控制： <a rel="nofollow" class="external text" href="http://gitorious.org/xmpp/xmpp/blobs/master/extensions/xep-0084.xml">HTML</a>
</p><p>本文的其它格式： <a rel="nofollow" class="external text" href="http://xmpp.org/extensions/xep-0084.xml">XML</a> <a rel="nofollow" class="external text" href="http://xmpp.org/extensions/xep-0084.pdf">PDF</a>
</p>
<h3> <span class="mw-headline" id=".E9.99.84.E5.BD.95B:.E4.BD.9C.E8.80.85.E4.BF.A1.E6.81.AF">附录B:作者信息</span></h3>
<p><b>Peter Saint-Andre</b>
</p><p>Email: <a rel="nofollow" class="external text" href="mailto:stpeter@jabber.org">stpeter@jabber.org</a>
</p><p>JabberID: stpeter@jabber.org
</p><p>URI: <a rel="nofollow" class="external free" href="https://stpeter.im/">https://stpeter.im/</a>
</p><p><b>Peter Millard</b>
</p><p>见 <a href="/XEP-0084#.E4.BD.9C.E8.80.85.E5.A4.87.E6.B3.A8" title="XEP-0084">作者备注</a>
</p><p><b>Thomas Muldowney</b>
</p><p>Email: <a rel="nofollow" class="external text" href="mailto:temas@jabber.org">temas@jabber.org</a>
</p><p>JabberID: temas@jabber.org
</p><p><b>Julian Missig</b>
</p><p>Email: <a rel="nofollow" class="external text" href="mailto:julian@jabber.org">julian@jabber.org</a>
</p><p>JabberID: julian@jabber.org
</p>
<h3> <span class="mw-headline" id=".E9.99.84.E5.BD.95C:.E6.B3.95.E5.BE.8B.E9.80.9A.E5.91.8A">附录C:法律通告</span></h3>
<p><b>版权</b>
</p><p>XMPP扩展协议的版权(1999-2008)归XMPP标准化基金会(XSF)所有.
</p><p><b>权限</b>
</p><p>特此授权,费用全免,对任何获得本协议副本的人,对使用本协议没有限制,包括不限制在软件程序中实现本协议,不限制在网络服务中布署本协议,不限制拷贝,修改,合并,发行,翻译,分发,转授,或销售本协议的副本,被允许使用本协议做了以上工作的人士,应接受前述的版权声明和本许可通知并且必须包含在所有的副本或实质性部分的规格中.除非单独的许可，被重新分发的修改工作，不得含有关于作者，标题，编号，或出版者的规格的误导性资料，并不得宣称修改工作是由本文的作者，作者所属的任何组织或项目，或XMPP标准基金会签注。
</p><p><b>免责声明'</b>
</p><p><b>## 特别注意：本协议是提供的“原样”的基础，没有担保或任何形式的条件，明示或暗示，包括，但不限于任何担保或关于名称，非侵权性，适销性或适合作某一特定目的的条件. ##</b>
</p><p><b>责任限制</b>
</p><p>在任何情况下以及没有任何法律规定时，不论是侵权行为（包括疏忽），合同或其它方面，除非根据适用法律的要求（如蓄意和有严重疏忽行为）或以书面形式同意，XMPP标准基金会或任何作者不对本协议所造成的损失承担责任，包括任何直接，间接，特殊，偶发，或任何从本协议出，入，连接的字符产生的或实现，布署或其他对本协议的使用导致的相应的损害赔偿（包括但不限于善意的损失，停止作业，电脑失灵或故障，或任何和所有其他商业损害或损失） ，即使XMPP标准基金会或作者已被告知此类损害的可能性。
</p><p><b>知识产权的一致性</b>
</p><p>XMPP扩展协议完全遵守XSF的知识产权策略(可在&lt;<a rel="nofollow" class="external free" href="http://www.xmpp.org/extensions/ipr-policy.shtml">http://www.xmpp.org/extensions/ipr-policy.shtml</a>&gt;找到副本或写信给XMPP标准基金会, 1899 Wynkoop Street, Suite 600, Denver, CO 80202 USA).
</p>
<h3> <span class="mw-headline" id=".E9.99.84.E5.BD.95D:.E5.92.8CXMPP.E7.9A.84.E5.85.B3.E7.B3.BB">附录D:和XMPP的关系</span></h3>
<p>可扩展的消息和出席信息协议 (XMPP) 定义于 XMPP Core (<a class="external mw-magiclink-rfc" href="//tools.ietf.org/html/rfc3920">RFC 3920</a>) 和 XMPP IM (<a class="external mw-magiclink-rfc" href="//tools.ietf.org/html/rfc3921">RFC 3921</a>) 规范里，由 XMPP标准基金会贡献到由依据<a class="external mw-magiclink-rfc" href="//tools.ietf.org/html/rfc2026">RFC 2026</a>成立的互联网工程人物组管理的互联网标准流程 Internet Standards Process. 本文定义的任何协议已在互联网标准流程之外开发，并且被理解为 XMPP 的扩展而不是一个XMPP本身的演化, 开发, 或修改.
</p>
<h3> <span class="mw-headline" id=".E9.99.84.E5.BD.95E:.E8.AE.A8.E8.AE.BA.E5.9C.B0.E7.82.B9">附录E:讨论地点</span></h3>
<p>主要的XMPP扩展协议讨论地点是 &lt;standards@xmpp.org&gt; 讨论列表.
</p><p>在 xmpp.org 的其它讨论列表中的讨论可能也有合适的; 所有的列表见 &lt;<a rel="nofollow" class="external free" href="http://xmpp.org/about/discuss.shtml">http://xmpp.org/about/discuss.shtml</a>&gt; .
</p><p>勘误表可以发送邮件到 &lt;editor@xmpp.org&gt;.
</p>
<h3> <span class="mw-headline" id=".E9.99.84.E5.BD.95F:.E9.9C.80.E6.B1.82.E4.B8.80.E8.87.B4.E6.80.A7">附录F:需求一致性</span></h3>
<p>以下用于本文的需求关键字的解释见于 <a rel="nofollow" class="external text" href="http://www.ietf.org/rfc/rfc2119.txt">RFC 2119</a>: "MUST", "SHALL", "REQUIRED"; "MUST NOT", "SHALL NOT"; "SHOULD", "RECOMMENDED"; "SHOULD NOT", "NOT RECOMMENDED"; "MAY", "OPTIONAL".
</p><p><br />
</p>
<h3> <span class="mw-headline" id=".E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8">附录G:备注</span></h3>
<p>1. XEP-0060: 发布-订阅 &lt;<a rel="nofollow" class="external free" href="http://xmpp.org/extensions/xep-0060.html">http://xmpp.org/extensions/xep-0060.html</a>&gt;.
</p><p>2. XEP-0163: 个人事件协议 &lt;<a rel="nofollow" class="external free" href="http://xmpp.org/extensions/xep-0163.html">http://xmpp.org/extensions/xep-0163.html</a>&gt;.
</p><p>3. <a class="external mw-magiclink-rfc" href="//tools.ietf.org/html/rfc3921">RFC 3921</a>: Extensible Messaging and Presence Protocol (XMPP): Instant Messaging and Presence &lt;<a rel="nofollow" class="external free" href="http://tools.ietf.org/html/rfc3921">http://tools.ietf.org/html/rfc3921</a>&gt;.
</p><p>4. <a class="external mw-magiclink-rfc" href="//tools.ietf.org/html/rfc2616">RFC 2616</a>: 超文本传输协议 -- HTTP/1.1 &lt;<a rel="nofollow" class="external free" href="http://tools.ietf.org/html/rfc2616">http://tools.ietf.org/html/rfc2616</a>&gt;.
</p><p>5. "可通过HTTP访问"意味着该数据在一个 http: 或 https: 的URI上是可用的.
</p><p>6. XEP-0008: 基于IQ的头像 &lt;<a rel="nofollow" class="external free" href="http://xmpp.org/extensions/xep-0008.html">http://xmpp.org/extensions/xep-0008.html</a>&gt;.
</p><p>7. XEP-0153: 基于vCard的头像 &lt;<a rel="nofollow" class="external free" href="http://xmpp.org/extensions/xep-0153.html">http://xmpp.org/extensions/xep-0153.html</a>&gt;.
</p><p>8. XEP-0115: 实体能力 &lt;<a rel="nofollow" class="external free" href="http://xmpp.org/extensions/xep-0115.html">http://xmpp.org/extensions/xep-0115.html</a>&gt;.
</p><p>9. XEP-0033: 可扩展的节地址 &lt;<a rel="nofollow" class="external free" href="http://xmpp.org/extensions/xep-0033.html">http://xmpp.org/extensions/xep-0033.html</a>&gt;.
</p><p>10. <a class="external mw-magiclink-rfc" href="//tools.ietf.org/html/rfc4648">RFC 4648</a>: Base16, Base32, 和 Base64 数据编码 &lt;<a rel="nofollow" class="external free" href="http://tools.ietf.org/html/rfc4648">http://tools.ietf.org/html/rfc4648</a>&gt;.
</p><p>11. <a class="external mw-magiclink-rfc" href="//tools.ietf.org/html/rfc3174">RFC 3174</a>: US Secure Hash Algorithm 1 (SHA1) &lt;<a rel="nofollow" class="external free" href="http://tools.ietf.org/html/rfc3174">http://tools.ietf.org/html/rfc3174</a>&gt;.
</p><p>12. IANA注册处的内容类型位于 &lt;<a rel="nofollow" class="external free" href="http://www.iana.org/assignments/media-types/">http://www.iana.org/assignments/media-types/</a>&gt;.
</p><p>13. XEP-0030: 服务查询 &lt;<a rel="nofollow" class="external free" href="http://xmpp.org/extensions/xep-0030.html">http://xmpp.org/extensions/xep-0030.html</a>&gt;.
</p><p>14. XEP-0054: vcard-temp &lt;<a rel="nofollow" class="external free" href="http://xmpp.org/extensions/xep-0054.html">http://xmpp.org/extensions/xep-0054.html</a>&gt;.
</p><p>15. 互联网号码分配机构(IANA)是为互联网协议分配唯一性的参数值的中间协调者, 类似端口号码和 URI schemes. 更多信息参见 &lt;<a rel="nofollow" class="external free" href="http://www.iana.org/">http://www.iana.org/</a>&gt;.
</p><p>16. XMPP注册处维护一个保留的协议命名空间的列表和在XMPP标准基金会批准的XMPP扩展协议的上下文中使用的参数的注册项的列表. 更多信息见 &lt;<a rel="nofollow" class="external free" href="http://xmpp.org/registrar/">http://xmpp.org/registrar/</a>&gt;.
</p>
<h3> <span class="mw-headline" id=".E9.99.84.E5.BD.95H:.E4.BF.AE.E8.AE.A2.E5.8E.86.E5.8F.B2">附录H:修订历史</span></h3>
<p>注意: 本协议的旧版本可能在 <a rel="nofollow" class="external free" href="http://xmpp.org/extensions/attic/">http://xmpp.org/extensions/attic/</a> 还可用
</p>
<dl><dd><b>Version 1.1 (2008-11-05)</b>
</dd></dl>
<dl><dd><dl><dd>For consistency with other PEP payload formats, changed stop semantics to use an empty &lt;metadata/&gt; element rather than a &lt;stop/&gt; child element.
</dd><dd>(psa)
</dd></dl>
</dd></dl>
<dl><dd><b>Version 1.0 (2007-11-07)</b>
</dd></dl>
<dl><dd><dl><dd>Per a vote of the XMPP Council, advanced status to Draft; concurrently, the XMPP Registrar issued the urn:xmpp:avatar:data and urn:xmpp:avatar:metadata namespaces.
</dd><dd>(psa)
</dd></dl>
</dd></dl>
<dl><dd><b>Version 0.12 (2007-08-31)</b>
</dd></dl>
<dl><dd><dl><dd>Clarified HTTP publishing; completed copy edit.
</dd><dd>(psa)
</dd></dl>
</dd></dl>
<dl><dd><b>Version 0.11 (2007-07-25)</b>
</dd></dl>
<dl><dd><dl><dd>Removed image size requirements.
</dd><dd>(psa)
</dd></dl>
</dd></dl>
<dl><dd><b>Version 0.10 (2007-06-18)</b>
</dd></dl>
<dl><dd><dl><dd>Changed height and width attributes from required to recommended; updated security considerations to reflect problems with SHA-1; further specified datatypes.
</dd><dd>(psa)
</dd></dl>
</dd></dl>
<dl><dd><b>Version 0.9 (2007-02-01)</b>
</dd></dl>
<dl><dd><dl><dd>Updated to reflect pubsub and PEP changes; added implementation notes about multiple resources and avatar synchronization; modified experimental namespaces to conform to XEP-0053.
</dd><dd>(psa)
</dd></dl>
</dd></dl>
<dl><dd><b>Version 0.8 (2006-06-19)</b>
</dd></dl>
<dl><dd><dl><dd>Updated to reflect pubsub and PEP changes; added implementation notes about multiple resources and avatar synchronization.
</dd><dd>(psa)
</dd></dl>
</dd></dl>
<dl><dd><b>Version 0.7 (2006-01-17)</b>
</dd></dl>
<dl><dd><dl><dd>Updated to use PEP.
</dd><dd>(psa)
</dd></dl>
</dd></dl>
<dl><dd><b>Version 0.6 (2005-04-13)</b>
</dd></dl>
<dl><dd><dl><dd>Major modification per list discussion: specified that metadata may include the same avatar in multiple alternate formats; allowed pointers to third-party avatars not available via pubsub or HTTP; changed pixel size restrictions; specified that bytes, content-type, height, id, and width are required metadata; changed type attribute to content-type; made explicit that URLs can be http: or https: URIs; more fully specified protocol, updated the examples, updated the schemas.
</dd><dd>(psa)
</dd></dl>
</dd></dl>
<dl><dd><b>Version 0.5 (2005-03-28)</b>
</dd></dl>
<dl><dd><dl><dd>Friendly fork per Council discussion: allowed data to be stored in a pubsub data repository or at a URL accessible via HTTP; also split text into publisher and subscriber use cases, specified requirements, added more examples, etc.
</dd><dd>(psa/pgm)
</dd></dl>
</dd></dl>
<dl><dd><b>Version 0.4 (2003-05-20)</b>
</dd></dl>
<dl><dd><dl><dd>Lessen the image requirements. Include the content type in info.
</dd><dd>(tjm)
</dd></dl>
</dd></dl>
<dl><dd><b>Version 0.3 (2003-05-08)</b>
</dd></dl>
<dl><dd><dl><dd>Drastic change to use two nodes on pubsub, allowing for hash updates independently of the data. This makes client caching much easier. Allow only PNG and MNG currently.
</dd><dd>(tjm)
</dd></dl>
</dd></dl>
<dl><dd><b>Version 0.2 (2003-05-07)</b>
</dd></dl>
<dl><dd><dl><dd>Clarified the use of "current" as the item id. Fixed some example errors. Made the interaction with disco more clear. The reason to use pubsub is made more clear as well.
</dd><dd>(tjm)
</dd></dl>
</dd></dl>
<dl><dd><b>Version 0.1 (2003-05-07)</b>
</dd></dl>
<dl><dd><dl><dd>Initial version.
</dd><dd>(tjm)
</dd></dl>
</dd></dl>
<hr />
<p>结束
</p>
<!-- 
NewPP limit report
Preprocessor node count: 309/1000000
Post-expand include size: 3178/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key mediawiki:pcache:idhash:62-0!*!0!!zh-cn!*!* and timestamp 20160221170228 -->
</div><div class="printfooter">
来自“<a href="http://wiki.jabbercn.org/index.php?title=XEP-0084&amp;oldid=3228">http://wiki.jabbercn.org/index.php?title=XEP-0084&amp;oldid=3228</a>”</div>
		<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks"><a href="/%E7%89%B9%E6%AE%8A:%E9%A1%B5%E9%9D%A2%E5%88%86%E7%B1%BB" title="特殊:页面分类">2个分类</a>: <ul><li><a href="/%E5%88%86%E7%B1%BB:XMPP%E6%89%A9%E5%B1%95" title="分类:XMPP扩展">XMPP扩展</a></li><li><a href="/%E5%88%86%E7%B1%BB:%E5%B7%B2%E7%BF%BB%E8%AF%91" title="分类:已翻译">已翻译</a></li></ul></div></div>		<!-- end content -->
				<div class="visualClear"></div>
	</div>
</div></div>
<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>查看</h5>
		<div class="pBody">
			<ul>
				<li id="ca-nstab-main" class="selected"><a href="/XEP-0084" title="查看内容页面 [c]" accesskey="c">页面</a></li>
				<li id="ca-talk" class="new"><a href="/index.php?title=%E8%AE%A8%E8%AE%BA:XEP-0084&amp;action=edit&amp;redlink=1" title="关于内容页面的讨论 [t]" accesskey="t">讨论</a></li>
				<li id="ca-viewsource"><a href="/index.php?title=XEP-0084&amp;action=edit" title="本页面已被保护。你可以查看其源代码。 [e]" accesskey="e">查看源代码</a></li>
				<li id="ca-history"><a href="/index.php?title=XEP-0084&amp;action=history" title="本页面的早前修订版本 [h]" accesskey="h">历史</a></li>
			</ul>
		</div>
	</div>

	<div class="portlet" id="p-personal">
		<h5>个人工具</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="/index.php?title=%E7%89%B9%E6%AE%8A:%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95&amp;returnto=XEP-0084" title="我们希望您可以登入，但不强求 [o]" accesskey="o">登录/创建账户</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a title="访问首页" style="background-image: url(/skins/common/images/xmppcn.png);" href="/%E9%A6%96%E9%A1%B5"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div class="generated-sidebar portlet" id="p-navigation">
		<h5>导航</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage-description"><a href="/%E9%A6%96%E9%A1%B5" title="访问首页 [z]" accesskey="z">首页</a></li>
				<li id="n-portal"><a href="/Jabber/XMPP%E4%B8%AD%E6%96%87%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92:%E7%A4%BE%E5%8C%BA%E4%B8%93%E9%A1%B5" title="关于本项目，你可以做什么，在哪里找到你需要的事物">社区专页</a></li>
				<li id="n-currentevents"><a href="/Jabber/XMPP%E4%B8%AD%E6%96%87%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92:%E6%96%B0%E9%97%BB%E5%8A%A8%E6%80%81" title="查看当前事件的背景信息">新闻动态</a></li>
				<li id="n-recentchanges"><a href="/%E7%89%B9%E6%AE%8A:%E6%9C%80%E8%BF%91%E6%9B%B4%E6%94%B9" title="本wiki的最近更改列表 [r]" accesskey="r">最近更改</a></li>
				<li id="n-randompage"><a href="/%E7%89%B9%E6%AE%8A:%E9%9A%8F%E6%9C%BA%E9%A1%B5%E9%9D%A2" title="随机进入一个页面 [x]" accesskey="x">随机页面</a></li>
				<li id="n-help"><a href="/%E5%B8%AE%E5%8A%A9:%E7%9B%AE%E5%BD%95" title="寻求帮助的地方">帮助</a></li>
			</ul>
		</div>
	</div>
	<div class="generated-sidebar portlet" id="p-XMPP.E8.B5.84.E6.BA.90">
		<h5>XMPP资源</h5>
		<div class='pBody'>
			<ul>
				<li id="n-XMPP.E5.85.AC.E5.85.B1.E6.9C.8D.E5.8A.A1"><a href="/XMPP%E5%85%AC%E5%85%B1%E6%9C%8D%E5%8A%A1">XMPP公共服务</a></li>
				<li id="n-XMPP.E5.AE.A2.E6.88.B7.E7.AB.AF.E8.BD.AF.E4.BB.B6"><a href="/XMPP%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%BD%AF%E4%BB%B6">XMPP客户端软件</a></li>
				<li id="n-XMPP.E6.9C.8D.E5.8A.A1.E5.99.A8.E8.BD.AF.E4.BB.B6"><a href="/XMPP%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BD%AF%E4%BB%B6">XMPP服务器软件</a></li>
				<li id="n-.E5.8F.8B.E6.83.85.E9.93.BE.E6.8E.A5"><a href="/%E5%8F%8B%E6%83%85%E9%93%BE%E6%8E%A5">友情链接</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		<h5><label for="searchInput">搜索</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/index.php" id="searchform">
				<input type='hidden' name="title" value="特殊:搜索"/>
				<input type="search" name="search" title="在Jabber/XMPP中文翻译计划中搜索 [f]" accesskey="f" id="searchInput" />
				<input type="submit" name="go" value="提交" title="如果相同的标题存在的话便直接前往该页面" id="searchGoButton" class="searchButton" />&#160;
				<input type="submit" name="fulltext" value="搜索" title="搜索含这些文字的页面" id="mw-searchButton" class="searchButton" />
			</form>
		</div>
	</div>




<script src="http://yacy.jabbercn.org:8090/yacy/ui/js/jquery-1.3.2.min.js" type="text/javascript"></script>
<script>
   $(document).ready(function() {
      yconf = {
         url : 'http://yacy.jabbercn.org:8090/',
         theme : 'smoothness',
         title : 'XMPP搜索大全',
         logo     : 'http://yacy.jabbercn.org:8090/env/grafics/50-xmpp_logo.jpg',
         link     : 'http://wiki.jabbercn.org',
         urlmaskfilter : '.*',
         width : 500,
         height : 500
      };
      $.getScript(yconf.url+'/yacy/ui/js/yacyui-portalsearch.js', function(){});
   });
</script>
        <div id="p-search" class="portlet">
<h5>站外搜索</h5>
<div id="yacylivesearch" class="pBody">
   <form id="ysearch" method="get" accept-charset="UTF-8" action="http://yacy.jabbercn.org:8090/yacysearch.html">
      <input name="search" id="yquery" type="text" size="8" maxlength="80" value=""/>
      <input type="hidden" name="verify" value="false" />
      <input type="hidden" name="maximumRecords" value="10" />
      <input type="hidden" name="resource" value="local" />
      <input type="hidden" name="urlmaskfilter" value=".*" />
      <input type="hidden" name="prefermaskfilter" value="" />
      <input type="hidden" name="former" value="" />
      <input type="hidden" name="display" value="2" />
      <input type="hidden" name="nav" value="all" />
      <input type="submit" name="Enter" value="搜索" class="searchButton" />
   </form>
</div>
</div>



	<div class="portlet" id="p-tb">
		<h5>工具箱</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="/%E7%89%B9%E6%AE%8A:%E9%93%BE%E5%85%A5%E9%A1%B5%E9%9D%A2/XEP-0084" title="所有链入本页的wiki页面列表 [j]" accesskey="j">链入页面</a></li>
				<li id="t-recentchangeslinked"><a href="/%E7%89%B9%E6%AE%8A:%E9%93%BE%E5%87%BA%E6%9B%B4%E6%94%B9/XEP-0084" title="本页链入的页面的最近更改 [k]" accesskey="k">链出更改</a></li>
				<li id="t-specialpages"><a href="/%E7%89%B9%E6%AE%8A:%E7%89%B9%E6%AE%8A%E9%A1%B5%E9%9D%A2" title="所有特殊页面列表 [q]" accesskey="q">特殊页面</a></li>
				<li><a href="/index.php?title=XEP-0084&amp;printable=yes" rel="alternate">可打印版</a></li>
				<li id="t-permalink"><a href="/index.php?title=XEP-0084&amp;oldid=3228" title="本页面该修订版本的永久链接">永久链接</a></li>
			</ul>
		</div>
	</div>
</div><!-- end of the left (by default at least) column -->
<div class="visualClear"></div>
<div id="footer">
	<div id="f-copyrightico">
		<a href="http://creativecommons.org/licenses/by-nc-sa/3.0/"><img src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" alt="Attribution-Noncommercial-Share Alike 3.0 Unported" width="88" height="31" /></a>
	</div>
	<div id="f-poweredbyico">
		<a href="http://www.mediawiki.org/"><img src="/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
	</div>
	<ul id="f-list">
		<li id="lastmod"> 本页面最后修订于2013年7月24日 (星期三) 17:48。</li>
		<li id="viewcount">此页面已被浏览过23,670次。</li>
		<li id="copyright">本站全部文字内容使用<a class="external" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Attribution-Noncommercial-Share Alike 3.0 Unported</a>授权。</li>
		<li id="privacy"><a href="/Jabber/XMPP%E4%B8%AD%E6%96%87%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92:%E9%9A%90%E7%A7%81%E6%9D%83%E6%94%BF%E7%AD%96" title="Jabber/XMPP中文翻译计划:隐私权政策">隐私权政策</a></li>
		<li id="about"><a href="/Jabber/XMPP%E4%B8%AD%E6%96%87%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92:%E5%85%B3%E4%BA%8E" title="Jabber/XMPP中文翻译计划:关于">关于Jabber/XMPP中文翻译计划</a></li>
		<li id="disclaimer"><a href="/Jabber/XMPP%E4%B8%AD%E6%96%87%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92:%E5%85%8D%E8%B4%A3%E5%A3%B0%E6%98%8E" title="Jabber/XMPP中文翻译计划:免责声明">免责声明</a></li>
	</ul>
</div>
</div>
<script>if(window.mw){
	mw.loader.load(["mediawiki.user", "mediawiki.util", "mediawiki.page.ready", "mediawiki.legacy.wikibits", "mediawiki.legacy.ajax", "mediawiki.legacy.mwsuggest"]);
}
</script>
<script>if(window.mw){
	mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"externaldiff":0,"externaleditor":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"highlightbroken":1,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"quickbar":5,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"showjumplinks":1,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"monobook","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,
	"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"variant":"zh-cn","language":"zh-cn","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false});;mw.user.tokens.set({"editToken":"+\\","watchToken":false});;mw.loader.state({"user.options":"ready","user.tokens":"ready"});
	
	/* cache key: mediawiki:resourceloader:filter:minify-js:4:42c4e9caefe8ca663d220ee0c286ac74 */
}
</script><!-- Piwik -->
<script type="text/javascript">
/* <![CDATA[ */
var pkBaseURL = (("https:" == document.location.protocol) ? "https://rtp.rooyee.im/piwik/" : "http://rtp.rooyee.im/piwik/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
/* ]]> */
</script>
<script type="text/javascript">
/* <![CDATA[ */
try {
var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 5);
piwikTracker.setDocumentTitle("XEP-0084");
piwikTracker.setIgnoreClasses("image");

piwikTracker.trackPageView();
piwikTracker.enableLinkTracking();
} catch( err ) {}
/* ]]> */
</script><noscript><p><img src="http://rtp.rooyee.im/piwik/piwik.php?idsite=5" style="border:0" alt=""/></p></noscript>
<!-- /Piwik --><!-- Served in 0.037 secs. --></body></html>