<!DOCTYPE html>
<html lang="zh-cn" dir="ltr" class="client-nojs">
<head>
<title>XEP-0030 - Jabber/XMPP中文翻译计划</title>
<meta charset="UTF-8" />
<meta name="generator" content="MediaWiki 1.18.2" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="Jabber/XMPP中文翻译计划 (zh-cn)" />
<link rel="EditURI" type="application/rsd+xml" href="http://wiki.jabbercn.org/api.php?action=rsd" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" />
<link rel="alternate" type="application/atom+xml" title="Jabber/XMPP中文翻译计划的Atom" href="/index.php?title=%E7%89%B9%E6%AE%8A:%E6%9C%80%E8%BF%91%E6%9B%B4%E6%94%B9&amp;feed=atom" />
<link rel="stylesheet" href="/load.php?debug=false&amp;lang=zh-cn&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cskins.monobook&amp;only=styles&amp;skin=monobook&amp;*" />
<!--[if lt IE 5.5000]><link rel="stylesheet" href="/skins/monobook/IE50Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 5.5000]><link rel="stylesheet" href="/skins/monobook/IE55Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 6]><link rel="stylesheet" href="/skins/monobook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/skins/monobook/IE70Fixes.css?303" media="screen" /><![endif]--><meta name="ResourceLoaderDynamicStyles" content="" />
<style>a:lang(ar),a:lang(ckb),a:lang(fa),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}a.new,#quickbar a.new{color:#ba0000}

/* cache key: mediawiki:resourceloader:filter:minify-css:4:c88e2bcd56513749bec09a7e29cb3ffa */</style>
<script src="/load.php?debug=false&amp;lang=zh-cn&amp;modules=startup&amp;only=scripts&amp;skin=monobook&amp;*"></script>
<script>if(window.mw){
	mw.config.set({"wgCanonicalNamespace": "", "wgCanonicalSpecialPageName": false, "wgNamespaceNumber": 0, "wgPageName": "XEP-0030", "wgTitle": "XEP-0030", "wgCurRevisionId": 1189, "wgArticleId": 5, "wgIsArticle": true, "wgAction": "view", "wgUserName": null, "wgUserGroups": ["*"], "wgCategories": ["XMPP扩展", "已翻译"], "wgBreakFrames": false, "wgRestrictionEdit": [], "wgRestrictionMove": [], "wgSearchNamespaces": [0]});
}
</script><script>if(window.mw){
	mw.loader.load(["mediawiki.page.startup"]);
}
</script>
<style type="text/css">/*<![CDATA[*/
.source-xml {border: 1px dashed #2f6fab; color: black; background-color: #f9f9f9;}
.source-xml li, .source-xml pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for xml
 * CSS class: source-xml, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.source-xml .de1, .source-xml .de2 {font-family: monospace; font-weight: normal; font-style: normal; margin:0; padding:0; background:inherit;}
.source-xml  {font-family: monospace;}
.source-xml .imp {font-weight: bold; color: red;}
.source-xml li, .source-xml li.li1 {font-weight: normal;}
.source-xml li.li2 {font-weight: bold;}
.source-xml .co1 {color: #808080; font-style: italic;}
.source-xml .co2 {color: #404040; font-style: italic;}
.source-xml .co3 {color: #000000;}
.source-xml .co4 {color: #400000; font-weight: bold;}
.source-xml .es0 {color: #000099; font-weight: bold;}
.source-xml .br0 {color: #66cc66;}
.source-xml .sy0 {color: #66cc66;}
.source-xml .st0 {color: #ff0000;}
.source-xml .nu0 {color: #cc66cc;}
.source-xml .re0 {color: #000066;}
.source-xml .re1 {color: #000000; font-weight: bold;}
.source-xml .re2 {color: #000000; font-weight: bold;}
.source-xml .ln-xtra, .source-xml li.ln-xtra, .source-xml div.ln-xtra {background-color: #ffc;}
.source-xml span.xtra { display:block; }

/*]]>*/
</style>
<style type="text/css">/*<![CDATA[*/
@import "/index.php?title=MediaWiki:Geshi.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
/*]]>*/
</style></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-XEP-0030 action-view skin-monobook">
<div id="globalWrapper">
<div id="column-content"><div id="content">
	<a id="top"></a>
	
	<h1 id="firstHeading" class="firstHeading">XEP-0030</h1>
	<div id="bodyContent">
		<div id="siteSub">来自Jabber/XMPP中文翻译计划</div>
		<div id="contentSub"></div>
		<div id="jump-to-nav">跳转到： <a href="#column-one">导航</a>, <a href="#searchInput">搜索</a></div>
		<!-- start content -->
<div lang="zh-cn" dir="ltr" class="mw-content-ltr"><p><br />
<b>本文的英文原文来自<a rel="nofollow" class="external text" href="http://www.xmpp.org/extensions/xep-0030.html">XEP-0030</a></b>
</p><p><b>XEP-0030:服务发现</b>
</p><p>摘要: 本文定义了一个XMPP协议扩展用于发现其他XMPP实体的信息.有两种信息可以被发现：(1) 一个实体的身份和能力, 包括它支持的协议和特性;  (2) 和一个实体相关的条目, 例如一个多用户聊天服务的房间列表.
</p><p>作者: Joe Hildebrand, Peter Millard, Ryan Eatmon, Peter Saint-Andre
</p><p>版权: © 1999 - 2010 XMPP标准化基金会(XSF). 参见<a href="/XEP-0030#.E9.99.84.E5.BD.95C:.E6.B3.95.E5.BE.8B.E9.80.9A.E5.91.8A" title="XEP-0030">法律通告</a>.
</p><p>状态: 最终
</p><p>类型: 标准跟踪
</p><p>版本: 2.4
</p><p>最后更新日期: 2008-06-06
</p><p>注意: 这里定义的协议是XMPP标准化基金会的一个<b>最终标准</b>,对于实现和布署来说可以被认为是一个稳定技术.
</p>
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>目录</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#.E7.BB.AA.E8.AE.BA"><span class="tocnumber">1</span> <span class="toctext">绪论</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#.E9.9C.80.E6.B1.82"><span class="tocnumber">2</span> <span class="toctext">需求</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#.E5.8F.91.E7.8E.B0Jabber.E5.AE.9E.E4.BD.93.E7.9A.84.E4.BF.A1.E6.81.AF"><span class="tocnumber">3</span> <span class="toctext">发现Jabber实体的信息</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#.E5.9F.BA.E6.9C.AC.E5.8D.8F.E8.AE.AE"><span class="tocnumber">3.1</span> <span class="toctext">基本协议</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#.E4.BF.A1.E6.81.AF.E8.8A.82.E7.82.B9"><span class="tocnumber">3.2</span> <span class="toctext">信息节点</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="#.E5.8F.91.E7.8E.B0.E4.B8.8EJabber.E5.AE.9E.E4.BD.93.E7.9B.B8.E5.85.B3.E7.9A.84.E6.9D.A1.E7.9B.AE"><span class="tocnumber">4</span> <span class="toctext">发现与Jabber实体相关的条目</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#.E5.9F.BA.E6.9C.AC.E5.8D.8F.E8.AE.AE_2"><span class="tocnumber">4.1</span> <span class="toctext">基本协议</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#.E6.9D.A1.E7.9B.AE.E8.8A.82.E7.82.B9"><span class="tocnumber">4.2</span> <span class="toctext">条目节点</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#.E8.8A.82.E7.82.B9.E5.B1.82.E6.AC.A1.E7.BB.93.E6.9E.84"><span class="tocnumber">4.3</span> <span class="toctext">节点层次结构</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#.E5.AE.9E.E4.BD.93.E5.92.8C.E5.85.B6.E6.9D.A1.E7.9B.AE.E7.9A.84.E5.85.B3.E7.B3.BB"><span class="tocnumber">4.4</span> <span class="toctext">实体和其条目的关系</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="#.E5.8F.91.E5.B8.83.E5.8F.AF.E7.94.A8.E7.9A.84.E6.9D.A1.E7.9B.AE"><span class="tocnumber">5</span> <span class="toctext">发布可用的条目</span></a></li>
<li class="toclevel-1 tocsection-12"><a href="#.E5.AE.9E.E7.8E.B0.E6.B3.A8.E6.84.8F.E4.BA.8B.E9.A1.B9"><span class="tocnumber">6</span> <span class="toctext">实现注意事项</span></a>
<ul>
<li class="toclevel-2 tocsection-13"><a href="#.E4.BF.A1.E6.81.AF.E8.AF.B7.E6.B1.82.E6.95.B0"><span class="tocnumber">6.1</span> <span class="toctext">信息请求数</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#.E8.AF.B7.E6.B1.82.E7.9A.84.E6.9D.A1.E7.9B.AE.E6.95.B0"><span class="tocnumber">6.2</span> <span class="toctext">请求的条目数</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#.E5.93.8D.E5.BA.94.E4.B8.80.E8.87.B4.E6.80.A7"><span class="tocnumber">6.3</span> <span class="toctext">响应一致性</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-16"><a href="#.E9.94.99.E8.AF.AF.E6.9D.A1.E4.BB.B6"><span class="tocnumber">7</span> <span class="toctext">错误条件</span></a></li>
<li class="toclevel-1 tocsection-17"><a href="#.E5.AE.89.E5.85.A8.E4.BA.8B.E9.A1.B9"><span class="tocnumber">8</span> <span class="toctext">安全事项</span></a></li>
<li class="toclevel-1 tocsection-18"><a href="#IANA.E4.BA.8B.E9.A1.B9"><span class="tocnumber">9</span> <span class="toctext">IANA事项</span></a></li>
<li class="toclevel-1 tocsection-19"><a href="#XMPP.E7.99.BB.E8.AE.B0.E4.BA.8B.E9.A1.B9"><span class="tocnumber">10</span> <span class="toctext">XMPP登记事项</span></a>
<ul>
<li class="toclevel-2 tocsection-20"><a href="#.E5.8D.8F.E8.AE.AE.E5.90.8D.E5.AD.97.E7.A9.BA.E9.97.B4"><span class="tocnumber">10.1</span> <span class="toctext">协议名字空间</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#.E7.99.BB.E8.AE.B0.E5.A4.84"><span class="tocnumber">10.2</span> <span class="toctext">登记处</span></a>
<ul>
<li class="toclevel-3 tocsection-22"><a href="#.E8.BA.AB.E4.BB.BD.E7.A7.8D.E7.B1.BB.E5.8F.8A.E7.B1.BB.E5.9E.8B.E7.99.BB.E8.AE.B0"><span class="tocnumber">10.2.1</span> <span class="toctext">身份种类及类型登记</span></a>
<ul>
<li class="toclevel-4 tocsection-23"><a href="#.E8.BF.87.E7.A8.8B"><span class="tocnumber">10.2.1.1</span> <span class="toctext">过程</span></a></li>
<li class="toclevel-4 tocsection-24"><a href="#.E5.88.9D.E5.A7.8B.E6.8F.90.E4.BA.A4"><span class="tocnumber">10.2.1.2</span> <span class="toctext">初始提交</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-25"><a href="#.E7.89.B9.E6.80.A7.E6.B3.A8.E5.86.8C"><span class="tocnumber">10.2.2</span> <span class="toctext">特性注册</span></a>
<ul>
<li class="toclevel-4 tocsection-26"><a href="#.E8.BF.87.E7.A8.8B_2"><span class="tocnumber">10.2.2.1</span> <span class="toctext">过程</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-27"><a href="#.E7.9F.A5.E5.90.8D.E8.8A.82.E7.82.B9"><span class="tocnumber">10.2.3</span> <span class="toctext">知名节点</span></a>
<ul>
<li class="toclevel-4 tocsection-28"><a href="#.E8.BF.87.E7.A8.8B_3"><span class="tocnumber">10.2.3.1</span> <span class="toctext">过程</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2 tocsection-29"><a href="#URI.E6.9F.A5.E8.AF.A2.E7.B1.BB.E5.9E.8B"><span class="tocnumber">10.3</span> <span class="toctext">URI查询类型</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-30"><a href="#XML.E6.9E.B6.E6.9E.84"><span class="tocnumber">11</span> <span class="toctext">XML架构</span></a>
<ul>
<li class="toclevel-2 tocsection-31"><a href="#disco.23info"><span class="tocnumber">11.1</span> <span class="toctext">disco#info</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="#disco.23items"><span class="tocnumber">11.2</span> <span class="toctext">disco#items</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-33"><a href="#.E4.BD.9C.E8.80.85.E5.A4.87.E6.B3.A8"><span class="tocnumber">12</span> <span class="toctext">作者备注</span></a></li>
<li class="toclevel-1 tocsection-34"><a href="#.E9.99.84.E5.BD.95"><span class="tocnumber">13</span> <span class="toctext">附录</span></a>
<ul>
<li class="toclevel-2 tocsection-35"><a href="#.E9.99.84.E5.BD.95A:.E6.96.87.E6.A1.A3.E4.BF.A1.E6.81.AF"><span class="tocnumber">13.1</span> <span class="toctext">附录A:文档信息</span></a></li>
<li class="toclevel-2 tocsection-36"><a href="#.E9.99.84.E5.BD.95B:.E4.BD.9C.E8.80.85.E4.BF.A1.E6.81.AF"><span class="tocnumber">13.2</span> <span class="toctext">附录B:作者信息</span></a></li>
<li class="toclevel-2"><a href="#.E9.99.84.E5.BD.95C:.E6.B3.95.E5.BE.8B.E9.80.9A.E5.91.8A"><span class="tocnumber">13.3</span> <span class="toctext">附录C:法律通告</span></a></li>
<li class="toclevel-2"><a href="#.E9.99.84.E5.BD.95D:.E5.92.8CXMPP.E7.9A.84.E5.85.B3.E7.B3.BB"><span class="tocnumber">13.4</span> <span class="toctext">附录D:和XMPP的关系</span></a></li>
<li class="toclevel-2"><a href="#.E9.99.84.E5.BD.95E:.E8.AE.A8.E8.AE.BA.E5.9C.B0.E7.82.B9"><span class="tocnumber">13.5</span> <span class="toctext">附录E:讨论地点</span></a></li>
<li class="toclevel-2"><a href="#.E9.99.84.E5.BD.95F:.E9.9C.80.E6.B1.82.E4.B8.80.E8.87.B4.E6.80.A7"><span class="tocnumber">13.6</span> <span class="toctext">附录F:需求一致性</span></a></li>
<li class="toclevel-2 tocsection-37"><a href="#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8"><span class="tocnumber">13.7</span> <span class="toctext">附录G:备注</span></a></li>
<li class="toclevel-2 tocsection-38"><a href="#.E9.99.84.E5.BD.95H:.E4.BF.AE.E8.AE.A2.E5.8E.86.E5.8F.B2"><span class="tocnumber">13.8</span> <span class="toctext">附录H:修订历史</span></a></li>
</ul>
</li>
</ul>
</td></tr></table>
<h2> <span class="mw-headline" id=".E7.BB.AA.E8.AE.BA">绪论</span></h2>
<p>在Jabber网络中发现实体相关信息的能力是极有价值的。这些信息包括实体支持的特性或支持的协议、实体的类型或身份、同原实体以某种方式相联系的另外一些实体等（这些实体通常当作“父”实体的“子”实体）。虽然<a href="/RFC3920" title="RFC3920">XMPP Core</a> <a href="/XEP-0030#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0030">1</a>并没有定义怎样做的机制，但在Jabber社区内，过去已经有几个协议用在了服务发现上,特别是 <a rel="nofollow" class="external text" href="http://xmpp.org/extensions/xep-0011.html">Jabber Browsing</a> <a href="/XEP-0030#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0030">2</a>和<a rel="nofollow" class="external text" href="http://xmpp.org/extensions/xep-0094.html">Agent Information</a> <a href="/XEP-0030#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0030">3</a>上。然而，这些协议总使人感觉不那么合适，其原因如下：
</p>
<ol><li> Jabber Browsing 和 Agent Information 都不容易扩展。例如，在XEP－0011中列出JID类型的种类及子类都明确地定义为唯一的正式种类，向列表加入新的JID类型都要修改XEP－0011。而Jabber Browsing规范允许用非正式种类和以‘x-’打头的类型，这会产生移植问题。这种适应性的缺乏违反了Jabber社区的核心<a rel="nofollow" class="external text" href="http://xmpp.org/extensions/xep-0134.html">XMPP协议设计原则</a> <a href="/XEP-0030#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0030">4</a>之一 。
</li><li> 在 Agent Information 协议中，没有声明所支持的特性的方法。虽然Jabber Browsing包含了这样的机制，但表达一个特性的有效性的唯一方法是声明一个所支持的名字空间。然而，有些特性也许并非唯一地对应一个协议名字空间，它只是特性的一个实现，但并是唯一的一个。
</li><li> 一个Jabber Browsing 结果返回一个组合，由（1）Jabber实体支持的名字空间，（2）与Jabber实体相关联的条目，（3）相关条目支持的名字空间组成。这种方法混淆了信息级别，要求父节点知晓子节点的一切，也就引入了极大的混乱。
</li><li> 在Jabber Browsing 和 Agent Information中，要求条目们(items)必须可寻址为JIDs；然而，这在有些应用中是做不到的。
</li></ol>
<p>本文档旨在克服Jabber Browsing和Agent Information这两个协议的弱点。其结果就是一个用于服务发现的标准追踪协议（通常缩写为“disco”，就和一些熟悉的协议，如 <a rel="nofollow" class="external text" href="http://www.w3.org/TR/SOAP/">SOAP</a> <a href="/XEP-0030#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0030">5</a>一样）。
</p>
<h2> <span class="mw-headline" id=".E9.9C.80.E6.B1.82">需求</span></h2>
<p>在作者的头脑中构思的服务发现协议要满足下面的需求：
</p>
<ul><li> 协议 <b>必须</b> 支持它所取代的协议（Jabber Browsing 和 Agent Information）之全部功能
</li></ul>
<ul><li> 有三种关于一个实体的信息需要发现：
</li></ul>
<dl><dd><ol><li> 它的基本身份（类型和/或目录）
</li><li> 它提供的特性和支持的协议
</li><li> 与实体相关联的任何附加条目，无论它们是否能定址为JID
</li></ol>
</dd></dl>
<p>三种信息都 <b>必须</b> 支持，但前两种信息都与实体本身有关，而第三种信息与实体关联的条目有关；因此只需要两种不同的查询类型。
</p>
<ul><li> 子条目信息的发现 <b>必须</b> 通过向它自己，而不是向父实体，发送单独的发现请求实现。（其后果之一是，要发现整个三种信息，需要多个请求/响应对，以“遍历整个信息树”）。
</li></ul>
<ul><li> 身份和特性列表 <b>必须</b> 是柔性的。
</li></ul>
<ul><li> 协议本身 <b>必须</b> 是可扩展的。
</li></ul>
<h2> <span class="mw-headline" id=".E5.8F.91.E7.8E.B0Jabber.E5.AE.9E.E4.BD.93.E7.9A.84.E4.BF.A1.E6.81.AF">发现Jabber实体的信息</span></h2>
<h3> <span class="mw-headline" id=".E5.9F.BA.E6.9C.AC.E5.8D.8F.E8.AE.AE">基本协议</span></h3>
<p>一个发出请求的实体会想发现网络中另一个实体的信息。想得到的信息一般分为两种：
</p>
<ol><li> <b>目标实体的身份</b>(identity)。在disco中，一个实体的身份细分成种类(category)(服务器、客户端、网关、目录等等)及其种类中的特殊类型（IM服务器、电话对处理的客户端、MSN网关对AIM网关、用户目录对聊天室目录等等）。这个信息帮助请求实体测定服务组或服务“桶”，以使实体最恰当地放置其中（例如，或许用个合适的图标把实体显示成GUI）。一个实体 <b>可以</b> 有多个身份。当提供多个identity元素的时候，每个identity元素的 name 属性 <b>应该</b> 有相同的值。
</li><li> <b>目标实体提供的特性和支持的协议</b>。这个信息帮助请求实体测定对目标实体可以做什么样的动作（注册、搜索、联合等等），实体支持什么样的协议，以及是否有感兴趣的特性类型（例如，为了特性协商的目的）。
</li></ol>
<p>为了发现这样的信息，请求实体 <b>必须</b> 向目标实体的JID发送类型为“get”的IQ节，包含一个用命名空间 '<a rel="nofollow" class="external free" href="http://jabber.org/protocol/disco#info'">http://jabber.org/protocol/disco#info'</a> 标识的空的 &lt;query/&gt; 元素（'to'的地址是 <b>必需的</b> ， <b>必须</b> 包含有效的JID；&lt;query&gt;元素的'node'属性是 <b>可选的</b> ，本文中 <a href="/XEP-0030#.E4.BF.A1.E6.81.AF.E8.8A.82.E7.82.B9" title="XEP-0030">信息节点</a> 和 <a href="/XEP-0030#.E6.9D.A1.E7.9B.AE.E8.8A.82.E7.82.B9" title="XEP-0030">条目节点</a> 一节对此有说明）。
</p><p><b>例1. 查询信息</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'get'</span>
    <span class="re0">from</span>=<span class="st0">'romeo@montague.net/orchard'</span>
    <span class="re0">to</span>=<span class="st0">'plays.shakespeare.lit'</span>
    <span class="re0">id</span>=<span class="st0">'info1'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/disco#info'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>然后目标实体 <b>必须</b> 返回一个IQ结果，或者返回一个错误（见本文<a href="/XEP-0030#.E9.94.99.E8.AF.AF.E6.9D.A1.E4.BB.B6" title="XEP-0030">错误条件</a>）。结果 <b>必须</b> 包含用命名空间'<a rel="nofollow" class="external free" href="http://jabber.org/propocol/disco#info'标识的">http://jabber.org/propocol/disco#info'标识的</a>&lt;query/&gt;元素，元素中依次包含一个或多个&lt;identity/&gt;元素及一个或多个&lt;feature/&gt;元素。（注意：每个实体 <b>必须</b> 至少有一个identity，每个实体 <b>必须</b> 至少支持 '<a rel="nofollow" class="external free" href="http://jabber.org/protocol/disco#info'">http://jabber.org/protocol/disco#info'</a> 特性；然而，并不要求一个实体一定返回一个结果，它也 <b>可以</b> 返回一个错误，最可能的是 &lt;feature-not-implemented/&gt; 或 &lt;service-unavilable/&gt;，虽然其他出错条件也是可以的）。
</p><p>每个&lt;identity/&gt;元素 <b>必须</b> 拥有'category'和'type'属性，用来说明实体的种类, 而且可以 MAY 拥有一个 'name' 属性为这个实体指定一个自然语言的名字; 这个 &lt;identity/&gt; 元素也可以 MAY 拥有一个标准的 'xml:lang' 属性, 它使实体能返回本地化的结果，如果必要的话(即, &lt;query/&gt; 元素可以 MAY 包含多个 &lt;identity/&gt; 元素，使用相同的 category+type 但是不同的 'xml:lang' 值；无论如何 &lt;query/&gt; 元素不能 MUST NOT 以相同的 category+type+xml:lang 和不同的 'name' 值包含多个 &lt;identity/&gt; 元素，).
</p><p>每个&lt;feature/&gt;元素 <b>必须</b> 拥有一个'var'属性，它的值是协议的命名空间或是实体提供的其他特性。
</p><p>如果象本文中<a href="/XEP-0030#XMPP.E7.99.BB.E8.AE.B0.E4.BA.8B.E9.A1.B9" title="XEP-0030">XMPP登记事项</a>一节说明的那样，种类/类型的值和特性值都在公共登记处注册了的话就更好了。
</p><p><b>例2. 信息请求的结果集</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'result'</span>
    <span class="re0">from</span>=<span class="st0">'plays.shakespeare.lit'</span>
    <span class="re0">to</span>=<span class="st0">'romeo@montague.net/orchard'</span>
    <span class="re0">id</span>=<span class="st0">'info1'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/disco#info'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;identity</span>
        <span class="re0">category</span>=<span class="st0">'conference'</span>
        <span class="re0">type</span>=<span class="st0">'text'</span>
        <span class="re0">name</span>=<span class="st0">'Play-Specific Chatrooms'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;identity</span>
        <span class="re0">category</span>=<span class="st0">'directory'</span>
        <span class="re0">type</span>=<span class="st0">'chatroom'</span>
        <span class="re0">name</span>=<span class="st0">'Play-Specific Chatrooms'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;feature</span> <span class="re0">var</span>=<span class="st0">'http://jabber.org/protocol/disco#info'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;feature</span> <span class="re0">var</span>=<span class="st0">'http://jabber.org/protocol/disco#items'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;feature</span> <span class="re0">var</span>=<span class="st0">'http://jabber.org/protocol/muc'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;feature</span> <span class="re0">var</span>=<span class="st0">'jabber:iq:register'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;feature</span> <span class="re0">var</span>=<span class="st0">'jabber:iq:search'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;feature</span> <span class="re0">var</span>=<span class="st0">'jabber:iq:time'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;feature</span> <span class="re0">var</span>=<span class="st0">'jabber:iq:version'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;/query<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>如果指定目标实体的JID不存在，服务器或其他认证实体 <b>应该</b> 返回一个&lt;item-not-found/&gt;错误，除非如果这么做会破坏在<a href="/RFC3920" title="RFC3920">XMPP Core</a>和<a href="/RFC3921" title="RFC3921">XMPP IM</a> <a href="/XEP-0030#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0030">6</a>中说明的隐私和安全事项，或是破坏本地隐私和安全策略（见本文<a href="/XEP-0030#.E5.AE.89.E5.85.A8.E4.BA.8B.E9.A1.B9" title="XEP-0030">安全事项</a>）:
</p><p><b>例3. 目标实体不存在</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'error'</span>
    <span class="re0">from</span>=<span class="st0">'plays.shakespeare.lit'</span>
    <span class="re0">to</span>=<span class="st0">'romeo@montague.net/orchard'</span>
    <span class="re0">id</span>=<span class="st0">'info1'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/disco#info'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;error</span> <span class="re0">code</span>=<span class="st0">'404'</span> <span class="re0">type</span>=<span class="st0">'cancel'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;item-not-found</span> <span class="re0">xmlns</span>=<span class="st0">'urn:ietf:params:xml:ns:xmpp-stanzas'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;/error<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>如果隐私和安全事项或策略阻止服务器或其他授权实体返回&lt;item-not-found/&gt;错误，取而代之它 <b>应该</b> 返回一个&lt;service-unavailable/&gt;错误:
</p><p><b>例4. 服务不可用</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'error'</span>
    <span class="re0">from</span>=<span class="st0">'plays.shakespeare.lit'</span>
    <span class="re0">to</span>=<span class="st0">'romeo@montague.net/orchard'</span>
    <span class="re0">id</span>=<span class="st0">'info1'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/disco#info'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;error</span> <span class="re0">code</span>=<span class="st0">'503'</span> <span class="re0">type</span>=<span class="st0">'cancel'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;service-unavailable</span> <span class="re0">xmlns</span>=<span class="st0">'urn:ietf:params:xml:ns:xmpp-stanzas'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;/error<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>当一个实体向一个由服务器做宿主的纯JID（&lt;account@domain.tld&gt;）发送disco#info请求的时候，这个服务器本身 <b>必须</b> 代表寄宿的帐号回应一个IQ错误或IQ结果。有关访问这些功能的重要规则，见本文的<a href="/XEP-0030#.E5.AE.89.E5.85.A8.E4.BA.8B.E9.A1.B9" title="XEP-0030">安全事项</a>一节。特别地，为响应向一个没有节点的纯JID发出的disco#info请求，如果访问没被拒绝，服务器 <b>应该</b> 为这个纯JID返回一个IQ结果，里面的主 identity <b>应该</b> 有具有合适类型的“account”种类，类型在 Service Discovery Identities 注册中说明（最可能的是类型"registered"）。注意：这使得那些已授权或被信任的实体能发现帐号帐号是否存在及帐号的类型（例如，在IM系统中，在把帐号加入联系人列表之前检测它是否存在）。
</p><p><b>例5. 从纯JID那里请求信息</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'get'</span>
    <span class="re0">from</span>=<span class="st0">'shakespeare.lit'</span>
    <span class="re0">to</span>=<span class="st0">'juliet@capulet.com'</span>
    <span class="re0">id</span>=<span class="st0">'info2'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/disco#info'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>这里我们假定shakespeare.lit被capulet.com信任，而帐号&lt;juliet@capulet.com&gt;是个注册帐号：
</p><p><b>例 6. 服务器替纯JID应答</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'result'</span>
    <span class="re0">from</span>=<span class="st0">'juliet@capulet.com'</span>
    <span class="re0">to</span>=<span class="st0">'shakespeare.lit'</span>
    <span class="re0">id</span>=<span class="st0">'info2'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/disco#info'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;identity</span> <span class="re0">category</span>=<span class="st0">'account'</span> <span class="re0">type</span>=<span class="st0">'registered'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;/query<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>向关联实体发出的查询结果会不同，或能得到更详细的信息。一个例子是向一个特别的会议室而不是父实体的会议服务发出查询：
</p><p><b>例7. 查询指定的会议室</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'get'</span>
    <span class="re0">from</span>=<span class="st0">'juliet@capulet.com/balcony'</span>
    <span class="re0">to</span>=<span class="st0">'balconyscene@plays.shakespeare.lit'</span>
    <span class="re0">id</span>=<span class="st0">'info3'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/disco#info'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span>
&#160;
<span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'result'</span>
    <span class="re0">from</span>=<span class="st0">'balconyscene@plays.shakespeare.lit'</span>
    <span class="re0">to</span>=<span class="st0">'juliet@capulet.com/balcony'</span>
    <span class="re0">id</span>=<span class="st0">'info3'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/disco#info'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;identity</span>
        <span class="re0">category</span>=<span class="st0">'conference'</span>
        <span class="re0">type</span>=<span class="st0">'text'</span>
        <span class="re0">name</span>=<span class="st0">'Romeo and Juliet, Act II, Scene II'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;feature</span> <span class="re0">var</span>=<span class="st0">'http://jabber.org/protocol/disco#info'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;feature</span> <span class="re0">var</span>=<span class="st0">'http://jabber.org/protocol/muc'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;feature</span> <span class="re0">var</span>=<span class="st0">'http://jabber.org/protocol/feature-neg'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;feature</span> <span class="re0">var</span>=<span class="st0">'muc-password'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;feature</span> <span class="re0">var</span>=<span class="st0">'muc-hidden'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;feature</span> <span class="re0">var</span>=<span class="st0">'muc-temporary'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;feature</span> <span class="re0">var</span>=<span class="st0">'muc-open'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;feature</span> <span class="re0">var</span>=<span class="st0">'muc-unmoderated'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;feature</span> <span class="re0">var</span>=<span class="st0">'muc-nonanonymous'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;/query<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>另一个例子是向一个带明确资源连接的IM用户发出查询：
</p><p><b>例 8. 查询连接资源的更详细的信息</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'get'</span>
    <span class="re0">from</span>=<span class="st0">'juliet@capulet.com/balcony'</span>
    <span class="re0">to</span>=<span class="st0">'romeo@montague.net/orchard'</span>
    <span class="re0">id</span>=<span class="st0">'info4'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/disco#info'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span>
&#160;
<span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'result'</span>
    <span class="re0">from</span>=<span class="st0">'romeo@montague.net/orchard'</span>
    <span class="re0">to</span>=<span class="st0">'juliet@capulet.com/balcony'</span>
    <span class="re0">id</span>=<span class="st0">'info4'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/disco#info'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;identity</span>
        <span class="re0">category</span>=<span class="st0">'client'</span>
        <span class="re0">type</span>=<span class="st0">'pc'</span>
        <span class="re0">name</span>=<span class="st0">'Gabber'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;feature</span> <span class="re0">var</span>=<span class="st0">'jabber:iq:time'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;feature</span> <span class="re0">var</span>=<span class="st0">'jabber:iq:version'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;/query<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<h3> <span class="mw-headline" id=".E4.BF.A1.E6.81.AF.E8.8A.82.E7.82.B9">信息节点</span></h3>
<p>一个 disco#info 也查询可以 MAY 被定向到特定的关联到一个JID的节点标识符, 尽管节点的主要用途是成为条目节点 Items Nodes 而不是信息节点 info nodes:
</p><p><b>例子 9. 查询一个特定的JID和node的组合</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'get'</span>
    <span class="re0">from</span>=<span class="st0">'romeo@montague.net/orchard'</span>
    <span class="re0">to</span>=<span class="st0">'mim.shakespeare.lit'</span>
    <span class="re0">id</span>=<span class="st0">'info3'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/disco#info'</span> 
         <span class="re0">node</span>=<span class="st0">'http://jabber.org/protocol/commands'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>如果请求包含 'node' 属性, 应答必须 MUST 镜像这个指定的 'node' 属性以确保请求和应答之间的相关性.
</p><p><b>例子 10. JID+node结果</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'result'</span>
    <span class="re0">from</span>=<span class="st0">'mim.shakespeare.lit'</span>
    <span class="re0">to</span>=<span class="st0">'romeo@montague.net/orchard'</span>
    <span class="re0">id</span>=<span class="st0">'info3'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/disco#info'</span> 
         <span class="re0">node</span>=<span class="st0">'http://jabber.org/protocol/commands'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;identity</span>
        <span class="re0">category</span>=<span class="st0">'automation'</span>
        <span class="re0">type</span>=<span class="st0">'command-list'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;/query<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p><br />
</p>
<h2> <span class="mw-headline" id=".E5.8F.91.E7.8E.B0.E4.B8.8EJabber.E5.AE.9E.E4.BD.93.E7.9B.B8.E5.85.B3.E7.9A.84.E6.9D.A1.E7.9B.AE">发现与Jabber实体相关的条目</span></h2>
<h3> <span class="mw-headline" id=".E5.9F.BA.E6.9C.AC.E5.8D.8F.E8.AE.AE_2">基本协议</span></h3>
<p>请求实体为了发现一个Jabber实体相关联的条目，它 <b>必须</b> 向目标实体发送类型为"get"的IQ节，其中包含一个空的&lt;query/&gt;元素，受限命名空间为 '<a rel="nofollow" class="external free" href="http://jabber.org/protocol/disco#items'：">http://jabber.org/protocol/disco#items'：</a>
</p><p><b>例11. 请求全部条目</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'get'</span>
    <span class="re0">from</span>=<span class="st0">'romeo@montague.net/orchard'</span>
    <span class="re0">to</span>=<span class="st0">'shakespeare.lit'</span>
    <span class="re0">id</span>=<span class="st0">'items1'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/disco#items'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>目标实体 <b>必须</b> 返回它的公开可用的条目列表，或者返回一个错误。条目列表 <b>必须</b> 是类型为"result"的IQ段，每个条目用&lt;query/&gt;的子元素&lt;item/&gt;来说明，受限命名空间是 '<a rel="nofollow" class="external free" href="http://jabber.org/protocol/disco#items'">http://jabber.org/protocol/disco#items'</a> （子元素 &lt;item/&gt; <b>必须</b> 用'jid'属性指定条目的JID， <b>可以</b> 用'name'属性说明条目的自然语言名）:
</p><p><b>例12. 所有条目的结果集</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'result'</span>
    <span class="re0">from</span>=<span class="st0">'shakespeare.lit'</span>
    <span class="re0">to</span>=<span class="st0">'romeo@montague.net/orchard'</span>
    <span class="re0">id</span>=<span class="st0">'items1'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/disco#items'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;item</span> <span class="re0">jid</span>=<span class="st0">'people.shakespeare.lit'</span>
          <span class="re0">name</span>=<span class="st0">'Directory of Characters'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;item</span> <span class="re0">jid</span>=<span class="st0">'plays.shakespeare.lit'</span>
          <span class="re0">name</span>=<span class="st0">'Play-Specific Chatrooms'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;item</span> <span class="re0">jid</span>=<span class="st0">'mim.shakespeare.lit'</span>
          <span class="re0">name</span>=<span class="st0">'Gateway to Marlowe IM'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;item</span> <span class="re0">jid</span>=<span class="st0">'words.shakespeare.lit'</span>
          <span class="re0">name</span>=<span class="st0">'Shakespearean Lexicon'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;item</span> <span class="re0">jid</span>=<span class="st0">'globe.shakespeare.lit'</span>
          <span class="re0">name</span>=<span class="st0">'Calendar of Performances'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;item</span> <span class="re0">jid</span>=<span class="st0">'headines.shakespeare.lit'</span>
          <span class="re0">name</span>=<span class="st0">'Latest Shakespearean News'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;item</span> <span class="re0">jid</span>=<span class="st0">'catalog.shakespeare.lit'</span>
          <span class="re0">name</span>=<span class="st0">'Buy Shakespeare Stuff!'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;item</span> <span class="re0">jid</span>=<span class="st0">'en2fr.shakespeare.lit'</span>
          <span class="re0">name</span>=<span class="st0">'French Translation Service'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;/query<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>&lt;item/&gt;元素 <b>必须不可</b> 包含XML字符数据，并 <b>应该</b> 是空元素；当然它 <b>可以</b> 在其他命名空间中包含XML数据，如果一个Jabber实现不理解这些数据，则 <b>必须</b> 忽略它。
</p><p>如果没有条目与实体相关联（或者这些条目并非公开可用的），目标实体必须向请求实体返回一个空的query元素：
</p><p><b>例13. 空的结果集</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'result'</span>
    <span class="re0">from</span>=<span class="st0">'shakespeare.lit'</span>
    <span class="re0">to</span>=<span class="st0">'romeo@montague.net/orchard'</span>
    <span class="re0">id</span>=<span class="st0">'items1'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/disco#items'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>就请求disco#info来说，当实体向寄生在一个服务器的纯JID(&lt;account@domain.tld&gt;)发送disco#items请求时，宿主服务器自身 <b>必须</b> 代表寄生帐号回应。有关访问这个功能的重要准则，见本文的<a href="/XEP-0030#.E5.AE.89.E5.85.A8.E4.BA.8B.E9.A1.B9" title="XEP-0030">安全事项</a>一节。特别地，为响应发到一个不带节点的纯JID的disco#info请求，如果访问没被拒决，服务器 <b>应该</b> 返回相关的条目，包括适当的已连接或可用的资源:
</p><p><b>例14. 从一个纯JID请求条目</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'get'</span>
    <span class="re0">from</span>=<span class="st0">'shakespeare.lit'</span>
    <span class="re0">to</span>=<span class="st0">'juliet@capulet.com'</span>
    <span class="re0">id</span>=<span class="st0">'items2'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/disco#items'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>在这儿我们假设shakespeare.lit被capulet.com信任，帐号&lt;juliet@capulet.com&gt;有两个可用的资源：
</p><p><b>例15. 服务器代表纯JID响应</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'result'</span>
    <span class="re0">from</span>=<span class="st0">'juliet@capulet.com'</span>
    <span class="re0">to</span>=<span class="st0">'shakespeare.lit'</span>
    <span class="re0">id</span>=<span class="st0">'items2'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/disco#items'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;item</span> <span class="re0">jid</span>=<span class="st0">'juliet@capulet.com/balcony'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;item</span> <span class="re0">jid</span>=<span class="st0">'juliet@capulet.com/chamber'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;/query<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<h3> <span class="mw-headline" id=".E6.9D.A1.E7.9B.AE.E8.8A.82.E7.82.B9">条目节点</span></h3>
<p>与实体相关联的条目有可能不能写成JID地址的形式；这样的例子包括，储存在收件箱的离线消息（见<a rel="nofollow" class="external text" href="http://www.xmpp.org/extensions/xep-0013.html">柔性离线消息获取</a> <a href="/XEP-0030#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0030">7</a>）、有Jabber能力的博客中的条目、与一个客户或组件关联的XML-RPC服务、在一个在线交易系统中的可用条目 (例如, 一个目录或拍卖)、位于一个NNTP网关的新闻贴、及由<a href="/XEP-0060" title="XEP-0060">发布-订阅</a> <a href="/XEP-0030#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0030">8</a>组件 主办的主题等等。为处理这些条目，&lt;item/&gt;元素 <b>可以</b> 有个 <b>可选的</b> 'node'属性来补充这个 <b>必须的</b> 'jid'属性。
</p><p>节点的属性值可以有或没有语义上的含义；从服务发现的观点来看，一个节点只不过是个与实体相联系的某种东西。为了发现节点更多的东西，请求实体 <b>必须</b> 在查询实体的JID的时候指定节点。如果'node'属性的值有语义上的含义，意味着这个含义是由"使用的协议"或应用提供的，而不是由服务发现协议决定的。<b>不应该</b> 包含节点属性，除非需要提供，或者要发现信息的实体不能直接写成JID地址的形式（就是说，如果相关的条目能写成一个JID就不要包含一个节点）。'node'属性的值 <b>必须不能</b> 为空。
</p><p>在下面的例子中，用户从一个在线目录服务中请求所有可用的条目：
</p><p><b>例16. 请求节点</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'get'</span>
    <span class="re0">from</span>=<span class="st0">'romeo@montague.net/orchard'</span>
    <span class="re0">to</span>=<span class="st0">'catalog.shakespeare.lit'</span>
    <span class="re0">id</span>=<span class="st0">'items2'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/disco#items'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>如果有与目标实体相关的条目但它们不能写成JID地址，那么服务 <b>应该</b> 返回一个节点列表（每个&lt;item/&gt;元素 <b>必须</b> 有一个'jid'属性， <b>应该</b> 有个'node'属性， <b>可以</b> 有个'name'属性）：
</p><p><b>例17. 服务返回节点</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'result'</span>
    <span class="re0">from</span>=<span class="st0">'catalog.shakespeare.lit'</span>
    <span class="re0">to</span>=<span class="st0">'romeo@montague.net/orchard'</span>
    <span class="re0">id</span>=<span class="st0">'items2'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/disco#items'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;item</span> <span class="re0">jid</span>=<span class="st0">'catalog.shakespeare.lit'</span>
          <span class="re0">node</span>=<span class="st0">'books'</span>
          <span class="re0">name</span>=<span class="st0">'Books by and about Shakespeare'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;item</span> <span class="re0">jid</span>=<span class="st0">'catalog.shakespeare.lit'</span>
          <span class="re0">node</span>=<span class="st0">'clothing'</span>
          <span class="re0">name</span>=<span class="st0">'Wear your literary taste with pride'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;item</span> <span class="re0">jid</span>=<span class="st0">'catalog.shakespeare.lit'</span>
          <span class="re0">node</span>=<span class="st0">'music'</span>
          <span class="re0">name</span>=<span class="st0">'Music from the time of Shakespeare'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;/query<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>在返回上面的查询时，也许有更多的节点与"第一级"节点相关联（比如，节点可能是一个类别，有下级条目）。请求实体可以通过向这个JID发送请求，并在请求中说明感兴趣的节点，来进一步查询节点。
</p><p><b>例18. 请求更多的节点</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'get'</span>
    <span class="re0">from</span>=<span class="st0">'romeo@montague.net/orchard'</span>
    <span class="re0">to</span>=<span class="st0">'catalog.shakespeare.lit'</span>
    <span class="re0">id</span>=<span class="st0">'items3'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/disco#items'</span> 
         <span class="re0">node</span>=<span class="st0">'music'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>然后服务返回与“父”节点相关的更深层的节点。在下面的例子中，服务本身将返回的节点按字母顺序排序，不过这种结构是实现的问题而不是协议的要求。
</p><p><b>例19. 服务返回更深层的节点</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'result'</span>
    <span class="re0">from</span>=<span class="st0">'catalog.shakespeare.lit'</span>
    <span class="re0">to</span>=<span class="st0">'romeo@montague.net/orchard'</span>
    <span class="re0">id</span>=<span class="st0">'items3'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/disco#items'</span> 
         <span class="re0">node</span>=<span class="st0">'music'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;item</span> <span class="re0">jid</span>=<span class="st0">'catalog.shakespeare.lit'</span>
          <span class="re0">node</span>=<span class="st0">'music/A'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;item</span> <span class="re0">jid</span>=<span class="st0">'catalog.shakespeare.lit'</span>
          <span class="re0">node</span>=<span class="st0">'music/B'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;item</span> <span class="re0">jid</span>=<span class="st0">'catalog.shakespeare.lit'</span>
          <span class="re0">node</span>=<span class="st0">'music/C'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;item</span> <span class="re0">jid</span>=<span class="st0">'catalog.shakespeare.lit'</span>
          <span class="re0">node</span>=<span class="st0">'music/D'</span><span class="re2">/&gt;</span><span class="co3">
    .
    .
    .
  </span><span class="re1">&lt;/query<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>如果想要，请求实体可以继续查询更深层的节点：
</p><p><b>例20. 请求更深层节点</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'get'</span>
    <span class="re0">from</span>=<span class="st0">'romeo@montague.net/orchard'</span>
    <span class="re0">to</span>=<span class="st0">'catalog.shakespeare.lit'</span>
    <span class="re0">id</span>=<span class="st0">'items4'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/disco#items'</span> 
         <span class="re0">node</span>=<span class="st0">'music/D'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p><b>例21. 服务返回更多的节点</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'result'</span>
    <span class="re0">from</span>=<span class="st0">'catalog.shakespeare.lit'</span>
    <span class="re0">to</span>=<span class="st0">'romeo@montague.net/orchard'</span>
    <span class="re0">id</span>=<span class="st0">'items4'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/disco#items'</span> 
         <span class="re0">node</span>=<span class="st0">'music/D'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;item</span> <span class="re0">jid</span>=<span class="st0">'catalog.shakespeare.lit'</span>
          <span class="re0">node</span>=<span class="st0">'music/D/dowland-firstbooke'</span>
          <span class="re0">name</span>=<span class="st0">'John Dowland - First Booke of Songes or Ayres'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;item</span> <span class="re0">jid</span>=<span class="st0">'catalog.shakespeare.lit'</span>
          <span class="re0">node</span>=<span class="st0">'music/D/dowland-solace'</span>
          <span class="re0">name</span>=<span class="st0">'John Dowland - A Pilgrimes Solace'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;/query<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<h3> <span class="mw-headline" id=".E8.8A.82.E7.82.B9.E5.B1.82.E6.AC.A1.E7.BB.93.E6.9E.84">节点层次结构</span></h3>
<p>前面的例子显示了节点的层次结构，里面的有些节点是分支（也即包含更深层的节点），有些节点是叶子（即不包含更深层的节点）。 <b>应该</b> 用"hierarchy"这个category来区分这些节点，“分支”和“叶子”表示这个种类category的具体类型type。
</p><p>如果使用了分层种类，层次结构中的每个节点 <b>必须</b> 标识为要么是分支要么是叶子；然而，因为一个节点 <b>可以</b> 有多个身份，所以任一节点也 <b>可以</b> 有一个除了“层次/分支”或“层次/叶子”结构外的身份。
</p><p>因此，上面显示的例子中，一个向"music/D"的disco#info请求会产生&lt;identity category='hierarchy' type='branch'/&gt;，而向"&lt;music/D/dowland-firstbooke&gt;"节点发出的请求会产生&lt;identity category='hierarchy' type='leaf'/&gt;（每个节点会产生恰当的附加身份）。
</p>
<h3> <span class="mw-headline" id=".E5.AE.9E.E4.BD.93.E5.92.8C.E5.85.B6.E6.9D.A1.E7.9B.AE.E7.9A.84.E5.85.B3.E7.B3.BB">实体和其条目的关系</span></h3>
<p>本节要说明的是一个实体和它的相关条目之间更详细的关系。
</p><p>一般情况下，由一个实体在disco#items结果中返回的条目 <b>必须</b> 是与实体有隶属关系的条目 --或者是实体直接控制条目本身（比如，实体拥有的Publish-Subscribe节点），或者实体至少能以Jabber网络中规范的方式提供或确保这些条目（例如，群聊房间直接寄宿于一个多用户聊天服务或一个通过网关提供访问的IRC频道）。
</p><p>这样的关系并不限制所属实体的地址与相关实体地址间的关系。特别地，下面任何一种情况都是非常合适的：
</p>
<ol><li> 查询一个实体（JID1）的条目时，接收到可定址为JID的条目列表；每个相关条目都有自己的JID，但这些JID都与JID1不相同。
</li><li> 查询一个实体（JID1）的条目时，接收到不可定址为JID的条目列表；每个相关条目有各自的JID＋Node，其中JID与JID1相同但每个NodeId都是唯一的。
</li><li> 查询一个实体（JID1+NodeID1）的条目时，接收到可定址为JID的条目列表；每个相关条目有自己的JID，但没有JID与JID1相同。
</li><li> 查询一个实体（JID1+NodeId1）的条目时，接收到不能定址为JID的细节列表；每个相关条目有自己的JID+node，但是没有JID＋node与JID1＋NodeID1相同，并且每个NodeID都在相关JID的上下文中都是唯一的。
</li></ol>
<p>另外，返回的结果也 <b>可以</b> 是混合型的，这样查询一个JID或JID＋node会产生（1）定址为JID的项和（2）定址为JID＋node这两种的组合。
</p><p>考虑一下实体的这种情况，它拥有多个 发布-订阅 节点 --例如，一个人拥有多个音乐演奏家节点。下面的例子演示了disco#items查询及其结果会是什么样子（使用了在<a rel="nofollow" class="external text" href="http://www.xmpp.org/extensions/xep-0118.html">User Tune</a> <a href="/XEP-0030#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0030">9</a>中定义的协议）：
</p><p><b>例22. 用户请求有关实体的音乐</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">from</span>=<span class="st0">'juliet@capulet.com/chamber'</span>
    <span class="re0">id</span>=<span class="st0">'items4'</span>
    <span class="re0">to</span>=<span class="st0">'romeo@montague.net'</span>
    <span class="re0">type</span>=<span class="st0">'get'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/disco#items'</span> 
         <span class="re0">node</span>=<span class="st0">'http://jabber.org/protocol/tune'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>被查询的实体现在返回一个它控制的 发布－订阅publish-subscribe 节点的列表，每个节点寄宿于不同的发布订阅 pubsub 服务：
</p><p><b>例23. 实体返回多项条目</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">from</span>=<span class="st0">'romeo@montague.net'</span>
    <span class="re0">id</span>=<span class="st0">'items4'</span>
    <span class="re0">to</span>=<span class="st0">'juliet@capulet.com/chamber'</span>
    <span class="re0">type</span>=<span class="st0">'get'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/disco#items'</span> 
         <span class="re0">node</span>=<span class="st0">'http://jabber.org/protocol/tune'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;item</span> <span class="re0">jid</span>=<span class="st0">'pubsub.shakespeare.lit'</span>
          <span class="re0">name</span>=<span class="st0">'Romeo&amp;apos;s CD player'</span>
          <span class="re0">node</span>=<span class="st0">'s623nms9s3bfh8js'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;item</span> <span class="re0">jid</span>=<span class="st0">'pubsub.montague.net'</span>
          <span class="re0">node</span>=<span class="st0">'music/R/Romeo/iPod'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;item</span> <span class="re0">jid</span>=<span class="st0">'tunes.characters.lit'</span>
          <span class="re0">node</span>=<span class="st0">'g8k4kds9sd89djf3'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;/query<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<h2> <span class="mw-headline" id=".E5.8F.91.E5.B8.83.E5.8F.AF.E7.94.A8.E7.9A.84.E6.9D.A1.E7.9B.AE">发布可用的条目</span></h2>
<p>这个特性已经被移到定义 XMPP 发行-订阅 技术的 <a href="/XEP-0060" title="XEP-0060">XEP-0060</a> 中去了.
</p>
<h2> <span class="mw-headline" id=".E5.AE.9E.E7.8E.B0.E6.B3.A8.E6.84.8F.E4.BA.8B.E9.A1.B9">实现注意事项</span></h2>
<h3> <span class="mw-headline" id=".E4.BF.A1.E6.81.AF.E8.AF.B7.E6.B1.82.E6.95.B0">信息请求数</span></h3>
<p>当发出请求的应用是一个客户端的时候，在用户收到好友名册并收到名册中所有联系人的出席信息(例如, 展示可用)后，它也许想得到所有联系人的服务发现信息。不幸的是，用户的花名册可能很长，结果登录后会向外发出大量的disco#info查询和接收进来大量的disco#info响应。基于可扩展性和带宽利用的原因，并不希望有这种“发现洪流”，因此，客户端应用 <b>应该</b> 用<a rel="nofollow" class="external text" href="http://www.xmpp.org/extensions/xep-0115.html">实体能力</a> <a href="/XEP-0030#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0030">10</a>来确定它们接收到了出席信息的那些实体的能力，而 <b>不应该</b> 向这些实体发送disco#info请求。
</p>
<h3> <span class="mw-headline" id=".E8.AF.B7.E6.B1.82.E7.9A.84.E6.9D.A1.E7.9B.AE.E6.95.B0">请求的条目数</span></h3>
<p>为了获取实体及相关条目的完整信息，发出请求的应用程序需要“遍历”细节树。很自然，这会产生大量的请求和响应。如果条目列表很长的话（比如，超过20条），发出请求的应用程序接下来 <b>不应该</b> 对所有的条目发送请求。日常需要维护大量条目的那些实体（如IRC网关或NNTP服务） <b>应该</b> 将节点组织成层次结构，并且/或者通过像 <a rel="nofollow" class="external text" href="http://www.xmpp.org/extensions/xep-0055.html">Jabber Search</a> <a href="/XEP-0030#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0030">11</a>之类的协议，提供更健壮的搜索能力； <b>不应该</b> 通过服务发现返回极其巨大的结果集。
</p>
<h3> <span class="mw-headline" id=".E5.93.8D.E5.BA.94.E4.B8.80.E8.87.B4.E6.80.A7">响应一致性</span></h3>
<p>本文档推荐但并不要求响应实体对来自不同的请求实体的相同的请求返回一样的结果（比如，一个实体基于对请求实体的信任度或是已知能力的不同，可能返回不同的细节或特性列表）。然而，响应实体 <b>应该</b> 对发送到相同的 JID+node 组合的所有disco#info请求返回相同的&lt;identity/&gt;元素(category+type) 。
</p>
<h2> <span class="mw-headline" id=".E9.94.99.E8.AF.AF.E6.9D.A1.E4.BB.B6">错误条件</span></h2>
<p>如果特定的实体（JID或JID+node）不支持disco命名空间，拒绝对特定的请求实体或任何请求实体返回disco结果，它 <b>应该</b> 分别返回适当的错误信息（象&lt;service-unavailable/&gt;，&lt;forbidden/&gt;，或&lt;not-allowed/&gt;等等）。示例如下：
</p><p><b>例24. JID+node错误</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">type</span>=<span class="st0">'error'</span>
    <span class="re0">from</span>=<span class="st0">'mim.shakespeare.lit'</span>
    <span class="re0">to</span>=<span class="st0">'romeo@montague.net/orchard'</span>
    <span class="re0">id</span>=<span class="st0">'info3'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/disco#info'</span> 
         <span class="re0">node</span>=<span class="st0">'http://jabber.org/protocol/commands'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;error</span> <span class="re0">code</span>=<span class="st0">'405'</span> <span class="re0">type</span>=<span class="st0">'cancel'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;not-allowed</span> <span class="re0">xmlns</span>=<span class="st0">'urn:ietf:params:xml:ns:xmpp-stanzas'</span><span class="re2">/&gt;</span>
  <span class="re1">&lt;/error<span class="re2">&gt;</span></span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>根据应用的不同，也可以有其他的错误条件。
</p><p>下表总结了常见的错误条件，它们在服务发现Service Discovery的上下文中可能有特殊的含义（关于错误条件的语法和语义的信息，见<a rel="nofollow" class="external text" href="http://xmpp.org/extensions/xep-0086.html">错误条件映射</a>  <a href="/XEP-0030#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0030">12</a>）。
</p><p><b>表1: 错误条件</b>
</p>
<table border="1" cellspacing="0">
<tr>
<th>条件 </th>
<th> 原因
</th></tr>
<tr>
<td>&lt;item-not-found/&gt; </td>
<td> 指定目标实体的JID或JID+NodeID并不存在，并且依据隐私及安全事项和策略,这一事实可以暴露。
</td></tr>
<tr>
<td>&lt;service-unavailable/&gt; </td>
<td> 目标实体不支持这一协议，或者指定的目标实体并不存在，但这一事实因为隐私及安全事项不能暴露。
</td></tr></table>
<p>其他在<b>XMPP Core</b>中说明的错误条件也 <b>可以</b> 返回（&lt;forbidden/&gt;,&lt;not-allowed/&gt;,&lt;not-authorized/&gt;等等），包括应用专有的错误条件。
</p><p>正象上面说明的那样，如果一个实体没有相关的子条目，它 <b>必须</b> 返回一个空的&lt;query/&gt;元素（而不是一个错误）来响应disco#items请求。
</p>
<h2> <span class="mw-headline" id=".E5.AE.89.E5.85.A8.E4.BA.8B.E9.A1.B9">安全事项</span></h2>
<p>当实体暴露（通过disco#info响应）它支持的特定的协议或特性的时候，某些攻击会更容易发生；然而，一般来说，服务发现不会引入新的漏洞，因为恶意实体会通过发送对这些协议的特定的请求而不是服务发现请求，来发现响应实体支持哪些协议和特性。
</p><p>当响应实体应答从不同的请求实体接收到的服务发现请求的时候，它没有义务返回相同的服务发现响应。 它 <b>可以</b> 在响应前执行授权检测，以决定怎样（或是否）响应。
</p><p>服务器 <b>必须</b> 小心地控制对任何可能导致目录获取攻击或泻露已连接或可用资源的功能的访问，这些功能由服务器对发送到寄宿其中的纯JID(地址型如account@domain.tld)的disco#info和disco#items请求的响应组成，因为服务器要代表这个帐户响应这样的请求。处理发送到纯JID的服务发现请求时应用如下规则：
</p><p>1. 为了响应disco#info请求，如果下列条件之一为真，服务器 <b>必须</b> 返回&lt;service-unavailable/&gt;错误：
</p>
<ol><li> 目标实体不存在（无论请求指定的是否是一个节点）
</li><li> 请求实体未经授权从目标实体接收出席信息（也即，出席信息订阅的类型是"both"或"from"），或者请求实体不被信任（例如，在一个信任网络中的另一个服务器）。
</li></ol>
<p>2. 为了响应disco#items请求，服务器 <b>必须</b> 返回一个空结果集，如果：
</p>
<ol><li> 目标实体不存在（无论请求指定的是否是一个节点）
</li><li> 请求没有指定节点，唯一的条目是可用的资源（象在<b>RFC3921</b>中定义的那样），并且请求实体未经授权从目标实体接收出席信息（也即，出席信息订阅的类型是"both"或"from"），或者请求实体不被信任（例如，在一个信任网络中的另一个服务器）<a href="/XEP-0030#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0030">13</a>
</li></ol>
<h2> <span class="mw-headline" id="IANA.E4.BA.8B.E9.A1.B9">IANA事项</span></h2>
<p>本文档与<a rel="nofollow" class="external text" href="http://www.iana.org/">互联网编号分配授权机构</a> <a href="/XEP-0030#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0030">14</a>无关。
</p>
<h2> <span class="mw-headline" id="XMPP.E7.99.BB.E8.AE.B0.E4.BA.8B.E9.A1.B9">XMPP登记事项</span></h2>
<h3> <span class="mw-headline" id=".E5.8D.8F.E8.AE.AE.E5.90.8D.E5.AD.97.E7.A9.BA.E9.97.B4">协议名字空间</span></h3>
<p><a rel="nofollow" class="external text" href="http://www.xmpp.org/registrar/">XMPP Registrar</a> <a href="/XEP-0030#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0030">15</a>在它的协议名字空间注册项中包含了 '<a rel="nofollow" class="external free" href="http://jabber.org/protocol/disco#info'">http://jabber.org/protocol/disco#info'</a> 和 '<a rel="nofollow" class="external free" href="http://jabber.org/protocol/disco#items'">http://jabber.org/protocol/disco#items'</a> 名字空间
</p>
<h3> <span class="mw-headline" id=".E7.99.BB.E8.AE.B0.E5.A4.84">登记处</span></h3>
<h4> <span class="mw-headline" id=".E8.BA.AB.E4.BB.BD.E7.A7.8D.E7.B1.BB.E5.8F.8A.E7.B1.BB.E5.9E.8B.E7.99.BB.E8.AE.B0">身份种类及类型登记</span></h4>
<p>XMPP登记处 XMPP Registrar 维护着命名空间'<a rel="nofollow" class="external free" href="http://jabber.org/protocol/disco#info'里">http://jabber.org/protocol/disco#info'里</a>&lt;identity/&gt;元素的属性的'category'和'type'的注册值；见&lt;<a rel="nofollow" class="external free" href="http://www.xmpp.org/registrar/disco-categories.html">http://www.xmpp.org/registrar/disco-categories.html</a>&gt;
</p>
<h5> <span class="mw-headline" id=".E8.BF.87.E7.A8.8B">过程</span></h5>
<p>为了向注册项提交新值，注册人将按如下的形式定义XML段，然后将其包含在相关的XMPP扩展协议中或是发送邮件到&lt;registrar@xmpp.org&gt;：
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;category<span class="re2">&gt;</span></span>
  <span class="re1">&lt;name<span class="re2">&gt;</span></span><span class="co3">the name of the category (all lower-case)</span><span class="re1">&lt;/name<span class="re2">&gt;</span></span>
  <span class="re1">&lt;desc<span class="re2">&gt;</span></span><span class="co3">a natural-language description of the category</span><span class="re1">&lt;/desc<span class="re2">&gt;</span></span>
  <span class="re1">&lt;type<span class="re2">&gt;</span></span>
    <span class="re1">&lt;name<span class="re2">&gt;</span></span><span class="co3">the name of the specific type (all lower-case)</span><span class="re1">&lt;/name<span class="re2">&gt;</span></span>
    <span class="re1">&lt;desc<span class="re2">&gt;</span></span><span class="co3">a natural-language description of the type</span><span class="re1">&lt;/desc<span class="re2">&gt;</span></span>
    <span class="re1">&lt;doc<span class="re2">&gt;</span></span><span class="co3">the document (e.g., XEP) in which this type is specified</span><span class="re1">&lt;/doc<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/type<span class="re2">&gt;</span></span>
<span class="re1">&lt;/category<span class="re2">&gt;</span></span></pre></div></div>
<p>注册人每次可以注册一个以上的种类，每个种类包含在独立的&lt;category/&gt;元素中。每个注册人也可以每次注册一个以上的类型，每个类型包含在独立的&lt;type/&gt;子元素中。已有种类中的新类型的注册必须包含完整的XML片段，但不应包含种类的描述（仅有种类的名称）。
</p>
<h5> <span class="mw-headline" id=".E5.88.9D.E5.A7.8B.E6.8F.90.E4.BA.A4">初始提交</span></h5>
<p>本文档定义了一个种类的“层次结构”，它仅包含两个类型：“branch”和“leaf”；相关的注册提交项如下：
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;category<span class="re2">&gt;</span></span>
  <span class="re1">&lt;name<span class="re2">&gt;</span></span><span class="co3">hierarchy</span><span class="re1">&lt;/name<span class="re2">&gt;</span></span>
  <span class="re1">&lt;desc<span class="re2">&gt;</span></span><span class="co3">
    An entity that exists in the context of a 
    service discovery node hierarchy.
  </span><span class="re1">&lt;/desc<span class="re2">&gt;</span></span>
  <span class="re1">&lt;type<span class="re2">&gt;</span></span>
    <span class="re1">&lt;name<span class="re2">&gt;</span></span><span class="co3">branch</span><span class="re1">&lt;/name<span class="re2">&gt;</span></span>
    <span class="re1">&lt;desc<span class="re2">&gt;</span></span><span class="co3">
      A &quot;container node&quot; for other entities in a 
      service discovery node hierarchy.
    </span><span class="re1">&lt;/desc<span class="re2">&gt;</span></span>
    <span class="re1">&lt;doc<span class="re2">&gt;</span></span><span class="co3">XEP-0030</span><span class="re1">&lt;/doc<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/type<span class="re2">&gt;</span></span>
  <span class="re1">&lt;type<span class="re2">&gt;</span></span>
    <span class="re1">&lt;name<span class="re2">&gt;</span></span><span class="co3">leaf</span><span class="re1">&lt;/name<span class="re2">&gt;</span></span>
    <span class="re1">&lt;desc<span class="re2">&gt;</span></span><span class="co3">
      A &quot;terminal node&quot; in a service discovery 
      node hierarchy.
    </span><span class="re1">&lt;/desc<span class="re2">&gt;</span></span>
    <span class="re1">&lt;doc<span class="re2">&gt;</span></span><span class="co3">XEP-0030</span><span class="re1">&lt;/doc<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/type<span class="re2">&gt;</span></span>
<span class="re1">&lt;/category<span class="re2">&gt;</span></span></pre></div></div>
<h4> <span class="mw-headline" id=".E7.89.B9.E6.80.A7.E6.B3.A8.E5.86.8C">特性注册</span></h4>
<p>XMPP登记处维护着一个特性注册项，用于遵循 '<a rel="nofollow" class="external free" href="http://jabber.org/protocol/disco#info'">http://jabber.org/protocol/disco#info'</a> 名字空间的 &lt;feature/&gt; 元素的 'var' 属性的值；见&lt;<a rel="nofollow" class="external text" href="http://www.xmpp.org/registrar/disco-features.html">http://xmpp.org/registrar/disco-features.html&gt;</a>&gt;。
</p>
<h5> <span class="mw-headline" id=".E8.BF.87.E7.A8.8B_2">过程</span></h5>
<p>为了向注册表提交新值，注册人必须按如下格式定义一个XML片段，将它包含在相关的XMPP扩展协议中，或者发到&lt;registrar@xmpp.org&gt;：
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;feature</span> <span class="re0">var</span>=<span class="st0">'name of feature or namespace'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;desc<span class="re2">&gt;</span></span><span class="co3">a natural-language description of the feature</span><span class="re1">&lt;/desc<span class="re2">&gt;</span></span>
  <span class="re1">&lt;doc<span class="re2">&gt;</span></span><span class="co3">the document (e.g., XEP) in which this feature is specified</span><span class="re1">&lt;/doc<span class="re2">&gt;</span></span>
<span class="re1">&lt;/feature<span class="re2">&gt;</span></span></pre></div></div>
<p>注册人可一次注册一个以上的特性，每个特性包含在独立的&lt;feature&gt;元素中。
</p>
<h4> <span class="mw-headline" id=".E7.9F.A5.E5.90.8D.E8.8A.82.E7.82.B9">知名节点</span></h4>
<p>一个正在使用的协议可以指定一个或以上的服务发现节点，这些节点在协议上下文中有特殊的、恰当定义的含义。为了全局性地跨所有Jabber协议保留这些节点名字，XMPP登记处在&lt;<a rel="nofollow" class="external free" href="http://www.xmpp.org/registrar/nodes.html">http://www.xmpp.org/registrar/nodes.html</a>&gt;维护着一个知名服务发现节点的注册。
</p>
<h5> <span class="mw-headline" id=".E8.BF.87.E7.A8.8B_3">过程</span></h5>
<p>为了向登记处提交新值，注册人必须按如下格式定义一个XML片段，然后将它包含在相关的XMPP扩展协议中，或者发邮件到&lt;registrar@xmpp.org&gt;：
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;node<span class="re2">&gt;</span></span>
  <span class="re1">&lt;name<span class="re2">&gt;</span></span><span class="co3">the name of the node</span><span class="re1">&lt;/name<span class="re2">&gt;</span></span>
  <span class="re1">&lt;desc<span class="re2">&gt;</span></span><span class="co3">a natural-language description of the node</span><span class="re1">&lt;/desc<span class="re2">&gt;</span></span>
  <span class="re1">&lt;doc<span class="re2">&gt;</span></span><span class="co3">the document (e.g., XEP) in which this node is specified</span><span class="re1">&lt;/doc<span class="re2">&gt;</span></span>
<span class="re1">&lt;/node<span class="re2">&gt;</span></span></pre></div></div>
<p>注册人可以一次注册一个以上的节点，每个节点包含在单独的&lt;node/&gt;元素中。
</p>
<h3> <span class="mw-headline" id="URI.E6.9F.A5.E8.AF.A2.E7.B1.BB.E5.9E.8B">URI查询类型</span></h3>
<p>作为由<a rel="nofollow" class="external text" href="http://www.xmpp.org/extensions/xep-0147.html">XMPP URI Query Components</a> <a href="/XEP-0030#.E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8" title="XEP-0030">16</a>授权的机构，XMPP登记处维护着一个用于 XMPP URIs 的查询和键-值对的注册项（见&lt;<a rel="nofollow" class="external free" href="http://www.xmpp.org/registrar/querytypes.html">http://www.xmpp.org/registrar/querytypes.html</a>&gt;）。
</p><p>在这里定义了用于服务发现交互的查询类型“disco”，它有三个键：（1）"node"(查询的可选节点)，（2）"request"(带“info”值来取回服务发现信息，带“items”值取回服务发现条目)，（3）“type”(带值“get”用于IQ取值，“set”用于IQ设置)。
</p><p><b>例25. 服务发现信息请求：IRI/URI</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="co3">xmpp:romeo@montague.net?disco;type=get;request=info</span></pre></div></div>
<p><b>例26. 服务发现信息请求：结果节</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">to</span>=<span class="st0">'romeo@montague.net'</span> <span class="re0">type</span>=<span class="st0">'get'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/disco#info'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p><b>例27. 服务发现条目请求: IRI/URI</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="co3">xmpp:romeo@montague.net?disco;type=get;request=items</span></pre></div></div>
<p><b>例28. 服务发现条目请求：结果节</b>
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;iq</span> <span class="re0">to</span>=<span class="st0">'romeo@montague.net'</span> <span class="re0">type</span>=<span class="st0">'get'</span><span class="re2">&gt;</span>
  <span class="re1">&lt;query</span> <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/disco#items'</span><span class="re2">/&gt;</span>
<span class="re1">&lt;/iq<span class="re2">&gt;</span></span></pre></div></div>
<p>下列提交注册"disco"查询类型。
</p>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;querytype<span class="re2">&gt;</span></span>
  <span class="re1">&lt;name<span class="re2">&gt;</span></span><span class="co3">disco</span><span class="re1">&lt;/name<span class="re2">&gt;</span></span>
  <span class="re1">&lt;proto<span class="re2">&gt;</span></span><span class="co3">http://jabber.org/protocol/disco</span><span class="re1">&lt;/proto<span class="re2">&gt;</span></span>
  <span class="re1">&lt;desc<span class="re2">&gt;</span></span><span class="co3">enables interaction for the purpose of service discovery</span><span class="re1">&lt;/desc<span class="re2">&gt;</span></span>
  <span class="re1">&lt;doc<span class="re2">&gt;</span></span><span class="co3">XEP-0030</span><span class="re1">&lt;/doc<span class="re2">&gt;</span></span>
  <span class="re1">&lt;keys<span class="re2">&gt;</span></span>
    <span class="re1">&lt;key<span class="re2">&gt;</span></span>
      <span class="re1">&lt;name<span class="re2">&gt;</span></span><span class="co3">node</span><span class="re1">&lt;/name<span class="re2">&gt;</span></span>
      <span class="re1">&lt;desc<span class="re2">&gt;</span></span><span class="co3">the (optional) service discovery node</span><span class="re1">&lt;/desc<span class="re2">&gt;</span></span>
    <span class="re1">&lt;/key<span class="re2">&gt;</span></span>
    <span class="re1">&lt;key<span class="re2">&gt;</span></span>
      <span class="re1">&lt;name<span class="re2">&gt;</span></span><span class="co3">request</span><span class="re1">&lt;/name<span class="re2">&gt;</span></span>
      <span class="re1">&lt;desc<span class="re2">&gt;</span></span><span class="co3">the service discovery request type</span><span class="re1">&lt;/desc<span class="re2">&gt;</span></span>
      <span class="re1">&lt;values<span class="re2">&gt;</span></span>
        <span class="re1">&lt;value<span class="re2">&gt;</span></span>
	  <span class="re1">&lt;name<span class="re2">&gt;</span></span><span class="co3">info</span><span class="re1">&lt;/name<span class="re2">&gt;</span></span>
          <span class="re1">&lt;desc<span class="re2">&gt;</span></span><span class="co3">a service discovery information (disco#info) request</span><span class="re1">&lt;/desc<span class="re2">&gt;</span></span>
        <span class="re1">&lt;/value<span class="re2">&gt;</span></span>
        <span class="re1">&lt;value<span class="re2">&gt;</span></span>
	  <span class="re1">&lt;name<span class="re2">&gt;</span></span><span class="co3">items</span><span class="re1">&lt;/name<span class="re2">&gt;</span></span>
          <span class="re1">&lt;desc<span class="re2">&gt;</span></span><span class="co3">a service discovery items (disco#items) request</span><span class="re1">&lt;/desc<span class="re2">&gt;</span></span>
        <span class="re1">&lt;/value<span class="re2">&gt;</span></span>
      <span class="re1">&lt;/values<span class="re2">&gt;</span></span>
    <span class="re1">&lt;/key<span class="re2">&gt;</span></span>
    <span class="re1">&lt;key<span class="re2">&gt;</span></span>
      <span class="re1">&lt;name<span class="re2">&gt;</span></span><span class="co3">type</span><span class="re1">&lt;/name<span class="re2">&gt;</span></span>
      <span class="re1">&lt;desc<span class="re2">&gt;</span></span><span class="co3">the IQ type</span><span class="re1">&lt;/desc<span class="re2">&gt;</span></span>
      <span class="re1">&lt;values<span class="re2">&gt;</span></span>
        <span class="re1">&lt;value<span class="re2">&gt;</span></span>
	  <span class="re1">&lt;name<span class="re2">&gt;</span></span><span class="co3">get</span><span class="re1">&lt;/name<span class="re2">&gt;</span></span>
          <span class="re1">&lt;desc<span class="re2">&gt;</span></span><span class="co3">an IQ get</span><span class="re1">&lt;/desc<span class="re2">&gt;</span></span>
        <span class="re1">&lt;/value<span class="re2">&gt;</span></span>
        <span class="re1">&lt;value<span class="re2">&gt;</span></span>
	  <span class="re1">&lt;name<span class="re2">&gt;</span></span><span class="co3">set</span><span class="re1">&lt;/name<span class="re2">&gt;</span></span>
          <span class="re1">&lt;desc<span class="re2">&gt;</span></span><span class="co3">an IQ set (disco publish)</span><span class="re1">&lt;/desc<span class="re2">&gt;</span></span>
        <span class="re1">&lt;/value<span class="re2">&gt;</span></span>
      <span class="re1">&lt;/values<span class="re2">&gt;</span></span>
    <span class="re1">&lt;/key<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/keys<span class="re2">&gt;</span></span>
<span class="re1">&lt;/querytype<span class="re2">&gt;</span></span></pre></div></div>
<h2> <span class="mw-headline" id="XML.E6.9E.B6.E6.9E.84">XML架构</span></h2>
<h3> <span class="mw-headline" id="disco.23info">disco#info</span></h3>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;?xml</span> <span class="re0">version</span>=<span class="st0">'1.0'</span> <span class="re0">encoding</span>=<span class="st0">'UTF-8'</span> <span class="re2">?&gt;</span>
&#160;
<span class="re1">&lt;xs:schema</span>
    <span class="re0">xmlns:xs</span>=<span class="st0">'http://www.w3.org/2001/XMLSchema'</span>
    <span class="re0">targetNamespace</span>=<span class="st0">'http://jabber.org/protocol/disco#info'</span>
    <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/disco#info'</span>
    <span class="re0">elementFormDefault</span>=<span class="st0">'qualified'</span><span class="re2">&gt;</span>
&#160;
  <span class="re1">&lt;xs:annotation<span class="re2">&gt;</span></span>
    <span class="re1">&lt;xs:documentation<span class="re2">&gt;</span></span><span class="co3">
      The protocol documented by this schema is defined in
      XEP-0030: http://www.xmpp.org/extensions/xep-0030.html
    </span><span class="re1">&lt;/xs:documentation<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/xs:annotation<span class="re2">&gt;</span></span>
&#160;
  <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'query'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;xs:complexType<span class="re2">&gt;</span></span>
      <span class="re1">&lt;xs:sequence</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;xs:element</span> <span class="re0">ref</span>=<span class="st0">'identity'</span> <span class="re0">maxOccurs</span>=<span class="st0">'unbounded'</span><span class="re2">/&gt;</span>
        <span class="re1">&lt;xs:element</span> <span class="re0">ref</span>=<span class="st0">'feature'</span> <span class="re0">maxOccurs</span>=<span class="st0">'unbounded'</span><span class="re2">/&gt;</span>
      <span class="re1">&lt;/xs:sequence<span class="re2">&gt;</span></span>
      <span class="re1">&lt;xs:attribute</span> <span class="re0">name</span>=<span class="st0">'node'</span> <span class="re0">type</span>=<span class="st0">'xs:string'</span> <span class="re0">use</span>=<span class="st0">'optional'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;/xs:complexType<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span>
&#160;
  <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'identity'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;xs:complexType<span class="re2">&gt;</span></span>
      <span class="re1">&lt;xs:simpleContent<span class="re2">&gt;</span></span>
        <span class="re1">&lt;xs:extension</span> <span class="re0">base</span>=<span class="st0">'empty'</span><span class="re2">&gt;</span>
          <span class="re1">&lt;xs:attribute</span> <span class="re0">name</span>=<span class="st0">'category'</span> <span class="re0">type</span>=<span class="st0">'xs:string'</span> <span class="re0">use</span>=<span class="st0">'required'</span><span class="re2">/&gt;</span>
          <span class="re1">&lt;xs:attribute</span> <span class="re0">name</span>=<span class="st0">'name'</span> <span class="re0">type</span>=<span class="st0">'xs:string'</span> <span class="re0">use</span>=<span class="st0">'optional'</span><span class="re2">/&gt;</span>
          <span class="re1">&lt;xs:attribute</span> <span class="re0">name</span>=<span class="st0">'type'</span> <span class="re0">type</span>=<span class="st0">'xs:string'</span> <span class="re0">use</span>=<span class="st0">'required'</span><span class="re2">/&gt;</span>
        <span class="re1">&lt;/xs:extension<span class="re2">&gt;</span></span>
      <span class="re1">&lt;/xs:simpleContent<span class="re2">&gt;</span></span>
    <span class="re1">&lt;/xs:complexType<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span>
&#160;
  <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'feature'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;xs:complexType<span class="re2">&gt;</span></span>
      <span class="re1">&lt;xs:simpleContent<span class="re2">&gt;</span></span>
        <span class="re1">&lt;xs:extension</span> <span class="re0">base</span>=<span class="st0">'empty'</span><span class="re2">&gt;</span>
          <span class="re1">&lt;xs:attribute</span> <span class="re0">name</span>=<span class="st0">'var'</span> <span class="re0">type</span>=<span class="st0">'xs:string'</span> <span class="re0">use</span>=<span class="st0">'required'</span><span class="re2">/&gt;</span>
        <span class="re1">&lt;/xs:extension<span class="re2">&gt;</span></span>
      <span class="re1">&lt;/xs:simpleContent<span class="re2">&gt;</span></span>
    <span class="re1">&lt;/xs:complexType<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span>
&#160;
  <span class="re1">&lt;xs:simpleType</span> <span class="re0">name</span>=<span class="st0">'empty'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;xs:restriction</span> <span class="re0">base</span>=<span class="st0">'xs:string'</span><span class="re2">&gt;</span>
      <span class="re1">&lt;xs:enumeration</span> <span class="re0">value</span>=<span class="st0">''</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;/xs:restriction<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/xs:simpleType<span class="re2">&gt;</span></span>
&#160;
<span class="re1">&lt;/xs:schema<span class="re2">&gt;</span></span></pre></div></div>
<h3> <span class="mw-headline" id="disco.23items">disco#items</span></h3>
<div dir="ltr" style="text-align: left;"><div class="source-xml" style="font-family: monospace;"><pre><span class="re1">&lt;?xml</span> <span class="re0">version</span>=<span class="st0">'1.0'</span> <span class="re0">encoding</span>=<span class="st0">'UTF-8'</span> <span class="re2">?&gt;</span>
&#160;
<span class="re1">&lt;xs:schema</span>
    <span class="re0">xmlns:xs</span>=<span class="st0">'http://www.w3.org/2001/XMLSchema'</span>
    <span class="re0">targetNamespace</span>=<span class="st0">'http://jabber.org/protocol/disco#items'</span>
    <span class="re0">xmlns</span>=<span class="st0">'http://jabber.org/protocol/disco#items'</span>
    <span class="re0">elementFormDefault</span>=<span class="st0">'qualified'</span><span class="re2">&gt;</span>
&#160;
  <span class="re1">&lt;xs:annotation<span class="re2">&gt;</span></span>
    <span class="re1">&lt;xs:documentation<span class="re2">&gt;</span></span><span class="co3">
      The protocol documented by this schema is defined in
      XEP-0030: http://www.xmpp.org/extensions/xep-0030.html
    </span><span class="re1">&lt;/xs:documentation<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/xs:annotation<span class="re2">&gt;</span></span>
&#160;
  <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'query'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;xs:complexType<span class="re2">&gt;</span></span>
      <span class="re1">&lt;xs:sequence</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span><span class="re2">&gt;</span>
        <span class="re1">&lt;xs:element</span> <span class="re0">ref</span>=<span class="st0">'item'</span> <span class="re0">minOccurs</span>=<span class="st0">'0'</span> <span class="re0">maxOccurs</span>=<span class="st0">'unbounded'</span><span class="re2">/&gt;</span>
      <span class="re1">&lt;/xs:sequence<span class="re2">&gt;</span></span>
      <span class="re1">&lt;xs:attribute</span> <span class="re0">name</span>=<span class="st0">'node'</span> <span class="re0">type</span>=<span class="st0">'xs:string'</span> <span class="re0">use</span>=<span class="st0">'optional'</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;/xs:complexType<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span>
&#160;
  <span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">'item'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;xs:complexType<span class="re2">&gt;</span></span>
      <span class="re1">&lt;xs:simpleContent<span class="re2">&gt;</span></span>
        <span class="re1">&lt;xs:extension</span> <span class="re0">base</span>=<span class="st0">'empty'</span><span class="re2">&gt;</span>
          <span class="re1">&lt;xs:attribute</span> <span class="re0">name</span>=<span class="st0">'action'</span> <span class="re0">use</span>=<span class="st0">'optional'</span><span class="re2">&gt;</span>
            <span class="re1">&lt;xs:simpleType<span class="re2">&gt;</span></span>
              <span class="re1">&lt;xs:restriction</span> <span class="re0">base</span>=<span class="st0">'xs:NCName'</span><span class="re2">&gt;</span>
                <span class="re1">&lt;xs:enumeration</span> <span class="re0">value</span>=<span class="st0">'remove'</span><span class="re2">/&gt;</span>
                <span class="re1">&lt;xs:enumeration</span> <span class="re0">value</span>=<span class="st0">'update'</span><span class="re2">/&gt;</span>
              <span class="re1">&lt;/xs:restriction<span class="re2">&gt;</span></span>
            <span class="re1">&lt;/xs:simpleType<span class="re2">&gt;</span></span>
          <span class="re1">&lt;/xs:attribute<span class="re2">&gt;</span></span>
          <span class="re1">&lt;xs:attribute</span> <span class="re0">name</span>=<span class="st0">'jid'</span> <span class="re0">type</span>=<span class="st0">'xs:string'</span> <span class="re0">use</span>=<span class="st0">'required'</span><span class="re2">/&gt;</span>
          <span class="re1">&lt;xs:attribute</span> <span class="re0">name</span>=<span class="st0">'name'</span> <span class="re0">type</span>=<span class="st0">'xs:string'</span> <span class="re0">use</span>=<span class="st0">'optional'</span><span class="re2">/&gt;</span>
          <span class="re1">&lt;xs:attribute</span> <span class="re0">name</span>=<span class="st0">'node'</span> <span class="re0">type</span>=<span class="st0">'xs:string'</span> <span class="re0">use</span>=<span class="st0">'optional'</span><span class="re2">/&gt;</span>
        <span class="re1">&lt;/xs:extension<span class="re2">&gt;</span></span>
      <span class="re1">&lt;/xs:simpleContent<span class="re2">&gt;</span></span>
    <span class="re1">&lt;/xs:complexType<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span>
&#160;
  <span class="re1">&lt;xs:simpleType</span> <span class="re0">name</span>=<span class="st0">'empty'</span><span class="re2">&gt;</span>
    <span class="re1">&lt;xs:restriction</span> <span class="re0">base</span>=<span class="st0">'xs:string'</span><span class="re2">&gt;</span>
      <span class="re1">&lt;xs:enumeration</span> <span class="re0">value</span>=<span class="st0">''</span><span class="re2">/&gt;</span>
    <span class="re1">&lt;/xs:restriction<span class="re2">&gt;</span></span>
  <span class="re1">&lt;/xs:simpleType<span class="re2">&gt;</span></span>
&#160;
<span class="re1">&lt;/xs:schema<span class="re2">&gt;</span></span></pre></div></div>
<h2> <span class="mw-headline" id=".E4.BD.9C.E8.80.85.E5.A4.87.E6.B3.A8">作者备注</span></h2>
<p>Peter Millard, 本文的一个合著者，从版本0.1到版本2.2, 死于2006年4月26日.
</p>
<h2> <span class="mw-headline" id=".E9.99.84.E5.BD.95">附录</span></h2>
<h3> <span class="mw-headline" id=".E9.99.84.E5.BD.95A:.E6.96.87.E6.A1.A3.E4.BF.A1.E6.81.AF">附录A:文档信息</span></h3>
<p>系列：<a rel="nofollow" class="external text" href="http://xmpp.org/extensions/">XEP</a>
</p><p>序号：0030
</p><p>发布者：<a rel="nofollow" class="external text" href="http://xmpp.org/xsf/">XMPP标准基金会</a>
</p><p>状态：<a rel="nofollow" class="external text" href="http://www.xmpp.org/extensions/xep-0001.html#states-Final">终结版</a>
</p><p>类型：<a rel="nofollow" class="external text" href="http://www.xmpp.org/extensions/xep-0001.html#types-Standards%20Track">标准跟踪</a>
</p><p>版本：2.4
</p><p>最后更新：2008-06-06
</p><p>批准机构：<a rel="nofollow" class="external text" href="http://xmpp.org/council/">XMPP理事会</a>
</p><p>依赖标准：<a href="/RFC3920" title="RFC3920">XMPP Core</a>
</p><p>替代标准：XEP-0011, XEP-0094
</p><p>被替代标准：无
</p><p>缩略名：disco
</p><p>disco#info名字空间的XML架构(Schema)<a rel="nofollow" class="external autonumber" href="http://www.xmpp.org/schemas/disco-info.xsd">[1]</a>
</p><p>disco#items名字空间的XML方案(Schema)<a rel="nofollow" class="external autonumber" href="http://www.xmpp.org/schemas/disco-items.xsd">[2]</a>
</p><p>注册项： &lt;<a rel="nofollow" class="external free" href="http://xmpp.org/registrar/disco.html">http://xmpp.org/registrar/disco.html</a>&gt;
</p><p>原文控制： <a rel="nofollow" class="external text" href="http://svn.xmpp.org:18080/browse/XMPP/trunk/extensions/xep-0030.xml">HTML</a> <a rel="nofollow" class="external text" href="http://svn.xmpp.org:18080//changelog/~rss/XMPP/trunk/extensions/xep-0030.xml/rss.xml">RSS</a>
</p><p>本文的其它格式： <a rel="nofollow" class="external text" href="http://xmpp.org/extensions/xep-0030.xml">XML</a> <a rel="nofollow" class="external text" href="http://xmpp.org/extensions/xep-0030.pdf">PDF</a>
</p>
<h3> <span class="mw-headline" id=".E9.99.84.E5.BD.95B:.E4.BD.9C.E8.80.85.E4.BF.A1.E6.81.AF">附录B:作者信息</span></h3>
<p><b>Joe Hildebrand</b>
</p><p>Email: <a rel="nofollow" class="external text" href="mailto:jhildebr@cisco.com">jhildebr@cisco.com</a>
</p><p>JabberID: hildjj@jabber.org
</p><p><b>Peter Millard</b>
</p><p>见 <a href="/XEP-0030#.E4.BD.9C.E8.80.85.E5.A4.87.E6.B3.A8" title="XEP-0030">作者备注</a>
</p><p><b>Ryan Eatmon</b>
</p><p>Email: <a rel="nofollow" class="external text" href="mailto:reatmon@jabber.org">reatmon@jabber.org</a>
</p><p>JabberID: reatmon@jabber.org
</p><p><b>Peter Saint-Andre</b>
</p><p>Email: <a rel="nofollow" class="external text" href="mailto:stpeter@jabber.org">stpeter@jabber.org</a>
</p><p>JabberID: stpeter@jabber.org
</p><p>URI: <a rel="nofollow" class="external free" href="https://stpeter.im/">https://stpeter.im/</a>
</p>
<h3> <span class="mw-headline" id=".E9.99.84.E5.BD.95C:.E6.B3.95.E5.BE.8B.E9.80.9A.E5.91.8A">附录C:法律通告</span></h3>
<p><b>版权</b>
</p><p>XMPP扩展协议的版权(1999-2008)归XMPP标准化基金会(XSF)所有.
</p><p><b>权限</b>
</p><p>特此授权,费用全免,对任何获得本协议副本的人,对使用本协议没有限制,包括不限制在软件程序中实现本协议,不限制在网络服务中布署本协议,不限制拷贝,修改,合并,发行,翻译,分发,转授,或销售本协议的副本,被允许使用本协议做了以上工作的人士,应接受前述的版权声明和本许可通知并且必须包含在所有的副本或实质性部分的规格中.除非单独的许可，被重新分发的修改工作，不得含有关于作者，标题，编号，或出版者的规格的误导性资料，并不得宣称修改工作是由本文的作者，作者所属的任何组织或项目，或XMPP标准基金会签注。
</p><p><b>免责声明'</b>
</p><p><b>## 特别注意：本协议是提供的“原样”的基础，没有担保或任何形式的条件，明示或暗示，包括，但不限于任何担保或关于名称，非侵权性，适销性或适合作某一特定目的的条件. ##</b>
</p><p><b>责任限制</b>
</p><p>在任何情况下以及没有任何法律规定时，不论是侵权行为（包括疏忽），合同或其它方面，除非根据适用法律的要求（如蓄意和有严重疏忽行为）或以书面形式同意，XMPP标准基金会或任何作者不对本协议所造成的损失承担责任，包括任何直接，间接，特殊，偶发，或任何从本协议出，入，连接的字符产生的或实现，布署或其他对本协议的使用导致的相应的损害赔偿（包括但不限于善意的损失，停止作业，电脑失灵或故障，或任何和所有其他商业损害或损失） ，即使XMPP标准基金会或作者已被告知此类损害的可能性。
</p><p><b>知识产权的一致性</b>
</p><p>XMPP扩展协议完全遵守XSF的知识产权策略(可在&lt;<a rel="nofollow" class="external free" href="http://www.xmpp.org/extensions/ipr-policy.shtml">http://www.xmpp.org/extensions/ipr-policy.shtml</a>&gt;找到副本或写信给XMPP标准基金会, 1899 Wynkoop Street, Suite 600, Denver, CO 80202 USA).
</p>
<h3> <span class="mw-headline" id=".E9.99.84.E5.BD.95D:.E5.92.8CXMPP.E7.9A.84.E5.85.B3.E7.B3.BB">附录D:和XMPP的关系</span></h3>
<p>可扩展的消息和出席信息协议 (XMPP) 定义于 XMPP Core (<a class="external mw-magiclink-rfc" href="//tools.ietf.org/html/rfc3920">RFC 3920</a>) 和 XMPP IM (<a class="external mw-magiclink-rfc" href="//tools.ietf.org/html/rfc3921">RFC 3921</a>) 规范里，由 XMPP标准基金会贡献到由依据<a class="external mw-magiclink-rfc" href="//tools.ietf.org/html/rfc2026">RFC 2026</a>成立的互联网工程人物组管理的互联网标准流程 Internet Standards Process. 本文定义的任何协议已在互联网标准流程之外开发，并且被理解为 XMPP 的扩展而不是一个XMPP本身的演化, 开发, 或修改.
</p>
<h3> <span class="mw-headline" id=".E9.99.84.E5.BD.95E:.E8.AE.A8.E8.AE.BA.E5.9C.B0.E7.82.B9">附录E:讨论地点</span></h3>
<p>主要的XMPP扩展协议讨论地点是 &lt;standards@xmpp.org&gt; 讨论列表.
</p><p>在 xmpp.org 的其它讨论列表中的讨论可能也有合适的; 所有的列表见 &lt;<a rel="nofollow" class="external free" href="http://xmpp.org/about/discuss.shtml">http://xmpp.org/about/discuss.shtml</a>&gt; .
</p><p>勘误表可以发送邮件到 &lt;editor@xmpp.org&gt;.
</p>
<h3> <span class="mw-headline" id=".E9.99.84.E5.BD.95F:.E9.9C.80.E6.B1.82.E4.B8.80.E8.87.B4.E6.80.A7">附录F:需求一致性</span></h3>
<p>以下用于本文的需求关键字的解释见于 <a rel="nofollow" class="external text" href="http://www.ietf.org/rfc/rfc2119.txt">RFC 2119</a>: "MUST", "SHALL", "REQUIRED"; "MUST NOT", "SHALL NOT"; "SHOULD", "RECOMMENDED"; "SHOULD NOT", "NOT RECOMMENDED"; "MAY", "OPTIONAL".
</p><p><br />
</p>
<h3> <span class="mw-headline" id=".E9.99.84.E5.BD.95G:.E5.A4.87.E6.B3.A8">附录G:备注</span></h3>
<ol><li> <a class="external mw-magiclink-rfc" href="//tools.ietf.org/html/rfc3920">RFC 3920</a>: 可扩展的消息和出席信息协议 (XMPP): Core &lt;<a rel="nofollow" class="external free" href="http://tools.ietf.org/html/rfc3920">http://tools.ietf.org/html/rfc3920</a>&gt;.
</li><li> XEP-0011: Jabber Browsing &lt;<a rel="nofollow" class="external free" href="http://xmpp.org/extensions/xep-0011.html">http://xmpp.org/extensions/xep-0011.html</a>&gt;.
</li><li> XEP-0094: Agent Information &lt;<a rel="nofollow" class="external free" href="http://xmpp.org/extensions/xep-0094.html">http://xmpp.org/extensions/xep-0094.html</a>&gt;.
</li><li> XEP-0134: XMPP Design Guidelines &lt;<a rel="nofollow" class="external free" href="http://xmpp.org/extensions/xep-0134.html">http://xmpp.org/extensions/xep-0134.html</a>&gt;.
</li><li> SOAP &lt;<a rel="nofollow" class="external free" href="http://www.w3.org/TR/SOAP/">http://www.w3.org/TR/SOAP/</a>&gt;.
</li><li> <a class="external mw-magiclink-rfc" href="//tools.ietf.org/html/rfc3921">RFC 3921</a>: 可扩展的消息和出席信息 (XMPP): Instant Messaging and Presence &lt;<a rel="nofollow" class="external free" href="http://tools.ietf.org/html/rfc3921">http://tools.ietf.org/html/rfc3921</a>&gt;.
</li><li> XEP-0013: Flexible Offline Message Retrieval &lt;<a rel="nofollow" class="external free" href="http://xmpp.org/extensions/xep-0013.html">http://xmpp.org/extensions/xep-0013.html</a>&gt;.
</li><li> XEP-0060: Publish-Subscribe &lt;<a rel="nofollow" class="external free" href="http://xmpp.org/extensions/xep-0060.html">http://xmpp.org/extensions/xep-0060.html</a>&gt;.
</li><li> XEP-0118: User Tune &lt;<a rel="nofollow" class="external free" href="http://xmpp.org/extensions/xep-0118.html">http://xmpp.org/extensions/xep-0118.html</a>&gt;.
</li><li> XEP-0115: Entity Capabilities &lt;<a rel="nofollow" class="external free" href="http://xmpp.org/extensions/xep-0115.html">http://xmpp.org/extensions/xep-0115.html</a>&gt;.
</li><li> XEP-0055: Jabber Search &lt;<a rel="nofollow" class="external free" href="http://xmpp.org/extensions/xep-0055.html">http://xmpp.org/extensions/xep-0055.html</a>&gt;.
</li><li> XEP-0086: Error Condition Mappings &lt;<a rel="nofollow" class="external free" href="http://xmpp.org/extensions/xep-0086.html">http://xmpp.org/extensions/xep-0086.html</a>&gt;.
</li><li> 无论如何, 服务器可以 MAY 返回条目而不是可用的资源(如果有).
</li><li> 互联网编号分配机构(IANA) 是用于互联网协议的唯一性参数值分配的核心协调者, 例如号码和URI计划. 更多信息, 见 &lt;<a rel="nofollow" class="external free" href="http://www.iana.org/">http://www.iana.org/</a>&gt;.
</li><li> XMPP登记员XMPP Registrar 维护着一个保留的协议名字空间以及用于由XMPP标准基金会批准的XMPP扩展协议的上下文参数的注册项的列表. 更多信息, 见 &lt;<a rel="nofollow" class="external free" href="http://xmpp.org/registrar/">http://xmpp.org/registrar/</a>&gt;.
</li><li> XEP-0147: XMPP URI Query Components &lt;<a rel="nofollow" class="external free" href="http://xmpp.org/extensions/xep-0147.html">http://xmpp.org/extensions/xep-0147.html</a>&gt;.
</li></ol>
<h3> <span class="mw-headline" id=".E9.99.84.E5.BD.95H:.E4.BF.AE.E8.AE.A2.E5.8E.86.E5.8F.B2">附录H:修订历史</span></h3>
<p>注意: 本协议的旧版本可能在 <a rel="nofollow" class="external free" href="http://xmpp.org/extensions/attic/">http://xmpp.org/extensions/attic/</a> 还可用
</p><p><b>版本 2.4 (2008-06-06)</b>
</p><p>会议达成共识, 移除了 disco-publish 特性 (实现应该使用 publish-subscribe 代替).
</p><p>(psa)
</p><p><b>版本 2.3 (2007-02-15)</b>
</p><p>增加了关于实体能力的实现备注.
</p><p>(psa)
</p><p><b>版本 2.2 (2006-01-24)</b>
</p><p>更多和服务器处理发送给纯JIDs的请求相关的特定的和澄清了安全事项.
</p><p>(psa)
</p><p><b>版本 2.1 (2005-03-03)</b>
</p><p>增加了关于服务器处理发送给纯JIDs的请求的实现备注.
</p><p>(psa)
</p><p><b>版本 2.0 (2004-07-20)</b>
</p><p>通过Jabber理事会的投票, 状态升级为最终版.
</p><p>(psa)
</p><p><b>版本 1.10 (2004-06-29)</b>
</p><p>定义了安全事项; 修改了扩展的出席信息例子来使用一个虚拟的协议; 更多特定的 publish 特性; 定义了注册项提交.
</p><p>(psa/jjh)
</p><p><b>版本 1.9 (2004-05-27)</b>
</p><p>澄清了错误条件.
</p><p>(psa)
</p><p><b>版本 1.8 (2004-05-21)</b>
</p><p>移除了多余的特性协商文本到 XEP-0020.
</p><p>(psa)
</p><p><b>版本 1.7 (2004-05-13)</b>
</p><p>增加了实现备注关于特性和条目结果的可伸缩性; 最后的社论清理.
</p><p>(psa)
</p><p><b>版本 1.6 (2004-05-11)</b>
</p><p>纠正了发布可用条目的例子; 更多澄清节点层次结构的性质.
</p><p>(psa)
</p><p><b>版本 1.5 (2004-05-10)</b>
</p><p>增加了澄清节点层次结构的备注.
</p><p>(psa)
</p><p><b>版本 1.4 (2004-05-07)</b>
</p><p>澄清 "directory"的用法; 增加章节定义一个实体和与它相关的条目之间的关系.
</p><p>(psa)
</p><p><b>版本 1.3 (2004-04-23)</b>
</p><p>更多澄清条目发布 item-publication 协议; 移除一些特性协商文本到 XEP-0020; 增加关于知名服务发现节点的注册项的信息; 增加关于遍历树和大结果集的实现备注; 附加了征集经验建议.
</p><p>(psa)
</p><p><b>版本 1.2 (2004-04-20)</b>
</p><p>社论清理; 附加了一些经验建议征集.
</p><p>(psa)
</p><p><b>版本 1.1 (2004-03-15)</b>
</p><p>以更正式的方式描述了需求, 语法, 和用例; 纠正了一些例子和schemas中的错误; 定义了 XMPP 登记处的程序; 增加了参考的号码; 定义了 XMPP 错误处理.
</p><p>(psa)
</p><p><b>版本 1.0 (2003-04-21)</b>
</p><p>通过Jabber理事会的投票, 提升状态为草案; 同时添加 XML schemas.
</p><p>(psa)
</p><p><b>版本 0.13 (2003-02-25)</b>
</p><p>增加了关于空节点的备注; 描述了关于多个 identity 元素的语义.
</p><p>(pgm)
</p><p><b>版本 0.12 (2003-02-06)</b>
</p><p>增加了对IQ-set的支持; 增加了关于 disco#info 到一个节点的例子.
</p><p>(pgm)
</p><p><b>版本 0.11 (2002-12-17)</b>
</p><p>根据标准列表里的讨论增加了对 'node' 属性的支持，以支持不可定址为JID的条目.
</p><p>(psa)
</p><p><b>版本 0.10 (2002-11-21)</b>
</p><p>修改了 &lt;feature type='foo'/&gt; 成为 &lt;feature var='foo'/&gt; 以跟踪特性协商的变化 (XEP-0020); 增加了初始的注册项参数.
</p><p>(psa)
</p><p><b>版本 0.9 (2002-11-07)</b>
</p><p>增加了 disco#item对空结果集的支持.
</p><p>(psa)
</p><p><b>版本 0.8 (2002-11-01)</b>
</p><p>对于item查询，移除了 max, start, 和 total 属性(这将由一个通用的分页协议来处理); 增加了 "<a rel="nofollow" class="external free" href="http://jabber.org/protocol/feature-neg">http://jabber.org/protocol/feature-neg</a>" 名字空间作为一个特性用于发出关于一个或多个特性的协商信号.
</p><p>(psa)
</p><p><b>版本 0.7 (2002-10-28)</b>
</p><p>清理特性文本和例子.
</p><p>(psa)
</p><p><b>版本 0.6 (2002-10-27)</b>
</p><p>增加了 'category' 属性到 &lt;feature/&gt; 元素; 增加了安全性, IANA, 和 XMPP 登记处 事项; 增加了例子的编号.
</p><p>(psa)
</p><p><b>版本 0.5 (2002-10-15)</b>
</p><p>全部翻修和简化
</p><p>(psa)
</p><p><b>版本 0.4 (2002-07-16)</b>
</p><p>重要补充和修正，更多的例子。
</p><p>(psa)
</p><p><b>版本 0.3 (2002-05-30)</b>
</p><p>围绕用例重新组织，做了一些小的修补。
</p><p>(psa)
</p><p><b>版本 0.2 (2002-05-05)</b>
</p><p>合并合著者的评论并增加备注.
</p><p>(psa)
</p><p><b>版本 0.1 (2002-05-03)</b>
</p><p>初始的草案.
</p><p>(psa)
</p><p>结束
</p>
<!-- 
NewPP limit report
Preprocessor node count: 474/1000000
Post-expand include size: 3174/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key mediawiki:pcache:idhash:5-0!*!0!!zh-cn!*!* and timestamp 20160221170229 -->
</div><div class="printfooter">
来自“<a href="http://wiki.jabbercn.org/index.php?title=XEP-0030&amp;oldid=1189">http://wiki.jabbercn.org/index.php?title=XEP-0030&amp;oldid=1189</a>”</div>
		<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks"><a href="/%E7%89%B9%E6%AE%8A:%E9%A1%B5%E9%9D%A2%E5%88%86%E7%B1%BB" title="特殊:页面分类">2个分类</a>: <ul><li><a href="/%E5%88%86%E7%B1%BB:XMPP%E6%89%A9%E5%B1%95" title="分类:XMPP扩展">XMPP扩展</a></li><li><a href="/%E5%88%86%E7%B1%BB:%E5%B7%B2%E7%BF%BB%E8%AF%91" title="分类:已翻译">已翻译</a></li></ul></div></div>		<!-- end content -->
				<div class="visualClear"></div>
	</div>
</div></div>
<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>查看</h5>
		<div class="pBody">
			<ul>
				<li id="ca-nstab-main" class="selected"><a href="/XEP-0030" title="查看内容页面 [c]" accesskey="c">页面</a></li>
				<li id="ca-talk" class="new"><a href="/index.php?title=%E8%AE%A8%E8%AE%BA:XEP-0030&amp;action=edit&amp;redlink=1" title="关于内容页面的讨论 [t]" accesskey="t">讨论</a></li>
				<li id="ca-viewsource"><a href="/index.php?title=XEP-0030&amp;action=edit" title="本页面已被保护。你可以查看其源代码。 [e]" accesskey="e">查看源代码</a></li>
				<li id="ca-history"><a href="/index.php?title=XEP-0030&amp;action=history" title="本页面的早前修订版本 [h]" accesskey="h">历史</a></li>
			</ul>
		</div>
	</div>

	<div class="portlet" id="p-personal">
		<h5>个人工具</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="/index.php?title=%E7%89%B9%E6%AE%8A:%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95&amp;returnto=XEP-0030" title="我们希望您可以登入，但不强求 [o]" accesskey="o">登录/创建账户</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a title="访问首页" style="background-image: url(/skins/common/images/xmppcn.png);" href="/%E9%A6%96%E9%A1%B5"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div class="generated-sidebar portlet" id="p-navigation">
		<h5>导航</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage-description"><a href="/%E9%A6%96%E9%A1%B5" title="访问首页 [z]" accesskey="z">首页</a></li>
				<li id="n-portal"><a href="/Jabber/XMPP%E4%B8%AD%E6%96%87%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92:%E7%A4%BE%E5%8C%BA%E4%B8%93%E9%A1%B5" title="关于本项目，你可以做什么，在哪里找到你需要的事物">社区专页</a></li>
				<li id="n-currentevents"><a href="/Jabber/XMPP%E4%B8%AD%E6%96%87%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92:%E6%96%B0%E9%97%BB%E5%8A%A8%E6%80%81" title="查看当前事件的背景信息">新闻动态</a></li>
				<li id="n-recentchanges"><a href="/%E7%89%B9%E6%AE%8A:%E6%9C%80%E8%BF%91%E6%9B%B4%E6%94%B9" title="本wiki的最近更改列表 [r]" accesskey="r">最近更改</a></li>
				<li id="n-randompage"><a href="/%E7%89%B9%E6%AE%8A:%E9%9A%8F%E6%9C%BA%E9%A1%B5%E9%9D%A2" title="随机进入一个页面 [x]" accesskey="x">随机页面</a></li>
				<li id="n-help"><a href="/%E5%B8%AE%E5%8A%A9:%E7%9B%AE%E5%BD%95" title="寻求帮助的地方">帮助</a></li>
			</ul>
		</div>
	</div>
	<div class="generated-sidebar portlet" id="p-XMPP.E8.B5.84.E6.BA.90">
		<h5>XMPP资源</h5>
		<div class='pBody'>
			<ul>
				<li id="n-XMPP.E5.85.AC.E5.85.B1.E6.9C.8D.E5.8A.A1"><a href="/XMPP%E5%85%AC%E5%85%B1%E6%9C%8D%E5%8A%A1">XMPP公共服务</a></li>
				<li id="n-XMPP.E5.AE.A2.E6.88.B7.E7.AB.AF.E8.BD.AF.E4.BB.B6"><a href="/XMPP%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%BD%AF%E4%BB%B6">XMPP客户端软件</a></li>
				<li id="n-XMPP.E6.9C.8D.E5.8A.A1.E5.99.A8.E8.BD.AF.E4.BB.B6"><a href="/XMPP%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BD%AF%E4%BB%B6">XMPP服务器软件</a></li>
				<li id="n-.E5.8F.8B.E6.83.85.E9.93.BE.E6.8E.A5"><a href="/%E5%8F%8B%E6%83%85%E9%93%BE%E6%8E%A5">友情链接</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		<h5><label for="searchInput">搜索</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/index.php" id="searchform">
				<input type='hidden' name="title" value="特殊:搜索"/>
				<input type="search" name="search" title="在Jabber/XMPP中文翻译计划中搜索 [f]" accesskey="f" id="searchInput" />
				<input type="submit" name="go" value="提交" title="如果相同的标题存在的话便直接前往该页面" id="searchGoButton" class="searchButton" />&#160;
				<input type="submit" name="fulltext" value="搜索" title="搜索含这些文字的页面" id="mw-searchButton" class="searchButton" />
			</form>
		</div>
	</div>




<script src="http://yacy.jabbercn.org:8090/yacy/ui/js/jquery-1.3.2.min.js" type="text/javascript"></script>
<script>
   $(document).ready(function() {
      yconf = {
         url : 'http://yacy.jabbercn.org:8090/',
         theme : 'smoothness',
         title : 'XMPP搜索大全',
         logo     : 'http://yacy.jabbercn.org:8090/env/grafics/50-xmpp_logo.jpg',
         link     : 'http://wiki.jabbercn.org',
         urlmaskfilter : '.*',
         width : 500,
         height : 500
      };
      $.getScript(yconf.url+'/yacy/ui/js/yacyui-portalsearch.js', function(){});
   });
</script>
        <div id="p-search" class="portlet">
<h5>站外搜索</h5>
<div id="yacylivesearch" class="pBody">
   <form id="ysearch" method="get" accept-charset="UTF-8" action="http://yacy.jabbercn.org:8090/yacysearch.html">
      <input name="search" id="yquery" type="text" size="8" maxlength="80" value=""/>
      <input type="hidden" name="verify" value="false" />
      <input type="hidden" name="maximumRecords" value="10" />
      <input type="hidden" name="resource" value="local" />
      <input type="hidden" name="urlmaskfilter" value=".*" />
      <input type="hidden" name="prefermaskfilter" value="" />
      <input type="hidden" name="former" value="" />
      <input type="hidden" name="display" value="2" />
      <input type="hidden" name="nav" value="all" />
      <input type="submit" name="Enter" value="搜索" class="searchButton" />
   </form>
</div>
</div>



	<div class="portlet" id="p-tb">
		<h5>工具箱</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="/%E7%89%B9%E6%AE%8A:%E9%93%BE%E5%85%A5%E9%A1%B5%E9%9D%A2/XEP-0030" title="所有链入本页的wiki页面列表 [j]" accesskey="j">链入页面</a></li>
				<li id="t-recentchangeslinked"><a href="/%E7%89%B9%E6%AE%8A:%E9%93%BE%E5%87%BA%E6%9B%B4%E6%94%B9/XEP-0030" title="本页链入的页面的最近更改 [k]" accesskey="k">链出更改</a></li>
				<li id="t-specialpages"><a href="/%E7%89%B9%E6%AE%8A:%E7%89%B9%E6%AE%8A%E9%A1%B5%E9%9D%A2" title="所有特殊页面列表 [q]" accesskey="q">特殊页面</a></li>
				<li><a href="/index.php?title=XEP-0030&amp;printable=yes" rel="alternate">可打印版</a></li>
				<li id="t-permalink"><a href="/index.php?title=XEP-0030&amp;oldid=1189" title="本页面该修订版本的永久链接">永久链接</a></li>
			</ul>
		</div>
	</div>
</div><!-- end of the left (by default at least) column -->
<div class="visualClear"></div>
<div id="footer">
	<div id="f-copyrightico">
		<a href="http://creativecommons.org/licenses/by-nc-sa/3.0/"><img src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" alt="Attribution-Noncommercial-Share Alike 3.0 Unported" width="88" height="31" /></a>
	</div>
	<div id="f-poweredbyico">
		<a href="http://www.mediawiki.org/"><img src="/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
	</div>
	<ul id="f-list">
		<li id="lastmod"> 本页面最后修订于2011年2月15日 (星期二) 16:02。</li>
		<li id="viewcount">此页面已被浏览过68,143次。</li>
		<li id="copyright">本站全部文字内容使用<a class="external" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Attribution-Noncommercial-Share Alike 3.0 Unported</a>授权。</li>
		<li id="privacy"><a href="/Jabber/XMPP%E4%B8%AD%E6%96%87%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92:%E9%9A%90%E7%A7%81%E6%9D%83%E6%94%BF%E7%AD%96" title="Jabber/XMPP中文翻译计划:隐私权政策">隐私权政策</a></li>
		<li id="about"><a href="/Jabber/XMPP%E4%B8%AD%E6%96%87%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92:%E5%85%B3%E4%BA%8E" title="Jabber/XMPP中文翻译计划:关于">关于Jabber/XMPP中文翻译计划</a></li>
		<li id="disclaimer"><a href="/Jabber/XMPP%E4%B8%AD%E6%96%87%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92:%E5%85%8D%E8%B4%A3%E5%A3%B0%E6%98%8E" title="Jabber/XMPP中文翻译计划:免责声明">免责声明</a></li>
	</ul>
</div>
</div>
<script>if(window.mw){
	mw.loader.load(["mediawiki.user", "mediawiki.util", "mediawiki.page.ready", "mediawiki.legacy.wikibits", "mediawiki.legacy.ajax", "mediawiki.legacy.mwsuggest"]);
}
</script>
<script>if(window.mw){
	mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"externaldiff":0,"externaleditor":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"highlightbroken":1,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"quickbar":5,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"showjumplinks":1,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"monobook","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,
	"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"variant":"zh-cn","language":"zh-cn","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false});;mw.user.tokens.set({"editToken":"+\\","watchToken":false});;mw.loader.state({"user.options":"ready","user.tokens":"ready"});
	
	/* cache key: mediawiki:resourceloader:filter:minify-js:4:42c4e9caefe8ca663d220ee0c286ac74 */
}
</script><!-- Piwik -->
<script type="text/javascript">
/* <![CDATA[ */
var pkBaseURL = (("https:" == document.location.protocol) ? "https://rtp.rooyee.im/piwik/" : "http://rtp.rooyee.im/piwik/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
/* ]]> */
</script>
<script type="text/javascript">
/* <![CDATA[ */
try {
var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 5);
piwikTracker.setDocumentTitle("XEP-0030");
piwikTracker.setIgnoreClasses("image");

piwikTracker.trackPageView();
piwikTracker.enableLinkTracking();
} catch( err ) {}
/* ]]> */
</script><noscript><p><img src="http://rtp.rooyee.im/piwik/piwik.php?idsite=5" style="border:0" alt=""/></p></noscript>
<!-- /Piwik --><!-- Served in 0.037 secs. --></body></html>